import{d as Y,u as q,r as c,c as ce,w as te,o as ae,z as V,a as t,b as e,e as I,g as O,v as H,F as C,f as S,s as ee,h as a,p as de,k as re,l as J,j as A,t as v,A as me,i as Z,B as he}from"./index-mfd9wXZa.js";import{_ as ie}from"./lodash-Dr4T5jGM.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=f=>(de("data-v-ffa7e076"),f=f(),re(),f),ve={class:"modal",id:"modal-form",tabindex:"-1"},_e={class:"modal-dialog modal-lg",role:"document"},fe={class:"modal-content"},ge=N(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Create New Software catalog"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),be={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},we={class:"mb-3"},ye=N(()=>e("label",{class:"form-label"},"Title",-1)),ke={class:"mb-3"},$e=N(()=>e("label",{class:"form-label"},"Summary",-1)),Ie={class:"mb-3"},Ce=N(()=>e("label",{class:"form-label"},"Icon",-1)),Se={class:"mb-3"},xe=N(()=>e("label",{class:"form-label"},"Category",-1)),Ne=J('<option value="SERVER" selected data-v-ffa7e076>SERVER</option><option value="WAS" data-v-ffa7e076>WAS</option><option value="DB" data-v-ffa7e076>DB</option><option value="UTIL" data-v-ffa7e076>UTIL</option><option value="OBSERVABILITY" data-v-ffa7e076>OBSERVABILITY</option>',5),Me=[Ne],Ue={class:"mb-3"},Te=N(()=>e("label",{class:"form-label"},"Description",-1)),Ae={class:"mb-3"},Ve=N(()=>e("label",{class:"form-label"},"Recommended Server Spec",-1)),De={style:{display:"flex","justify-content":"space-between"}},Re=N(()=>e("label",{class:"form-label required"},"CPU",-1)),Ee=N(()=>e("label",{class:"form-label required"},"MEMORY",-1)),Le=N(()=>e("label",{class:"form-label required"},"DISK",-1)),He={class:"col-lg-6"},Fe={class:"mb-3"},Be=N(()=>e("label",{class:"form-label"},"Reference",-1)),je=["onUpdate:modelValue"],Oe=J('<option value="URL" data-v-ffa7e076>URL</option><option value="MANIFEST" data-v-ffa7e076>MANIFEST</option><option value="WORKFLOW" data-v-ffa7e076>WORKFLOW</option><option value="IMAGE" data-v-ffa7e076>IMAGE</option><option value="HOMEPAGE" data-v-ffa7e076>HOMEPAGE</option><option value="TAG" data-v-ffa7e076>TAG</option><option value="ETC" data-v-ffa7e076>ETC</option>',7),ze=[Oe],Ge={class:"col-lg-6"},Pe={class:"mb-3"},Ke=N(()=>e("label",{class:"form-label"}," ",-1)),We=["onUpdate:modelValue"],Ye={class:"mb-3"},qe={class:"input-form"},Je=["onUpdate:modelValue"],Qe={class:"btn-list"},Xe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-plus",style:{margin:"0 !important"}},Ze=N(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),et=N(()=>e("path",{d:"M12 5l0 14"},null,-1)),tt=N(()=>e("path",{d:"M5 12l14 0"},null,-1)),at=[Ze,et,tt],st=["onClick"],ot={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-minus",style:{margin:"0 !important"}},lt=N(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),nt=N(()=>e("path",{d:"M5 12l14 0"},null,-1)),it=[lt,nt],ct=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1)),dt=Y({__name:"softwareCatalogForm",props:{mode:{},catalogIdx:{}},emits:["get-list"],setup(f,{emit:D}){const p=q(),l=c({}),b=c([]),M=c([]);c(!1),c(!1);const U=window.location.host.split(":"),o=window.location.protocol+"//"+U[0]+":18084",x=D,m=f,k=ce(()=>m.catalogIdx);te(k,async()=>{await $()}),ae(async()=>{await $()});const $=async()=>{m.mode=="update"?await w():(l.value={catalogIdx:null,catalogTitle:"",catalogDescription:"",catalogSummary:"",catalogCategory:"",catalogRefData:[],recommendedCpu:"",recommendedMemory:"",recommendedDisk:"",hpaMinReplicas:"",hpaMaxReplicas:"",hpaCpuUtilization:"",hpaMemoryUtilization:""},b.value=[],b.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"URL"}))},w=async()=>{try{await V.get(o+"/catalog/software/"+m.catalogIdx).then(({data:y})=>{l.value=y,y.catalogRefData.forEach(h=>{h.referenceType!==null&&(h.referenceType=h.referenceType.toUpperCase())}),b.value=y.catalogRefData})}catch(y){console.log(y),p.error("데이터를 가져올 수 없습니다.")}},d=()=>{console.log("addRef"),b.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"URL"})},T=y=>{b.value.length!==1&&b.value.splice(y,1)},F=y=>{M.value=y.target.files[0]},z=async()=>{const y=new FormData;if(y.append("iconFile",M.value),l.value.catalogRefData=b.value,y.append("catalogDto",new Blob([JSON.stringify(l.value)],{type:"application/json"})),m.mode=="new"){const h=await V.post(o+"/catalog/software",y,{headers:{"Content-Type":"multipart/form-data"}});h.data?h.data.data==null?(p.error("등록 할 수 없습니다."),$()):(p.success("등록되었습니다."),x("get-list")):(p.error("등록 할 수 없습니다."),$())}else(await V.put(o+"/catalog/software",y,{headers:{"Content-Type":"multipart/form-data"}})).data?(p.success("수정되었습니다."),x("get-list")):(p.error("수정 할 수 없습니다."),$())};return(y,h)=>(a(),t("div",ve,[e("div",_e,[e("div",fe,[ge,e("div",be,[e("div",we,[ye,I(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"Application name","onUpdate:modelValue":h[0]||(h[0]=_=>l.value.catalogTitle=_)},null,512),[[O,l.value.catalogTitle]])]),e("div",ke,[$e,I(e("input",{type:"text",class:"form-control",id:"sc-summary",name:"summary",placeholder:"Application summary","onUpdate:modelValue":h[1]||(h[1]=_=>l.value.catalogSummary=_)},null,512),[[O,l.value.catalogSummary]])]),e("div",Ie,[Ce,e("input",{type:"file",class:"form-control",id:"sc-icon",name:"icon",placeholder:"Icon File",onChange:F},null,32)]),e("div",Se,[xe,I(e("select",{class:"form-select",id:"sc-category","onUpdate:modelValue":h[2]||(h[2]=_=>l.value.catalogCategory=_)},Me,512),[[H,l.value.catalogCategory]])]),e("div",Ue,[Te,I(e("textarea",{class:"form-control",rows:"5",id:"sc-desc","onUpdate:modelValue":h[3]||(h[3]=_=>l.value.catalogDescription=_)},null,512),[[O,l.value.catalogDescription]])]),e("div",Ae,[Ve,e("div",De,[e("div",null,[Re,I(e("input",{type:"number",class:"form-control w-90-per",placeholder:"2","onUpdate:modelValue":h[4]||(h[4]=_=>l.value.recommendedCpu=_)},null,512),[[O,l.value.recommendedCpu]])]),e("div",null,[Ee,I(e("input",{type:"number",class:"form-control w-90-per",placeholder:"4","onUpdate:modelValue":h[5]||(h[5]=_=>l.value.recommendedMemory=_)},null,512),[[O,l.value.recommendedMemory]])]),e("div",null,[Le,I(e("input",{type:"number",class:"form-control w-90-per",placeholder:"20","onUpdate:modelValue":h[6]||(h[6]=_=>l.value.recommendedDisk=_)},null,512),[[O,l.value.recommendedDisk]])])])]),(a(!0),t(C,null,S(b.value,(_,G)=>(a(),t("div",{class:"row",id:"sc-ref",key:G},[e("div",He,[e("div",Fe,[Be,I(e("select",{class:"form-select",id:"sc-reference-1","onUpdate:modelValue":R=>_.referenceType=R},ze,8,je),[[H,_.referenceType]])])]),e("div",Ge,[e("div",Pe,[Ke,I(e("input",{type:"text",class:"form-control",id:"sc-ref-value-1",name:"refValue",placeholder:"Ref value","onUpdate:modelValue":R=>_.referenceValue=R},null,8,We),[[O,_.referenceValue]])])]),e("div",Ye,[e("div",qe,[I(e("input",{type:"text",class:"form-control w-80-per",id:"sc-ref-desc-1",name:"refDescription",placeholder:"Ref Description","onUpdate:modelValue":R=>_.referenceDescription=R},null,8,Je),[[O,_.referenceDescription]]),e("div",Qe,[e("button",{class:"btn btn-primary",onClick:d,style:{"text-align":"center !important"}},[(a(),t("svg",Xe,at))]),e("button",{class:"btn btn-primary",onClick:R=>T(G)},[(a(),t("svg",ot,it))],8,st)])])])]))),128))]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:$}," Cancel "),e("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:z},[ct,ee(" Create New Software catalog ")])])])])]))}}),rt=ue(dt,[["__scopeId","data-v-ffa7e076"]]),ut={class:"modal",id:"softwareCatalogLog",tabindex:"-1"},pt={class:"modal-dialog modal-xl",role:"document"},mt={class:"modal-content"},ht=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),vt={class:"modal-body text-left py-4"},_t={class:"mb-5"},ft={key:0,class:"spinner-border",role:"status"},gt=e("span",{class:"visually-hidden"},"Loading...",-1),bt=[gt],wt={key:0},yt=e("p",{class:"text-secondary"},"No Data",-1),kt=[yt],$t={class:"card mb-3"},It=["onClick"],Ct={class:"card-title"},St={key:0,class:"card-body"},xt=["value"],Nt=Y({__name:"softwareCatalogLog",props:{jobName:{}},setup(f){q();const D=f,p=c(!1),l=window.location.host.split(":"),b=window.location.protocol+"//"+l[0]+":18084",M=ce(()=>D.jobName);te(M,async()=>{p.value=!1,await o()});const U=c([]),o=async()=>{U.value=[];const $=await V.get(b+"/ape/log/"+M.value);U.value=$.data.data,p.value=!0},x=()=>{U.value=[],m.value=1},m=c(1),k=$=>{m.value===$?m.value=0:m.value=$};return($,w)=>(a(),t("div",ut,[e("div",pt,[e("div",mt,[ht,e("div",vt,[e("h3",_t,[ee(" Build Log "),p.value?A("",!0):(a(),t("div",ft,bt))]),e("div",null,[U.value.length<=0?(a(),t("div",wt,kt)):(a(!0),t(C,{key:1},S(U.value,d=>(a(),t("div",{key:d.buildIdx},[e("div",$t,[e("div",{class:"card-header",onClick:T=>k(d.buildIdx),style:{cursor:"pointer"}},[e("h3",Ct,v(d.buildIdx),1)],8,It),m.value===d.buildIdx?(a(),t("div",St,[e("textarea",{value:d.buildLog,disabled:"",style:{width:"100%"},rows:"20"},null,8,xt)])):A("",!0)])]))),128))])]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:x}," Cancel ")])])])]))}}),j=f=>(de("data-v-b7d15bd3"),f=f(),re(),f),Mt={class:"modal",id:"install-form",tabindex:"-1"},Ut={class:"modal-dialog modal-lg",role:"document"},Tt={class:"modal-content"},At={class:"modal-header"},Vt={class:"modal-title"},Dt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},Rt={class:"mb-3"},Et=j(()=>e("label",{class:"form-label"},"Target Infra",-1)),Lt={key:0,class:"text-muted"},Ht={key:1,class:"text-muted"},Ft=["value"],Bt={class:"mb-3"},jt=j(()=>e("label",{class:"form-label"},"Namespace",-1)),Ot={key:0,class:"text-muted"},zt={key:1,class:"text-muted"},Gt=["value"],Pt={value:"selectNsId"},Kt={class:"mb-3"},Wt=j(()=>e("label",{class:"form-label"},"MCI Name",-1)),Yt={key:0,class:"text-muted"},qt={key:1,class:"text-muted"},Jt=["disabled"],Qt=["value"],Xt={class:"mb-3"},Zt=j(()=>e("label",{class:"form-label"},"VM Name",-1)),ea=j(()=>e("p",{class:"text-muted"}," Select the virtual machine (VM) within the chosen multi-cloud infrastructure where the application will be deployed",-1)),ta=["disabled"],aa=["value"],sa={class:"mb-3"},oa=j(()=>e("label",{class:"form-label"},"Application",-1)),la=j(()=>e("p",{class:"text-muted"},"Select the application",-1)),na={class:"mb-3"},ia=j(()=>e("label",{class:"form-label"},"Namespace",-1)),ca={key:0,class:"text-muted"},da={key:1,class:"text-muted"},ra=["value"],ua={value:"selectNsId"},pa={class:"mb-3"},ma=j(()=>e("label",{class:"form-label"},"ClusterName",-1)),ha={key:0,class:"text-muted"},va={key:1,class:"text-muted"},_a=["disabled"],fa=["value"],ga={class:"mb-3"},ba=j(()=>e("label",{class:"form-label"},"Helm chart",-1)),wa=j(()=>e("p",{class:"text-muted"},"Select the application",-1)),ya={class:"modal-footer",style:{display:"flex","justify-content":"space-between"}},ka=["disabled"],$a=["disabled"],Ia=Y({__name:"applicationInstallationForm",props:{nsId:{},title:{},catalogList:{}},setup(f){const D=window.location.host.split(":"),p=window.location.protocol+"//"+D[0]+":18084",l=q(),b=f,M=ce(()=>b.title),U=c(""),o=c(""),x=c([]),m=c([]),k=c([]),$=c([]),w=c(""),d=c(""),T=c(""),F=c("");c({});const z=c([]),y=c(""),h=c(""),_=c(!0);te(M,async()=>{U.value=G(b.title),o.value=b.title,await R()}),ae(async()=>{await R()});const G=g=>g.split("_").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "),R=async()=>{x.value=[{key:"VM",value:"VM"},{key:"k8s",value:"K8S"}],ie.isEmpty(b.nsId)?await se():d.value=b.nsId,o.value==="Application Uninstallation"?_.value=!1:_.value=!0},se=async()=>{const g=await V.get(p+"/cbtumblebug/ns");m.value=g.data,m.value.length>0&&(d.value=m.value[0].name,o.value=="Application Installation"||o.value=="Application Uninstallation"?await K():await W()),ie.isEmpty(d.value)||(w.value==="VM"?await K():await W())},K=async()=>{const g=await V.get(p+"/cbtumblebug/ns/"+d.value+"/mci");k.value=g.data,k.value.length>0?(T.value=k.value[0].name,await Q()):T.value=""},Q=async()=>{const g=await V.get(p+"/cbtumblebug/ns/"+d.value+"/mci/"+T.value);$.value=g.data.vm,k.value.length>0?F.value=$.value[0].name:F.value=""},W=async()=>{const g=await V.get(p+"/cbtumblebug/ns/"+d.value+"/k8scluster");z.value=g.data,z.value.length>0?y.value=z.value[0].name:y.value=""},P=async()=>{await K(),X()},oe=async()=>{await Q(),X()},n=async()=>{await W(),X()},r=async()=>{if(w.value==="VM"){let g="";o.value=="Application Installation"?g="/ape/vm/install":g="/ape/vm/uninstall";const u=h.value.split(",").map(ne=>ne.trim()),s={namespace:d.value,mciName:T.value,vmName:F.value,applications:u},B=await V.post(p+g,s);B.data.code==200&&B.data.message?l.success(B.data.message):l.error(B.data.message)}else if(w.value==="K8S"){let g="";o.value=="Application Installation"?g="/ape/helm/install":g="/ape/helm/uninstall";const u=h.value.split(",").map(ne=>ne.trim()),s={namespace:d.value,clusterName:y.value,helmCharts:u},B=await V.post(p+g,s);B.data.code==200&&B.data.message?l.success(B.data.message):l.error(B.data.message)}},i=async()=>{w.value==="VM"||w.value==="K8S"?E().then(g=>{let u=!0,s="";if(g===null){l.error("Please select all items");return}if(!g){w.value==="VM"?s="VM":w.value==="K8S"&&(s="CLUSTER");const B="Your selected "+s+" has lower specifications than recommended. Would you like to continue with the installation?";u=confirm(B)}u&&(l.success("Please click RUN"),_.value=!1)}):l.error("Please Select Infra")},E=async()=>{let g=!1,u="",s="";if(w.value==="VM"){if(console.log("inputApplications.value >> ",h.value),d.value===void 0||T.value===void 0||F.value===void 0||L.value===void 0)return null;u="/applications/vm/check/application",s="?namespace="+d.value+"&mciName="+T.value+"&vmName="+F.value+"&catalogId="+L.value}else if(w.value==="K8S"){if(d.value===void 0||y.value===void 0||L.value===void 0){l.error("Please select all items");return}u="/applications/k8s/check/application",s="?namespace="+d.value+"&clusterName="+y.value+"&catalogId="+L.value}return g=await V.get(p+u+s),g},L=c(0),le=()=>{_.value=!0,b.catalogList.forEach(g=>{if(h.value===g.catalogTitle){L.value=g.catalogIdx;return}})},X=()=>{_.value=!0};return(g,u)=>(a(),t("div",Mt,[e("div",Ut,[e("div",Tt,[e("div",At,[e("h5",Vt,v(o.value),1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:R})]),e("div",Dt,[e("div",Rt,[Et,o.value=="Application Installation"?(a(),t("p",Lt," Select the Infra what is the Infra will be installed ")):o.value=="Application Uninstallation"?(a(),t("p",Ht," Select the Infra what is the Infra will be uninstalled ")):A("",!0),I(e("select",{class:"form-select",id:"infra","onUpdate:modelValue":u[0]||(u[0]=s=>w.value=s),onClick:X},[(a(!0),t(C,null,S(x.value,s=>(a(),t("option",{value:s.value,key:s.value},v(s.value),9,Ft))),128))],512),[[H,w.value]])]),w.value=="VM"?(a(),t(C,{key:0},[e("div",Bt,[jt,o.value=="Application Installation"?(a(),t("p",Ot," Select the namespace where the application will be installed")):o.value=="Application Uninstallation"?(a(),t("p",zt," Select the namespace where the application will be uninstalled")):A("",!0),m.value.length>0?I((a(),t("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":u[1]||(u[1]=s=>d.value=s),onChange:P},[(a(!0),t(C,null,S(m.value,s=>(a(),t("option",{value:s.name,key:s.name},v(s.name),9,Gt))),128))],544)),[[H,d.value]]):I((a(),t("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":u[2]||(u[2]=s=>d.value=s),onChange:P},[e("option",Pt,v(d.value),1)],544)),[[H,d.value]])]),e("div",Kt,[Wt,o.value=="Application Installation"&&w.value=="VM"?(a(),t("p",Yt," Select the multi-cloud infrastructure information where the application will be deployed")):o.value=="Application Uninstallation"&&w.value=="VM"?(a(),t("p",qt," Remove the application and associated resources from the multi-cloud infrastructure")):A("",!0),I(e("select",{class:"form-select",id:"mci-name",disabled:d.value=="","onUpdate:modelValue":u[3]||(u[3]=s=>T.value=s),onChange:oe},[(a(!0),t(C,null,S(k.value,s=>(a(),t("option",{value:s.id,key:s.name},v(s.name),9,Qt))),128))],40,Jt),[[H,T.value]])]),e("div",Xt,[Zt,ea,I(e("select",{class:"form-select",id:"mci-name",disabled:T.value=="","onUpdate:modelValue":u[4]||(u[4]=s=>F.value=s)},[(a(!0),t(C,null,S($.value,s=>(a(),t("option",{value:s.id,key:s.name},v(s.name),9,aa))),128))],8,ta),[[H,F.value]])]),e("div",sa,[oa,la,I(e("select",{class:"form-select","onUpdate:modelValue":u[5]||(u[5]=s=>h.value=s),onChange:le},[(a(!0),t(C,null,S(b.catalogList,s=>(a(),t("option",{key:s},v(s.catalogTitle),1))),128))],544),[[H,h.value]])])],64)):w.value=="K8S"?(a(),t(C,{key:1},[e("div",na,[ia,o.value=="Application Installation"?(a(),t("p",ca,"Select the namespace where the application will be installed")):o.value=="Application Uninstallation"?(a(),t("p",da,"Select the namespace where the application will be uninstalled")):A("",!0),m.value.length>0?I((a(),t("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":u[6]||(u[6]=s=>d.value=s),onChange:n},[(a(!0),t(C,null,S(m.value,s=>(a(),t("option",{value:s.name,key:s.name},v(s.name),9,ra))),128))],544)),[[H,d.value]]):I((a(),t("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":u[7]||(u[7]=s=>d.value=s),onChange:P},[e("option",ua,v(d.value),1)],544)),[[H,d.value]])]),e("div",pa,[ma,o.value=="Application Installation"?(a(),t("p",ha,"Select the name of the cluster where the application will be deployed")):o.value=="Application Uninstallation"?(a(),t("p",va,"Remove the application and associated resources from the multi-cloud infrastructure")):A("",!0),I(e("select",{class:"form-select",id:"mci-name",disabled:d.value=="","onUpdate:modelValue":u[8]||(u[8]=s=>y.value=s)},[(a(!0),t(C,null,S(z.value,s=>(a(),t("option",{value:s.id,key:s.name},v(s.name),9,fa))),128))],8,_a),[[H,y.value]])]),e("div",ga,[ba,wa,I(e("select",{class:"form-select","onUpdate:modelValue":u[9]||(u[9]=s=>h.value=s),onChange:le},[(a(!0),t(C,null,S(b.catalogList,s=>(a(),t("option",{key:s},v(s.catalogTitle),1))),128))],544),[[H,h.value]])])],64)):A("",!0)]),e("div",ya,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:R}," Cancel "),e("div",null,[o.value=="Application Installation"?(a(),t("button",{key:0,class:"btn btn-danger ms-auto",onClick:i,style:{"margin-right":"5px"},disabled:!_.value}," Spec Check ",8,ka)):A("",!0),e("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:r,disabled:_.value}," RUN ",8,$a)])])])])]))}}),Ca=ue(Ia,[["__scopeId","data-v-b7d15bd3"]]),pe=f=>(de("data-v-5c3dbff4"),f=f(),re(),f),Sa={class:"modal",id:"status-modal",tabindex:"-1"},xa={class:"modal-dialog modal-lg",role:"document"},Na={class:"modal-content"},Ma={class:"modal-header"},Ua={class:"modal-title"},Ta=pe(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Aa={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},Va={class:"mb-3"},Da={class:"tree tree-item d-flex justify-content-start"},Ra={key:0,class:"bi bi-caret-down-fill",style:{"font-size":"x-large"}},Ea={key:1,class:"bi bi-caret-right-fill",style:{"font-size":"x-large"}},La={key:0},Ha={class:"d-flex justify-content-start"},Fa={key:0,class:"bi bi-caret-down-fill",style:{"font-size":"x-large"}},Ba={key:1,class:"bi bi-caret-right-fill",style:{"font-size":"x-large"}},ja={class:"tree tree-item"},Oa={class:"d-flex justify-content-start"},za=pe(()=>e("i",{class:"bi bi-caret-down-fill",style:{"font-size":"x-large"}},null,-1)),Ga={class:"tree tree-item"},Pa=pe(()=>e("i",{class:"bi bi-dot",style:{"font-size":"x-large"}},null,-1)),Ka={calss:"tree tree-item",style:{display:"inline !important","margin-left":"10px !important"}},Wa={key:0,class:"btn btn-success btn-sm d-inline"},Ya={key:1,class:"btn btn-danger btn-sm d-inline"},qa={key:1},Ja={key:0,class:"bi bi-caret-down-fill",style:{"font-size":"x-large"}},Qa={key:1,class:"bi bi-caret-right-fill",style:{"font-size":"x-large"}},Xa={class:"tree"},Za=Y({__name:"softwareStatus",props:{nsName:{},list:{}},emits:["reset-init-flag"],setup(f,{emit:D}){const p=f;c(!1),te(p.list,()=>{console.log(p.list),p.list.forEach(o=>{console.log(o)})}),q();const l=c([]),b=window.location.host.split(":");window.location.protocol+""+b[0],ae(async()=>{const o=document.getElementById("status-modal");o==null||o.addEventListener("shown.bs.modal",async()=>{await M()})});const M=async()=>{await U()},U=async()=>{l.value=[{type:"VM",list:[{mciId:1,mciName:"mci01",vmList:[{vmId:1,vmName:"vm01-1",installedApplication:[{applicationId:1,applicationName:"Nginx",applicationStatus:"RUNNING"},{applicationId:2,applicationName:"MariaDB",applicationStatus:"RESTARTING"},{applicationId:3,applicationName:"REDIS",applicationStatus:"STOP"},{applicationId:4,applicationName:"TOMCAT",applicationStatus:null}]}]},{mciId:2,mciName:"mci02",vmList:[{vmId:1,vmName:"vm02-1",installedApplication:[{applicationId:1,applicationName:"Nginx",applicationStatus:"RUNNING"},{applicationId:2,applicationName:"MariaDB",applicationStatus:"RESTARTING"},{applicationId:3,applicationName:"REDIS",applicationStatus:"STOP"},{applicationId:4,applicationName:"TOMCAT",applicationStatus:null}]}]}]},{type:"K8S",list:[{pmkId:1,pmkName:"pmk01",installedApplication:[{applicationId:1,applicationName:"Nginx",applicationStatus:"RUNNING"},{applicationId:2,applicationName:"MariaDB",applicationStatus:"RESTARTING"},{applicationId:3,applicationName:"REDIS",applicationStatus:"STOP"},{applicationId:4,applicationName:"TOMCAT",applicationStatus:null}]}]}],l.value.forEach(o=>{o.showFlag=!1,o.type==="VM"?o.forEach(x=>{x.showFlag=!1,x.forEach(m=>{m.showFlag=!1})}):o.type==="K8S"&&o.forEach(x=>{x.showFlag=!1})})};return(o,x)=>(a(),t("div",Sa,[e("div",xa,[e("div",Na,[e("div",Ma,[e("h5",Ua,"Software Status ["+v(o.nsName)+"]",1),Ta]),e("div",Aa,[e("div",Va,[(a(!0),t(C,null,S(l.value,m=>(a(),t("div",{key:m.type,onClick:x[0]||(x[0]=(...k)=>o.onClickInfra&&o.onClickInfra(...k))},[e("div",Da,[m.showFlag?(a(),t("i",Ra)):(a(),t("i",Ea)),e("p",null,v(m.type),1)]),m.type==="VM"?I((a(),t("div",La,[(a(!0),t(C,null,S(m.list,k=>(a(),t("div",{class:"tree",key:k.mciId},[e("div",Ha,[k.showFlag?(a(),t("i",Fa)):(a(),t("i",Ba)),e("p",ja,v(k.mciName),1)]),(a(!0),t(C,null,S(k.vmList,$=>(a(),t("div",{class:"tree",key:$.vmId},[e("div",Oa,[za,e("p",Ga,v($.vmName),1)]),(a(!0),t(C,null,S($.installedApplication,w=>(a(),t("div",{class:"tree tree-item",key:w.applicationId},[Pa,e("p",Ka,v(w.applicationName),1),w.applicationStatus!==null?(a(),t("button",Wa,v(w.applicationStatus),1)):(a(),t("button",Ya,"UNDEFINED"))]))),128))]))),128))]))),128))],512)),[[me,m.showFlag]]):A("",!0),m.type==="K8S"?I((a(),t("div",qa,[(a(!0),t(C,null,S(m.list,k=>(a(),t("div",{class:"tree",key:k.pmkid},[m.showFlag?(a(),t("i",Ja)):(a(),t("i",Qa)),e("p",Xa,v(k.pmkName),1)]))),128))],512)),[[me,m.showFlag]]):A("",!0)]))),128))])]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:M}," Cancel ")])])])]))}}),es=ue(Za,[["__scopeId","data-v-5c3dbff4"]]);/*!
* Tabler v1.0.0-beta19 (https://tabler.io)
* @version 1.0.0-beta19
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
*/(function(f){typeof define=="function"&&define.amd?define(f):f()})(function(){var f,D="tablerTheme",p=new Proxy(new URLSearchParams(window.location.search),{get:function(b,M){return b.get(M)}});if(p.theme)localStorage.setItem(D,p.theme),f=p.theme;else{var l=localStorage.getItem(D);f=l||"light"}f==="dark"?document.body.setAttribute("data-bs-theme",f):document.body.removeAttribute("data-bs-theme")});const ts={class:"page",ref:"sofwareCatalog"},as={class:"page-wrapper"},ss=e("div",{class:"col d-flex"},[e("h2",{class:"page-title"},"Software catalog")],-1),os=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1),ls={class:"page-body"},ns={class:"container-xl"},is={class:"row"},cs={class:"col-lg-8"},ds={class:"col-auto me-auto fs-3"},rs={class:"d-flex justify-content-end"},us={class:"card"},ps={class:"list-group card-list-group",id:"sc-list-group"},ms={class:"row g-2 align-items-center"},hs={class:"col-auto fs-3"},vs={class:"col-auto"},_s=["src"],fs=["onClick"],gs={class:"text-muted"},bs={class:"col-auto text-muted"},ws={class:"col-auto lh-1"},ys={class:"dropdown"},ks=J('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),$s={class:"dropdown-menu dropdown-menu-end"},Is=["onClick"],Cs=["id"],Ss={class:"accordion-body pt-0"},xs=e("br",null,null,-1),Ns=["innerHTML"],Ms=e("br",null,null,-1),Us=e("br",null,null,-1),Ts=e("strong",null,"관련 정보",-1),As=["id"],Vs=["onClick"],Ds=e("strong",null,"TAGS",-1),Rs=["id"],Es=e("strong",null,"Recommended Spec",-1),Ls=["id"],Hs={class:"btn btn-sm",style:{"margin-right":"5px"}},Fs={class:"btn btn-sm",style:{"margin-right":"5px"}},Bs={class:"btn btn-sm",style:{"margin-right":"5px"}},js={class:"col-lg-4"},Os=e("div",null,[e("br")],-1),zs=e("h3",{class:"mb-3"},"dockerHub search",-1),Gs={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},Ps={class:"row row-cards",id:"resultDockerHubSearch"},Ks={class:"card"},Ws={class:"row row-0"},Ys={class:"col-auto"},qs=["src"],Js={class:"col"},Qs={class:"card-body"},Xs={href:"",target:"_blank"},Zs={class:"text-muted"},eo=J('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),to=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),ao=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),so=e("div",{style:{"margin-bottom":"20px"}}," ",-1),oo=e("h3",{class:"mb-3"},"artifactHub search",-1),lo={key:1,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},no={class:"row row-cards",id:"resultArtifactHubSearch"},io={class:"card"},co={class:"row row-0"},ro=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1),uo={class:"col"},po={class:"card-body"},mo={href:"",target:"_blank"},ho={class:"text-muted"},vo=J('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),_o=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),fo=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),yo=Y({__name:"SoftwareCatalogList",setup(f){const D=q(),p=c([]),l=c(""),b=window.location.host.split(":"),M=window.location.protocol+"//"+b[0]+":18084",U=c([]),o=c([]),x=c(0),m=c(""),k=c("new"),$=c(""),w=c("ns01"),d=c("");ae(async()=>{l.value="",window.addEventListener("message",async function(n){const r=n.data;r.projectInfo&&($.value=r.projectInfo.ns_id)}),await T()});const T=async()=>{try{const n=await V.get(M+"/catalog/software/?title="+l.value);ie.forEach(n.data,function(r){r.catalogIcon=M+r.catalogIcon,r.refData=F(r.catalogRefData),r.isShow=!1}),p.value=n.data}catch(n){console.log(n),D.error("데이터를 가져올 수 없습니다.")}},F=n=>n.reduce((r,i)=>(r[i.referenceType]||(r[i.referenceType]=[]),r[i.referenceType].push(i),r),{}),z=async n=>{n.keyCode==13&&(await T(),await y(),await h())},y=async()=>{U.value=[];try{const n=await V.get(M+"/search/dockerhub/"+l.value);for(let r=0;r<3;r++)U.value.push(n.data.data.results[r])}catch(n){console.log(n),D.error("데이터를 가져올 수 없습니다.")}},h=async()=>{o.value=[];try{const n=await V.get(M+"/search/artifacthub/"+l.value);for(let r=0;r<3;r++)o.value.push(n.data.data.packages[r])}catch(n){console.log(n),D.error("데이터를 가져올 수 없습니다.")}},_=async n=>{p.value.forEach(r=>{r.isShow=!1}),p.value[n].isShow=!p.value[n].isShow},G=(n,r)=>Object.prototype.hasOwnProperty.call(n,r),R=n=>{window.open(n)},se=n=>{k.value="update",x.value=n},K=()=>{k.value="new",x.value=0},Q=()=>{let n=`https://hub.docker.com/search?q=${l.value}`;window.open(n,"_blank")},W=()=>{let n=`https://artifacthub.io/packages/search?ts_query_web=${l.value}&sort=relevance&page=1`;window.open(n,"_blank")},P=n=>{d.value=n},oe=n=>n.replace(/\\n|\n/g,"<br/>");return(n,r)=>(a(),t("div",ts,[e("div",as,[e("div",{class:"page-header d-print-none"},[e("div",{class:"container-xl"},[e("div",{class:"row g-2 align-items-center"},[ss,e("div",{class:"col-auto ms-auto"},[e("div",{class:"btn-list"},[e("a",{class:"btn btn-primary d-none d-sm-inline-block",onClick:K,"data-bs-toggle":"modal","data-bs-target":"#modal-form"},[os,ee(" New ")])])])])])]),e("div",ls,[e("div",ns,[e("div",is,[e("div",cs,[e("div",ds,[e("div",rs,[e("button",{class:"btn btn-primary me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:r[0]||(r[0]=i=>P("Application Installation"))},"INSTALL"),e("button",{class:"btn btn-danger me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:r[1]||(r[1]=i=>P("Application Uninstallation"))},"UNINSTALL")])]),e("div",us,[e("div",ps,[(a(!0),t(C,null,S(p.value,(i,E)=>(a(),t("div",{class:"list-group-item",key:E},[e("div",ms,[e("div",hs,v(E+1),1),e("div",vs,[e("img",{src:i.catalogIcon,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,_s)]),e("div",{class:"col",onClick:L=>_(E)},[ee(v(i.catalogTitle)+" ",1),e("div",gs,v(i.catalogSummary),1)],8,fs),e("div",bs,v(i.catalogCategory),1),e("div",ws,[e("div",ys,[ks,e("div",$s,[e("a",{class:"dropdown-item",onClick:L=>se(i.catalogIdx),"data-bs-toggle":"modal","data-bs-target":"#modal-form"},"Update",8,Is)])])]),e("div",{id:"accordion_"+i.catalogIdx,class:"accordion-collapse collapse",style:he([i.isShow?{display:"block"}:{display:"none"}])},[e("div",Ss,[xs,e("div",{style:{"white-space":"pre-wrap"},innerHTML:oe(i.catalogDescription)},null,8,Ns),e("div",null,[Ms,Us,Ts,e("ul",{id:`${E}-entity-ul`},[G(i.refData,"HOMEPAGE")?(a(!0),t(C,{key:0},S(i.refData.HOMEPAGE,L=>(a(),t("li",null,[e("a",{onClick:le=>R(L.referenceValue),class:"btn"},v(L.referenceValue),9,Vs)]))),256)):A("",!0)],8,As),Ds,e("ul",{id:`${E}-tag-ul`},[G(i.refData,"TAG")?(a(!0),t(C,{key:0},S(i.refData.TAG,L=>(a(),t("span",null,"#"+v(L.referenceValue)+"  ",1))),256)):A("",!0)],8,Rs),Es,e("ul",{id:`${E}-tag-ul`},[i.recommendedCpu&&i.recommendedMemory&&i.recommendedDisk?(a(),t(C,{key:0},[e("button",Hs," CPU : "+v(i.recommendedCpu),1),e("button",Fs," MEMORY : "+v(i.recommendedMemory),1),e("button",Bs," DISK : "+v(i.recommendedDisk),1)],64)):A("",!0)],8,Ls)])])],12,Cs)])]))),128))])])]),e("div",js,[I(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:z,"onUpdate:modelValue":r[2]||(r[2]=i=>l.value=i),id:"inputCatalogSearch"},null,544),[[O,l.value]]),Os,zs,U.value.length==0?(a(),t("div",Gs,"검색된 관련 ContainerImage가 없습니다.")):A("",!0),e("div",Ps,[(a(!0),t(C,null,S(U.value,(i,E)=>(a(),t("div",{class:"col-md-6 col-lg-12",key:E},[e("div",Ks,[e("div",Ws,[e("div",Ys,[e("img",{src:i.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,qs)]),e("div",Js,[e("div",Qs,[e("a",Xs,v(i.name),1),e("div",Zs,v(i.short_description.length>30?i.short_description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[eo,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:Q}," 해당 페이지로 이동 "),to,ao])])])])])]))),128))]),so,oo,o.value.length==0?(a(),t("div",lo,"검색된 관련 HelmChart가 없습니다.")):A("",!0),e("div",no,[(a(!0),t(C,null,S(o.value,(i,E)=>(a(),t("div",{class:"col-md-6 col-lg-12",key:E},[e("div",io,[e("div",co,[ro,e("div",uo,[e("div",po,[e("a",mo,v(i.name),1),e("div",ho,v(i.description.length>30?i.description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[vo,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:W}," 해당 페이지로 이동 "),_o,fo])])])])])]))),128))])])])])])]),Z(es,{"ns-name":w.value},null,8,["ns-name"]),Z(rt,{mode:k.value,"catalog-idx":x.value,onGetList:T},null,8,["mode","catalog-idx"]),Z(Nt,{"job-name":m.value},null,8,["job-name"]),Z(Ca,{"ns-id":$.value,title:d.value,"catalog-list":p.value},null,8,["ns-id","title","catalog-list"])],512))}});export{yo as default};
