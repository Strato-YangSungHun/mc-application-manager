import{d as Q,u as X,r as u,c as K,w as q,o as le,z as S,a as o,b as e,e as f,g as R,v as O,F as k,f as U,s as J,h as s,p as ie,k as ce,l as z,j as V,t as v,i as oe,A as re,B as ue}from"./index-DiekPTru.js";import{_ as se}from"./lodash-Di5NbIXx.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y=g=>(ie("data-v-b2e70788"),g=g(),ce(),g),pe={class:"modal",id:"modal-form",tabindex:"-1"},me={class:"modal-dialog modal-lg",role:"document"},_e={class:"modal-content"},he=y(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Create New Software catalog"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),ve={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},ge={class:"mb-3"},be=y(()=>e("label",{class:"form-label"},"Title",-1)),fe={class:"mb-3"},we=y(()=>e("label",{class:"form-label"},"Summary",-1)),ye={class:"mb-3"},ke=y(()=>e("label",{class:"form-label"},"Icon",-1)),$e={class:"mb-3"},Ce=y(()=>e("label",{class:"form-label"},"Category",-1)),xe=z('<option value="SERVER" selected data-v-b2e70788>SERVER</option><option value="WAS" data-v-b2e70788>WAS</option><option value="DB" data-v-b2e70788>DB</option><option value="UTIL" data-v-b2e70788>UTIL</option><option value="OBSERVABILITY" data-v-b2e70788>OBSERVABILITY</option>',5),Ie=[xe],Se={class:"mb-3"},Me=y(()=>e("label",{class:"form-label"},"Description",-1)),Ue={class:"mb-3"},Ve=y(()=>e("label",{class:"form-label"},"Recommended Server Spec",-1)),De={style:{display:"flex","justify-content":"space-between"}},Te=y(()=>e("label",{class:"form-label required"},"CPU",-1)),Ne=y(()=>e("label",{class:"form-label required"},"MEMORY",-1)),Ae=y(()=>e("label",{class:"form-label required"},"DISK",-1)),Re={class:"col-lg-6"},Le={class:"mb-3"},Ee=y(()=>e("label",{class:"form-label"},"Reference",-1)),He=["onUpdate:modelValue"],je=z('<option value="URL" data-v-b2e70788>URL</option><option value="MANIFEST" data-v-b2e70788>MANIFEST</option><option value="WORKFLOW" data-v-b2e70788>WORKFLOW</option><option value="IMAGE" data-v-b2e70788>IMAGE</option><option value="HOMEPAGE" data-v-b2e70788>HOMEPAGE</option><option value="TAG" data-v-b2e70788>TAG</option><option value="ETC" data-v-b2e70788>ETC</option>',7),Be=[je],Oe={class:"col-lg-6"},Fe={class:"mb-3"},Ge=y(()=>e("label",{class:"form-label"}," ",-1)),Pe=["onUpdate:modelValue"],ze={class:"mb-3"},We={class:"input-form"},Ye=["onUpdate:modelValue"],Ke={class:"btn-list"},qe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-plus",style:{margin:"0 !important"}},Je=y(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Qe=y(()=>e("path",{d:"M12 5l0 14"},null,-1)),Xe=y(()=>e("path",{d:"M5 12l14 0"},null,-1)),Ze=[Je,Qe,Xe],et=["onClick"],tt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-minus",style:{margin:"0 !important"}},at=y(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),ot=y(()=>e("path",{d:"M5 12l14 0"},null,-1)),st=[at,ot],lt=y(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1)),nt=Q({__name:"softwareCatalogForm",props:{mode:{},catalogIdx:{}},emits:["get-list"],setup(g,{emit:D}){const d=X(),i=u({}),_=u([]),C=u([]),x=window.location.host.split(":"),N=window.location.protocol+"//"+x[0]+":18084",l=D,c=g,$=K(()=>c.catalogIdx);q($,async()=>{await b()}),le(async()=>{await b()});const b=async()=>{c.mode=="update"?await B():(i.value={catalogIdx:null,catalogTitle:"",catalogDescription:"",catalogSummary:"",catalogCategory:"",catalogRefData:[]},_.value=[],_.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"URL"}))},B=async()=>{try{await S.get(N+"/catalog/software/"+c.catalogIdx).then(({data:p})=>{i.value=p,p.catalogRefData.forEach(r=>{r.referenceType!==null&&(r.referenceType=r.referenceType.toUpperCase())}),_.value=p.catalogRefData})}catch(p){console.log(p),d.error("데이터를 가져올 수 없습니다.")}},w=()=>{console.log("addRef"),_.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"URL"})},T=p=>{_.value.length!==1&&_.value.splice(p,1)},L=p=>{C.value=p.target.files[0]},E=async()=>{const p=new FormData;if(p.append("iconFile",C.value),i.value.catalogRefData=_.value,p.append("catalogDto",new Blob([JSON.stringify(i.value)],{type:"application/json"})),c.mode=="new"){const r=await S.post(N+"/catalog/software",p,{headers:{"Content-Type":"multipart/form-data"}});r.data?r.data.data==null?(d.error("등록 할 수 없습니다."),b()):(d.success("등록되었습니다."),l("get-list")):(d.error("등록 할 수 없습니다."),b())}else(await S.put(N+"/catalog/software",p,{headers:{"Content-Type":"multipart/form-data"}})).data?(d.success("수정되었습니다."),l("get-list")):(d.error("수정 할 수 없습니다."),b())};return(p,r)=>(s(),o("div",pe,[e("div",me,[e("div",_e,[he,e("div",ve,[e("div",ge,[be,f(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"Application name","onUpdate:modelValue":r[0]||(r[0]=h=>i.value.catalogTitle=h)},null,512),[[R,i.value.catalogTitle]])]),e("div",fe,[we,f(e("input",{type:"text",class:"form-control",id:"sc-summary",name:"summary",placeholder:"Application summary","onUpdate:modelValue":r[1]||(r[1]=h=>i.value.catalogSummary=h)},null,512),[[R,i.value.catalogSummary]])]),e("div",ye,[ke,e("input",{type:"file",class:"form-control",id:"sc-icon",name:"icon",placeholder:"Icon File",onChange:L},null,32)]),e("div",$e,[Ce,f(e("select",{class:"form-select",id:"sc-category","onUpdate:modelValue":r[2]||(r[2]=h=>i.value.catalogCategory=h)},Ie,512),[[O,i.value.catalogCategory]])]),e("div",Se,[Me,f(e("textarea",{class:"form-control",rows:"5",id:"sc-desc","onUpdate:modelValue":r[3]||(r[3]=h=>i.value.catalogDescription=h)},null,512),[[R,i.value.catalogDescription]])]),e("div",Ue,[Ve,e("div",De,[e("div",null,[Te,f(e("input",{type:"number",class:"form-control w-90-per",placeholder:"2","onUpdate:modelValue":r[4]||(r[4]=h=>i.value.recommendedCpu=h)},null,512),[[R,i.value.recommendedCpu]])]),e("div",null,[Ne,f(e("input",{type:"number",class:"form-control w-90-per",placeholder:"4","onUpdate:modelValue":r[5]||(r[5]=h=>i.value.recommendedMemory=h)},null,512),[[R,i.value.recommendedMemory]])]),e("div",null,[Ae,f(e("input",{type:"number",class:"form-control w-90-per",placeholder:"20","onUpdate:modelValue":r[6]||(r[6]=h=>i.value.recommendedDisk=h)},null,512),[[R,i.value.recommendedDisk]])])])]),(s(!0),o(k,null,U(_.value,(h,H)=>(s(),o("div",{class:"row",id:"sc-ref",key:H},[e("div",Re,[e("div",Le,[Ee,f(e("select",{class:"form-select",id:"sc-reference-1","onUpdate:modelValue":A=>h.referenceType=A},Be,8,He),[[O,h.referenceType]])])]),e("div",Oe,[e("div",Fe,[Ge,f(e("input",{type:"text",class:"form-control",id:"sc-ref-value-1",name:"refValue",placeholder:"Ref value","onUpdate:modelValue":A=>h.referenceValue=A},null,8,Pe),[[R,h.referenceValue]])])]),e("div",ze,[e("div",We,[f(e("input",{type:"text",class:"form-control w-80-per",id:"sc-ref-desc-1",name:"refDescription",placeholder:"Ref Description","onUpdate:modelValue":A=>h.referenceDescription=A},null,8,Ye),[[R,h.referenceDescription]]),e("div",Ke,[e("button",{class:"btn btn-primary",onClick:w,style:{"text-align":"center !important"}},[(s(),o("svg",qe,Ze))]),e("button",{class:"btn btn-primary",onClick:A=>T(H)},[(s(),o("svg",tt,st))],8,et)])])])]))),128))]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:b}," Cancel "),e("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:E},[lt,J(" Create New Software catalog ")])])])])]))}}),it=de(nt,[["__scopeId","data-v-b2e70788"]]),ct={class:"modal",id:"softwareCatalogLog",tabindex:"-1"},dt={class:"modal-dialog modal-xl",role:"document"},rt={class:"modal-content"},ut=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),pt={class:"modal-body text-left py-4"},mt={class:"mb-5"},_t={key:0,class:"spinner-border",role:"status"},ht=e("span",{class:"visually-hidden"},"Loading...",-1),vt=[ht],gt={key:0},bt=e("p",{class:"text-secondary"},"No Data",-1),ft=[bt],wt={class:"card mb-3"},yt=["onClick"],kt={class:"card-title"},$t={key:0,class:"card-body"},Ct=["value"],xt=Q({__name:"softwareCatalogLog",props:{jobName:{}},setup(g){X();const D=g,d=u(!1),i=window.location.host.split(":"),_=window.location.protocol+"//"+i[0]+":18084",C=K(()=>D.jobName);q(C,async()=>{d.value=!1,await N()});const x=u([]),N=async()=>{x.value=[];const b=await S.get(_+"/ape/log/"+C.value);x.value=b.data.data,d.value=!0},l=()=>{x.value=[],c.value=1},c=u(1),$=b=>{c.value===b?c.value=0:c.value=b};return(b,B)=>(s(),o("div",ct,[e("div",dt,[e("div",rt,[ut,e("div",pt,[e("h3",mt,[J(" Build Log "),d.value?V("",!0):(s(),o("div",_t,vt))]),e("div",null,[x.value.length<=0?(s(),o("div",gt,ft)):(s(!0),o(k,{key:1},U(x.value,w=>(s(),o("div",{key:w.buildIdx},[e("div",wt,[e("div",{class:"card-header",onClick:T=>$(w.buildIdx),style:{cursor:"pointer"}},[e("h3",kt,v(w.buildIdx),1)],8,yt),c.value===w.buildIdx?(s(),o("div",$t,[e("textarea",{value:w.buildLog,disabled:"",style:{width:"100%"},rows:"20"},null,8,Ct)])):V("",!0)])]))),128))])]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:l}," Cancel ")])])])]))}}),j=g=>(ie("data-v-03c17c42"),g=g(),ce(),g),It={class:"modal",id:"install-form",tabindex:"-1"},St={class:"modal-dialog modal-lg",role:"document"},Mt={class:"modal-content"},Ut={class:"modal-header"},Vt={class:"modal-title"},Dt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},Tt={class:"mb-3"},Nt=j(()=>e("label",{class:"form-label"},"Namespace",-1)),At={key:0,class:"text-muted"},Rt={key:1,class:"text-muted"},Lt=["value"],Et={value:"selectNsId"},Ht={class:"mb-3"},jt=j(()=>e("label",{class:"form-label"},"MCI Name",-1)),Bt={key:0,class:"text-muted"},Ot={key:1,class:"text-muted"},Ft=["disabled"],Gt=["value"],Pt={class:"mb-3"},zt=j(()=>e("label",{class:"form-label"},"VM Name",-1)),Wt=j(()=>e("p",{class:"text-muted"},"Select the virtual machine (VM) within the chosen multi-cloud infrastructure where the application will be deployed",-1)),Yt=["disabled"],Kt=["value"],qt={class:"mb-3"},Jt=j(()=>e("label",{class:"form-label"},"Application",-1)),Qt=j(()=>e("p",{class:"text-muted"},"applications to install (e.g. nginx,tomcat,mariadb,redis,grafana,prometheus)",-1)),Xt={class:"mb-3"},Zt=j(()=>e("label",{class:"form-label"},"Namespace",-1)),ea={key:0,class:"text-muted"},ta={key:1,class:"text-muted"},aa=["value"],oa={value:"selectNsId"},sa={class:"mb-3"},la=j(()=>e("label",{class:"form-label"},"ClusterName",-1)),na={key:0,class:"text-muted"},ia={key:1,class:"text-muted"},ca=["disabled"],da=["value"],ra={class:"mb-3"},ua=j(()=>e("label",{class:"form-label"},"Helm chart",-1)),pa=j(()=>e("p",{class:"text-muted"},"Helm Charts to Install (e.g. nginx,tomcat,mariadb,redis,grafana,prometheus)",-1)),ma={class:"modal-footer",style:{display:"flex","justify-content":"space-between"}},_a=["disabled"],ha=["disabled"],va=Q({__name:"applicationInstallationForm",props:{nsId:{},title:{},applicationName:{},catalogIdx:{}},setup(g){const D=window.location.host.split(":"),d=window.location.protocol+"//"+D[0]+":18084",i=X(),_=g,C=K(()=>_.title),x=K(()=>_.applicationName),N=u(""),l=u(""),c=u(""),$=u([]),b=u([]),B=u([]),w=u(""),T=u(""),L=u([]),E=u(""),p=u(""),r=u(!0);q(x,async()=>{await H()}),q(C,async()=>{N.value=h(_.title),l.value=_.title,await H()}),le(async()=>{await H()});const h=m=>m.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),H=async()=>{p.value=_.applicationName,se.isEmpty(_.nsId)?await A():c.value=_.nsId,l.value==="vm_application_uninstall"||l.value==="helm_application_uninstall"?r.value=!1:r.value=!0},A=async()=>{const m=await S.get(d+"/cbtumblebug/ns");$.value=m.data,$.value.length>0&&(c.value=$.value[0].name,l.value=="vm_application_install"||l.value=="vm_application_uninstall"?await F():await G()),se.isEmpty(c.value)||(l.value=="vm_application_install"||l.value=="vm_application_uninstall"?await F():await G())},F=async()=>{const m=await S.get(d+"/cbtumblebug/ns/"+c.value+"/mci");b.value=m.data,b.value.length>0?(w.value=b.value[0].name,await W()):w.value=""},W=async()=>{const m=await S.get(d+"/cbtumblebug/ns/"+c.value+"/mci/"+w.value);B.value=m.data.vm,b.value.length>0?T.value=B.value[0].name:T.value=""},G=async()=>{const m=await S.get(d+"/cbtumblebug/ns/"+c.value+"/k8scluster");L.value=m.data,L.value.length>0?E.value=L.value[0].name:E.value=""},P=async()=>{await F()},Z=async()=>{await W()},Y=async()=>{await G()},ee=async()=>{if(l.value=="vm_application_install"||l.value=="vm_application_uninstall"){let m="";l.value=="vm_application_install"?m="/ape/vm/install":m="/ape/vm/uninstall";const a=p.value.split(",").map(I=>I.trim()),t={namespace:c.value,mciName:w.value,vmName:T.value,applications:a},n=await S.post(d+m,t);n.data.code==200&&n.data.message?i.success(n.data.message):i.error(n.data.message)}else if(l.value=="helm_application_install"||l.value=="helm_application_uninstall"){let m="";l.value=="helm_application_install"?m="/ape/helm/install":m="/ape/helm/uninstall";const a=p.value.split(",").map(I=>I.trim()),t={namespace:c.value,clusterName:E.value,helmCharts:a},n=await S.post(d+m,t);n.data.code==200&&n.data.message?i.success(n.data.message):i.error(n.data.message)}},te=async()=>{ae().then(m=>{let a=!0,t="";if(!m){l.value==="vm_application_install"||l.value==="vm_application_uninstall"?t="VM":(l.value==="helm_application_install"||l.value==="helm_application_uninstall")&&(t="CLUSTER");const n="Your selected "+t+" has lower specifications than recommended. Would you like to continue with the installation?";a=confirm(n)}a&&(i.success("Please click RUN"),r.value=!1)})},ae=async()=>{let m=!1,a="",t="";return l.value==="vm_application_install"||l.value==="vm_application_uninstall"?(a="/applications/vm/check/application",t="?namespace="+c.value+"&mciName="+w.value+"&vmName="+T.value+"&catalogId="+_.catalogIdx):(l.value==="helm_application_install"||l.value==="helm_application_uninstall")&&(a="/applications/k8s/check/application",t="?namespace="+c.value+"&clusterName="+E.value+"&catalogId="+_.catalogIdx),m=await S.get(d+a+t),m};return(m,a)=>(s(),o("div",It,[e("div",St,[e("div",Mt,[e("div",Ut,[e("h5",Vt,v(l.value=="vm_application_install"?"Application installation for VM":l.value=="vm_application_uninstall"?"Application uninstallation for VM":l.value=="helm_application_install"?"Application installation for k8s":l.value=="helm_application_uninstall"?"Application uninstallation for k8s":"")+" "+v(x.value),1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:H})]),e("div",Dt,[l.value=="vm_application_install"||l.value=="vm_application_uninstall"?(s(),o(k,{key:0},[e("div",Tt,[Nt,l.value=="vm_application_install"?(s(),o("p",At,"Select the namespace where the application will be installed")):l.value=="vm_application_uninstall"?(s(),o("p",Rt,"Select the namespace where the application will be uninstalled")):V("",!0),$.value.length>0?f((s(),o("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":a[0]||(a[0]=t=>c.value=t),onChange:P},[(s(!0),o(k,null,U($.value,t=>(s(),o("option",{value:t.name,key:t.name},v(t.name),9,Lt))),128))],544)),[[O,c.value]]):f((s(),o("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t),onChange:P},[e("option",Et,v(c.value),1)],544)),[[O,c.value]])]),e("div",Ht,[jt,l.value=="vm_application_install"?(s(),o("p",Bt,"Select the multi-cloud infrastructure information where the application will be deployed")):l.value=="vm_application_uninstall"?(s(),o("p",Ot,"Remove the application and associated resources from the multi-cloud infrastructure")):V("",!0),f(e("select",{class:"form-select",id:"mci-name",disabled:c.value=="","onUpdate:modelValue":a[2]||(a[2]=t=>w.value=t),onChange:Z},[(s(!0),o(k,null,U(b.value,t=>(s(),o("option",{value:t.id,key:t.name},v(t.name),9,Gt))),128))],40,Ft),[[O,w.value]])]),e("div",Pt,[zt,Wt,f(e("select",{class:"form-select",id:"mci-name",disabled:w.value=="","onUpdate:modelValue":a[3]||(a[3]=t=>T.value=t)},[(s(!0),o(k,null,U(B.value,t=>(s(),o("option",{value:t.id,key:t.name},v(t.name),9,Kt))),128))],8,Yt),[[O,T.value]])]),e("div",qt,[Jt,Qt,f(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"nginx, tomcat ...","onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t),disabled:""},null,512),[[R,p.value]])])],64)):l.value=="helm_application_install"||l.value=="helm_application_uninstall"?(s(),o(k,{key:1},[e("div",Xt,[Zt,l.value=="helm_application_install"?(s(),o("p",ea,"Select the namespace where the application will be installed")):l.value=="helm_application_uninstall"?(s(),o("p",ta,"Select the namespace where the application will be uninstalled")):V("",!0),$.value.length>0?f((s(),o("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":a[5]||(a[5]=t=>c.value=t),onChange:Y},[(s(!0),o(k,null,U($.value,t=>(s(),o("option",{value:t.name,key:t.name},v(t.name),9,aa))),128))],544)),[[O,c.value]]):f((s(),o("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":a[6]||(a[6]=t=>c.value=t),onChange:P},[e("option",oa,v(c.value),1)],544)),[[O,c.value]])]),e("div",sa,[la,l.value=="helm_application_install"?(s(),o("p",na,"Select the name of the cluster where the application will be deployed")):l.value=="helm_application_uninstall"?(s(),o("p",ia,"Remove the application and associated resources from the multi-cloud infrastructure")):V("",!0),f(e("select",{class:"form-select",id:"mci-name",disabled:c.value=="","onUpdate:modelValue":a[7]||(a[7]=t=>E.value=t)},[(s(!0),o(k,null,U(L.value,t=>(s(),o("option",{value:t.id,key:t.name},v(t.name),9,da))),128))],8,ca),[[O,E.value]])]),e("div",ra,[ua,pa,f(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"nginx, tomcat ...","onUpdate:modelValue":a[8]||(a[8]=t=>p.value=t),disabled:""},null,512),[[R,p.value]])])],64)):V("",!0)]),e("div",ma,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:H}," Cancel "),e("div",null,[l.value!=="vm_application_uninstall"&&l.value!=="helm_application_uninstall"?(s(),o("button",{key:0,class:"btn btn-danger ms-auto",onClick:te,style:{"margin-right":"5px"},disabled:!r.value}," Spec Check ",8,_a)):V("",!0),e("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:ee,disabled:r.value}," RUN ",8,ha)])])])])]))}}),ga=de(va,[["__scopeId","data-v-03c17c42"]]);/*!
* Tabler v1.0.0-beta19 (https://tabler.io)
* @version 1.0.0-beta19
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
*/(function(g){typeof define=="function"&&define.amd?define(g):g()})(function(){var g,D="tablerTheme",d=new Proxy(new URLSearchParams(window.location.search),{get:function(_,C){return _.get(C)}});if(d.theme)localStorage.setItem(D,d.theme),g=d.theme;else{var i=localStorage.getItem(D);g=i||"light"}g==="dark"?document.body.setAttribute("data-bs-theme",g):document.body.removeAttribute("data-bs-theme")});const ba={class:"page",ref:"sofwareCatalog"},fa={class:"page-wrapper"},wa=e("div",{class:"col"},[e("h2",{class:"page-title"},"Software catalog")],-1),ya=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1),ka={class:"page-body"},$a={class:"container-xl"},Ca={class:"row"},xa={class:"col-lg-8"},Ia={class:"card"},Sa={class:"list-group card-list-group",id:"sc-list-group"},Ma={class:"row g-2 align-items-center"},Ua={class:"col-auto fs-3"},Va={class:"col-auto"},Da=["src"],Ta=["onClick"],Na={class:"text-muted"},Aa={class:"col-auto text-muted"},Ra={class:"col-auto lh-1"},La={class:"dropdown"},Ea=z('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),Ha={class:"dropdown-menu dropdown-menu-end"},ja=["onClick"],Ba=["id"],Oa={class:"accordion-body pt-0"},Fa=e("br",null,null,-1),Ga=["innerHTML"],Pa=e("br",null,null,-1),za=["onClick"],Wa=["onClick"],Ya=e("br",null,null,-1),Ka=e("br",null,null,-1),qa=e("strong",null,"관련 정보",-1),Ja=["id"],Qa=["onClick"],Xa=e("strong",null,"TAGS",-1),Za=["id"],eo=e("strong",null,"Recommended Spec",-1),to=["id"],ao={class:"btn btn-sm",style:{"margin-right":"5px"}},oo={class:"btn btn-sm",style:{"margin-right":"5px"}},so={class:"btn btn-sm",style:{"margin-right":"5px"}},lo={class:"col-lg-4"},no=e("div",null,[e("br")],-1),io=e("h3",{class:"mb-3"},"dockerHub search",-1),co={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},ro={class:"row row-cards",id:"resultDockerHubSearch"},uo={class:"card"},po={class:"row row-0"},mo={class:"col-auto"},_o=["src"],ho={class:"col"},vo={class:"card-body"},go={href:"",target:"_blank"},bo={class:"text-muted"},fo=z('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),wo=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),yo=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),ko=e("div",{style:{"margin-bottom":"20px"}}," ",-1),$o=e("h3",{class:"mb-3"},"artifactHub search",-1),Co={key:1,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},xo={class:"row row-cards",id:"resultArtifactHubSearch"},Io={class:"card"},So={class:"row row-0"},Mo=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1),Uo={class:"col"},Vo={class:"card-body"},Do={href:"",target:"_blank"},To={class:"text-muted"},No=z('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),Ao=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),Ro=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),jo=Q({__name:"SoftwareCatalogList",setup(g){const D=X(),d=u([]),i=u(""),_=window.location.host.split(":"),C=window.location.protocol+"//"+_[0]+":18084",x=u([]),N=u([]),l=u(0),c=u(""),$=u("new"),b=u(""),B=u(""),w=u(""),T=u(0);le(async()=>{i.value="",window.addEventListener("message",async function(a){const t=a.data;t.projectInfo&&(b.value=t.projectInfo.ns_id)}),await L()});const L=async()=>{try{const a=await S.get(C+"/catalog/software/?title="+i.value);se.forEach(a.data,function(t){t.catalogIcon=C+t.catalogIcon,t.refData=E(t.catalogRefData),t.isShow=!1}),d.value=a.data}catch(a){console.log(a),D.error("데이터를 가져올 수 없습니다.")}},E=a=>a.reduce((t,n)=>(t[n.referenceType]||(t[n.referenceType]=[]),t[n.referenceType].push(n),t),{}),p=async a=>{a.keyCode==13&&(await L(),await r(),await h())},r=async()=>{try{const a=await S.get(C+"/search/dockerhub/"+i.value);for(let t=0;t<3;t++)x.value.push(a.data.data.results[t])}catch(a){console.log(a),D.error("데이터를 가져올 수 없습니다.")}},h=async()=>{try{const a=await S.get(C+"/search/artifacthub/"+i.value);for(let t=0;t<3;t++)N.value.push(a.data.data.packages[t])}catch(a){console.log(a),D.error("데이터를 가져올 수 없습니다.")}},H=async a=>{d.value.forEach(t=>{t.isShow=!1}),d.value[a].isShow=!d.value[a].isShow,w.value=d.value[a].catalogTitle,T.value=d.value[a].catalogIdx},A=(a,t)=>Object.prototype.hasOwnProperty.call(a,t),F=a=>{window.open(a)},W=a=>{$.value="update",l.value=a},G=()=>{$.value="new",l.value=0},P=()=>{let a=`https://hub.docker.com/search?q=${i.value}`;window.open(a,"_blank")},Z=()=>{let a=`https://artifacthub.io/packages/search?ts_query_web=${i.value}&sort=relevance&page=1`;window.open(a,"_blank")},Y=(a,t)=>t.includes(a),ee=a=>a.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),te=a=>{c.value=a},ae=a=>{B.value=a},m=a=>a.replace(/\\n|\n/g,"<br/>");return(a,t)=>(s(),o("div",ba,[e("div",fa,[e("div",{class:"page-header d-print-none"},[e("div",{class:"container-xl"},[e("div",{class:"row g-2 align-items-center"},[wa,e("div",{class:"col-auto ms-auto"},[e("div",{class:"btn-list"},[e("a",{class:"btn btn-primary d-none d-sm-inline-block",onClick:G,"data-bs-toggle":"modal","data-bs-target":"#modal-form"},[ya,J(" New ")])])])])])]),e("div",ka,[e("div",$a,[e("div",Ca,[e("div",xa,[e("div",Ia,[e("div",Sa,[(s(!0),o(k,null,U(d.value,(n,I)=>(s(),o("div",{class:"list-group-item",key:I},[e("div",Ma,[e("div",Ua,v(I+1),1),e("div",Va,[e("img",{src:n.catalogIcon,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,Da)]),e("div",{class:"col",onClick:M=>H(I)},[J(v(n.catalogTitle)+" ",1),e("div",Na,v(n.catalogSummary),1)],8,Ta),e("div",Aa,v(n.catalogCategory),1),e("div",Ra,[e("div",La,[Ea,e("div",Ha,[e("a",{class:"dropdown-item",onClick:M=>W(n.catalogIdx),"data-bs-toggle":"modal","data-bs-target":"#modal-form"},"Update",8,ja)])])]),e("div",{id:"accordion_"+n.catalogIdx,class:"accordion-collapse collapse",style:re([n.isShow?{display:"block"}:{display:"none"}])},[e("div",Oa,[Fa,e("div",{style:{"white-space":"pre-wrap"},innerHTML:m(n.catalogDescription)},null,8,Ga),e("div",null,[Pa,(s(!0),o(k,null,U(n.refData.workflow,M=>(s(),o("div",{class:"btn-list",style:{width:"70%"},key:M.catalogRefIdx},[e("a",{class:ue(["btn",{"btn-outline-primary":Y("install",M.referenceValue),"btn-outline-danger":Y("uninstall",M.referenceValue)}]),style:{"margin-bottom":"10px"},onClick:ne=>ae(M.referenceValue),"data-bs-toggle":"modal","data-bs-target":"#install-form"},v(ee(M.referenceValue)),11,za),e("button",{class:"btn btn-primary",style:{"text-align":"center !important","margin-bottom":"10px"},onClick:ne=>te(M.referenceValue),id:"log-btn","data-bs-toggle":"modal","data-bs-target":"#softwareCatalogLog"},"  LOG  ",8,Wa)]))),128)),Ya,Ka,qa,e("ul",{id:`${I}-entity-ul`},[A(n.refData,"HOMEPAGE")?(s(!0),o(k,{key:0},U(n.refData.HOMEPAGE,M=>(s(),o("li",null,[e("a",{onClick:ne=>F(M.referenceValue),class:"btn"},v(M.referenceValue),9,Qa)]))),256)):V("",!0)],8,Ja),Xa,e("ul",{id:`${I}-tag-ul`},[A(n.refData,"TAG")?(s(!0),o(k,{key:0},U(n.refData.TAG,M=>(s(),o("span",null,"#"+v(M.referenceValue)+"  ",1))),256)):V("",!0)],8,Za),eo,e("ul",{id:`${I}-tag-ul`},[n.recommendedCpu&&n.recommendedMemory&&n.recommendedDisk?(s(),o(k,{key:0},[e("button",ao," CPU : "+v(n.recommendedCpu),1),e("button",oo," MEMORY : "+v(n.recommendedMemory),1),e("button",so," DISK : "+v(n.recommendedDisk),1)],64)):V("",!0)],8,to)])])],12,Ba)])]))),128))])])]),e("div",lo,[f(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:p,"onUpdate:modelValue":t[0]||(t[0]=n=>i.value=n),id:"inputCatalogSearch"},null,544),[[R,i.value]]),no,io,x.value.length==0?(s(),o("div",co,"검색된 관련 ContainerImage가 없습니다.")):V("",!0),e("div",ro,[(s(!0),o(k,null,U(x.value,(n,I)=>(s(),o("div",{class:"col-md-6 col-lg-12",key:I},[e("div",uo,[e("div",po,[e("div",mo,[e("img",{src:n.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,_o)]),e("div",ho,[e("div",vo,[e("a",go,v(n.name),1),e("div",bo,v(n.short_description.length>30?n.short_description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[fo,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:P}," 해당 페이지로 이동 "),wo,yo])])])])])]))),128))]),ko,$o,N.value.length==0?(s(),o("div",Co,"검색된 관련 HelmChart가 없습니다.")):V("",!0),e("div",xo,[(s(!0),o(k,null,U(N.value,(n,I)=>(s(),o("div",{class:"col-md-6 col-lg-12",key:I},[e("div",Io,[e("div",So,[Mo,e("div",Uo,[e("div",Vo,[e("a",Do,v(n.name),1),e("div",To,v(n.description.length>30?n.description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[No,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:Z}," 해당 페이지로 이동 "),Ao,Ro])])])])])]))),128))])])])])])]),oe(it,{mode:$.value,"catalog-idx":l.value,onGetList:L},null,8,["mode","catalog-idx"]),oe(xt,{"job-name":c.value},null,8,["job-name"]),oe(ga,{"ns-id":b.value,title:B.value,"application-name":w.value,"catalog-idx":T.value},null,8,["ns-id","title","application-name","catalog-idx"])],512))}});export{jo as default};
