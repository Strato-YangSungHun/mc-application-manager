import{c as B,I as j}from"./IconPlus-DRlolo8O.js";import{r as ot,a as st,g as at,b as lt,c as nt,u as it,d as dt,s as rt,e as ct,I as W,A as ut}from"./softwareCatalogForm.vue_vue_type_style_index_0_scoped_a2f16b76_lang--X0lRRcK.js";import{_ as pt}from"./Tabulator.vue_vue_type_style_index_0_lang-BFJXJhHv.js";import{d as K,u as Y,c as L,r as v,a as p,b as t,p as M,j as E,t as C,e as h,g as w,h as m,o as Q,F as I,i as y,q as T,w as X,v as Z,k as tt,s as mt,f as H,n as J,x as vt,y as bt}from"./index-BvkXFvq4.js";import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as gt}from"./lodash-Y7ax5pzP.js";import{_ as ft}from"./RepositoryList.vue_vue_type_script_setup_true_lang-DR7gUPtT.js";import"./request-Dy10eOe8.js";import"./bootstrap.esm-BdjZPN0g.js";import"./repository-BrkBCqVC.js";/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yt=B("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _t=B("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt=B("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var et=B("outline","minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kt=B("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);const $t={class:"modal",id:"action-confirm",tabindex:"-1"},St={class:"modal-dialog modal-lg",role:"document"},Ct={class:"modal-content"},Rt={class:"modal-header"},Dt={class:"modal-title"},Tt={key:0},At={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},Ut={class:"mb-3"},It={class:"modal-footer d-flex justify-content-between"},Mt=K({__name:"applicationActionConfirm",props:{title:{},applicationStatusId:{},type:{},applicationName:{}},emits:["getApplicationsStatusList"],setup(P,{emit:A}){const r=Y(),_=P,R=A,k=L(()=>_.title),c=L(()=>_.applicationStatusId),b=L(()=>_.type),$=v(""),s=()=>{$.value=""},g=async()=>{s();let f;const u={operation:k.value,applicationStatusId:c.value,reason:$.value};if(b.value==="VM"){const{data:U}=await ot(u);f=U}else if(b.value==="K8S"){const{data:U}=await st(u);f=U}R("getApplicationsStatusList"),f?r.success(`${k.value} Action SUCCESS`):r.error(`${k.value} Action FAIL`)};return(f,u)=>(m(),p("div",$t,[t("div",St,[t("div",Ct,[t("div",Rt,[t("h5",Dt,[M(C(f.applicationName)+" "+C(k.value)+" ",1),b.value?(m(),p("span",Tt,"("+C(b.value)+")",1)):E("",!0)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s})]),t("div",At,[t("div",Ut,[u[1]||(u[1]=t("label",{class:"form-label"},"Reason",-1)),u[2]||(u[2]=t("p",{class:"text-muted"}," Please enter a reason ",-1)),h(t("textarea",{class:"form-control",rows:"10",placeholder:"Reason","onUpdate:modelValue":u[0]||(u[0]=U=>$.value=U)},null,512),[[w,$.value]])])]),t("div",It,[t("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:s}," Cancel "),t("div",null,[t("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:g},C(k.value),1)])])])])]))}}),xt={class:"card card-flush w-100"},Vt={class:"page-header page-wrapper"},Nt={class:"row align-items-center"},Et={class:"card-header d-flex",style:{"justify-content":"space-between"}},Lt={class:"btn-list"},Pt={class:"me-2"},Ht=K({__name:"applicationStatusList",setup(P){const A=Y(),r=v([]),_=v([]),R=v(""),k=v(""),c=v(0),b=v(""),$=v("");Q(async()=>{f(),await s()});const s=async()=>{try{g();const{data:i}=await at();i?r.value=i:r.value=[]}catch(i){console.log(i),A.error("Unable to retrieve data")}},g=()=>{r.value=[];const i=new Date,d={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};R.value=i.toLocaleDateString("ko-KR",d)},f=()=>{_.value=[{title:"Type",field:"deploymentType",width:"8%"},{title:"Application",field:"applicationName",width:"25%"},{title:"Infra",width:"12%",formatter:U},{title:"Status",width:"12%",formatter:F},{title:"CheckedAt",field:"checkedAt",width:"18%"},{title:"Action",width:"25%",formatter:O,cellClick:async function(i,d){const x=i.target,V=x==null?void 0:x.getAttribute("id"),G=d.getRow().getData().id,q=d.getRow().getData().deploymentType,N=d.getRow().getData().applicationName,n={operation:"",applicationStatusId:G,deploymentType:q,applicationName:N};V==="restart-btn"?(n.operation="RESTART",await u(n)):V==="stop-btn"?(n.operation="STOP",await u(n)):V==="uninstall-btn"&&(n.operation="UNINSTALL",await u(n))}}]},u=async i=>{k.value=i.operation,c.value=i.applicationStatusId,b.value=i.deploymentType,$.value=i.applicationName},U=i=>`
    <div>
      <p>
        ${i.getRow().getData().vmName?i.getRow().getData().vmName:i.getRow().getData().clusterName?i.getRow().getData().clusterName:"-"}
      <p>
    </div>
  `,F=i=>{const d=i.getRow().getData().status;return d==="RUNNING"?`
      <div>
        <span class="status status-green">  
          <span class="status-dot"></span>
            ${d}
        </span>
      </div>`:d==="RESTART"||d==="IN_PROGRESS"?`
    <div>
      <span class="status status-primary">  
        <span class="status-dot"></span>
          ${d}
      </span>
    </div>`:d==="NOT_FOUND"?`
    <div>
      <span class="status status-yellow">  
        <span class="status-dot"></span>
          ${d}
      </span>
    </div>`:`
  <div>
    <span class="status status-red">  
      <span class="status-dot"></span>
        ${d}
    </span>
  </div>`},O=()=>`
  <div>
    <button
      class='btn btn-ghost-primary d-none d-sm-inline-block'
      id='restart-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Restart
    </button>
    <button
      class='btn btn-ghost-warning d-none d-sm-inline-block'
      id='stop-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Stop
    </button>
    <button
      class='btn btn-ghost-danger d-none d-sm-inline-block'
      id='uninstall-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Uninstall
    </button>
  </div>`;return(i,d)=>(m(),p(I,null,[t("div",xt,[t("div",Vt,[t("div",Nt,[t("div",Et,[d[1]||(d[1]=t("h3",{class:"card-title"},[t("strong",null,"Apps Status")],-1)),t("div",Lt,[t("span",Pt,C(R.value),1),t("a",{class:"btn btn-outline-primary d-none d-sm-inline-block",onClick:s},[y(T(kt),{class:"icon icon-tabler",size:20,"stroke-width":"1"}),d[0]||(d[0]=M(" Refresh "))])])])])]),y(pt,{columns:_.value,"table-data":r.value},null,8,["columns","table-data"])]),y(Mt,{title:k.value,applicationStatusId:c.value,type:b.value,applicationName:$.value,onGetApplicationsStatusList:s},null,8,["title","applicationStatusId","type","applicationName"])],64))}}),Ft={class:"modal fade",id:"modal-form",tabindex:"-1"},Ot={class:"modal-dialog modal-lg",role:"document"},Gt={class:"modal-content"},qt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},zt={class:"mb-3"},Bt={class:"mb-3"},Kt={class:"mb-3"},Yt={class:"mb-3"},jt={class:"mb-5"},Wt={class:"accordion",id:"accordion"},Jt={class:"accordion-item"},Qt={id:"recommendedSpec",class:"accordion-collapse collapse",show:"","aria-labelledby":"headingRecommendSpec","data-bs-parent":"#accordion"},Xt={class:"accordion-body"},Zt={class:"d-flex justify-content-between"},te={class:"accordion-item"},ee={id:"minimumspec",class:"accordion-collapse collapse",show:"","aria-labelledby":"headingMinimumSpec","data-bs-parent":"#accordion"},oe={class:"accordion-body"},se={class:"d-flex justify-content-between"},ae={class:"accordion-item"},le={id:"port",class:"accordion-collapse collapse",show:"","aria-labelledby":"headingPort","data-bs-parent":"#accordion"},ne={class:"accordion-body"},ie={class:"d-flex justify-content-between mb-3"},de={class:"btn-list"},re={class:"accordion-item"},ce={class:"accordion-header",id:"headingHpa"},ue={class:"accordion-button d-inline",type:"button","data-bs-toggle":"collapse","data-bs-target":"#hpa","aria-expanded":"true","aria-controls":"hpa"},pe=["disabled"],me={id:"hpa",class:"accordion-collapse collapse","aria-labelledby":"headingHpa","data-bs-parent":"#accordion"},ve={class:"accordion-body"},be={class:"d-flex justify-content-between"},he=["disabled"],ge=["disabled"],fe=["disabled"],ye=["disabled"],_e={class:"col-lg-6"},we={class:"mb-3"},ke=["onUpdate:modelValue"],$e={class:"col-lg-6"},Se={class:"mb-3"},Ce=["onUpdate:modelValue"],Re={class:"mb-3"},De={class:"input-form"},Te=["onUpdate:modelValue"],Ae={class:"btn-list"},Ue=["onClick"],Ie={class:"modal-footer"},Me={key:0},xe={key:1},Ve=K({__name:"softwareCatalogForm",props:{mode:{},catalogIdx:{},repositoryApplicationInfo:{},repositoryName:{}},emits:["get-list"],setup(P,{emit:A}){const r=Y(),_=P,R=A,k=L(()=>_.catalogIdx),c=L(()=>_.mode),b=L(()=>_.repositoryApplicationInfo),$=L(()=>_.repositoryName),s=v({}),g=v([]),f=v(!1);X(()=>k.value,async()=>{await u()},{deep:!0}),X(()=>b.value,async()=>{await u()},{deep:!0});const u=async()=>{c.value==="update"?await i():($.value==="dockerhub"?U(b.value,$.value):$.value==="artifacthub"?F(b.value,$.value):O(),g.value=[],g.value.push({refId:0,refValue:"",refDesc:"",refType:""}))},U=(n,e)=>{s.value={title:n.name,description:n.short_description,category:"",summary:n.short_description,sourceType:e,logoUrlLarge:n.logo_url.large,logoUrlSmall:n.logo_url.small,minCpu:0,minMemory:0,minDisk:0,recommendedCpu:0,recommendedMemory:0,recommendedDisk:0,cpuThreshold:0,memoryThreshold:0,minReplicas:0,maxReplicas:0,catalogRefData:[],hpaEnabled:!1,defaultPort:0,packageInfo:{packageType:"DOCKER",packageName:n.id,packageVersion:"latest",repositoryUrl:"https://hub.docker.com/_/"+n.name,dockerImageId:"",dockerPublisher:n.publisher.name,dockerCreatedAt:N(n.created_at),dockerUpdatedAt:N(n.updated_at),dockerShortDescription:n.short_description,dockerSource:n.source}}},F=(n,e)=>{s.value={title:n.name,description:n.description,category:"",summary:"",sourceType:e,logoUrlLarge:"",logoUrlSmall:"",minCpu:0,minMemory:0,minDisk:0,recommendedCpu:0,recommendedMemory:0,recommendedDisk:0,cpuThreshold:0,memoryThreshold:0,minReplicas:0,maxReplicas:0,catalogRefData:[],hpaEnabled:!1,defaultPort:0,helmChart:{id:0,catalogId:0,chartName:"string",chartVersion:"string",chartRepositoryUrl:"string",valuesFile:"string",packageId:"string",normalizedName:"string",hasValuesSchema:!0,repositoryName:"string",repositoryOfficial:!0,repositoryDisplayName:"string"}}},O=()=>{s.value={title:"",description:"",category:"",summary:"",sourceType:"",logoUrlLarge:"",logoUrlSmall:"",minCpu:0,minMemory:0,minDisk:0,recommendedCpu:0,recommendedMemory:0,recommendedDisk:0,cpuThreshold:0,memoryThreshold:0,minReplicas:0,maxReplicas:0,defaultPort:0,catalogRefData:[],hpaEnabled:!1}},i=async()=>{try{await lt(Number(k.value)).then(({data:n})=>{s.value=n,s.value.catalogRefs.length===0&&(s.value.catalogRefs=[{refId:0,refValue:"",refDesc:"",refType:""}]),s.value.hpaEnabled&&(f.value=!0),n.catalogRefs.forEach(e=>{e.refType!==null&&(e.refType=e.refType.toUpperCase())}),g.value=n.catalogRefs})}catch(n){console.log(n),r.error("Unable to fetch data.")}},d=()=>{s.value.defaultPort.push("")},x=n=>{s.value.defaultPort.length!==1&&s.value.defaultPort.splice(n,1)},V=()=>{g.value.push({refId:0,refValue:"",refDesc:"",refType:"URL"})},G=n=>{g.value.length!==1&&g.value.splice(n,1)},q=async()=>{f.value&&(s.value.hpaEnabled=!0),s.value.catalogRefData=g.value,c.value=="new"?await nt(s.value).then(({data:n})=>{n?n===null?(r.error("Registration Failed"),u()):(r.success("Registration Success"),R("get-list")):(r.error("Regist Failed"),u())}):await it(s.value).then(({data:n})=>{n?n===null?(r.error("Update Failed"),u()):(r.success("Update Success"),R("get-list")):(r.error("Update Failed"),u())})},N=n=>{const e=new Date(n),o=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),S=String(e.getHours()).padStart(2,"0"),D=String(e.getMinutes()).padStart(2,"0"),z=String(e.getSeconds()).padStart(2,"0");return`${o}-${l}-${a} ${S}:${D}:${z}`};return(n,e)=>(m(),p("div",Ft,[t("div",Ot,[t("div",Gt,[e[43]||(e[43]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"}," Create New Software catalog "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",qt,[t("div",zt,[e[17]||(e[17]=t("label",{class:"form-label"},"Title",-1)),h(t("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"Application name","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.title=o),disabled:""},null,512),[[w,s.value.title]])]),t("div",Bt,[e[18]||(e[18]=t("label",{class:"form-label"},"Summary",-1)),h(t("input",{type:"text",class:"form-control",id:"sc-summary",name:"summary",placeholder:"Application summary","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.summary=o)},null,512),[[w,s.value.summary]])]),t("div",Kt,[e[20]||(e[20]=t("label",{class:"form-label"},"Category",-1)),h(t("select",{class:"form-select",id:"sc-category","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.category=o)},e[19]||(e[19]=[tt('<option value="SERVER" selected data-v-a2f16b76>SERVER</option><option value="WAS" data-v-a2f16b76>WAS</option><option value="DB" data-v-a2f16b76>DB</option><option value="UTIL" data-v-a2f16b76>UTIL</option><option value="OBSERVABILITY" data-v-a2f16b76>OBSERVABILITY</option>',5)]),512),[[Z,s.value.category]])]),t("div",Yt,[e[21]||(e[21]=t("label",{class:"form-label"},"Description",-1)),h(t("textarea",{class:"form-control",rows:"5",id:"sc-desc","onUpdate:modelValue":e[3]||(e[3]=o=>s.value.description=o)},null,512),[[w,s.value.description]])]),e[42]||(e[42]=t("label",{class:"form-label"},"Spec",-1)),t("div",jt,[t("div",Wt,[t("div",Jt,[e[25]||(e[25]=t("h2",{class:"accordion-header",id:"headingRecommendSpec"},[t("button",{class:"accordion-button required",type:"button","data-bs-toggle":"collapse","data-bs-target":"#recommendedSpec","aria-expanded":"true","aria-controls":"recommendedSpec"}," Recommended Spec ")],-1)),t("div",Qt,[t("div",Xt,[t("div",Zt,[t("div",null,[e[22]||(e[22]=t("label",{class:"form-label required"},"CPU",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"2","onUpdate:modelValue":e[4]||(e[4]=o=>s.value.recommendedCpu=o)},null,512),[[w,s.value.recommendedCpu]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"form-label required"},"MEMORY",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"4","onUpdate:modelValue":e[5]||(e[5]=o=>s.value.recommendedMemory=o)},null,512),[[w,s.value.recommendedMemory]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"form-label required"},"DISK",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"20","onUpdate:modelValue":e[6]||(e[6]=o=>s.value.recommendedDisk=o)},null,512),[[w,s.value.recommendedDisk]])])])])])]),t("div",te,[e[29]||(e[29]=t("h2",{class:"accordion-header",id:"headingMinimumSpec"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#minimumspec","aria-expanded":"true","aria-controls":"minimumspec"}," Minimum Spec ")],-1)),t("div",ee,[t("div",oe,[t("div",se,[t("div",null,[e[26]||(e[26]=t("label",{class:"form-label required"},"CPU",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"2","onUpdate:modelValue":e[7]||(e[7]=o=>s.value.minCpu=o)},null,512),[[w,s.value.minCpu]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"form-label required"},"MEMORY",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"4","onUpdate:modelValue":e[8]||(e[8]=o=>s.value.minMemory=o)},null,512),[[w,s.value.minMemory]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"form-label required"},"DISK",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"20","onUpdate:modelValue":e[9]||(e[9]=o=>s.value.minDisk=o)},null,512),[[w,s.value.minDisk]])])])])])]),t("div",ae,[e[31]||(e[31]=t("h2",{class:"accordion-header",id:"headingPort"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#port","aria-expanded":"true","aria-controls":"port"}," Port ")],-1)),t("div",le,[t("div",ne,[t("div",null,[e[30]||(e[30]=t("label",{class:"form-label required"},"Port",-1)),t("div",ie,[h(t("input",{type:"number",class:"form-control w-80-per",placeholder:"8080","onUpdate:modelValue":e[10]||(e[10]=o=>s.value.defaultPort=o)},null,512),[[w,s.value.defaultPort]]),t("div",de,[t("button",{class:"btn btn-primary",disabled:"",onClick:d},[y(T(j),{class:"icon icon-tabler icon-tabler-plus m-0",size:"24"})]),t("button",{class:"btn btn-primary",disabled:"",onClick:e[11]||(e[11]=o=>x(0))},[y(T(et),{class:"icon icon-tabler icon-tabler-plus m-0",size:"24"})])])])])])])]),t("div",re,[t("h2",ce,[t("button",ue,[e[32]||(e[32]=M(" HPA (For K8S) ")),h(t("input",{class:"form-check-input ms-1 mt-1",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=o=>f.value=o),disabled:c.value==="update"},null,8,pe),[[mt,f.value]])])]),t("div",me,[t("div",ve,[t("div",be,[t("div",null,[e[33]||(e[33]=t("label",{class:"form-label required"},"minReplicas",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"1","onUpdate:modelValue":e[13]||(e[13]=o=>s.value.minReplicas=o),disabled:!f.value},null,8,he),[[w,s.value.minReplicas]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"form-label required"},"maxReplicas",-1)),h(t("input",{type:"number",class:"form-control w-90-per",placeholder:"10","onUpdate:modelValue":e[14]||(e[14]=o=>s.value.maxReplicas=o),disabled:!f.value},null,8,ge),[[w,s.value.maxReplicas]])]),t("div",null,[e[35]||(e[35]=t("div",null,[t("label",{class:"form-check-label"},"CPU (%)")],-1)),h(t("input",{type:"number",class:"form-control w-80-per d-inline",placeholder:"60","onUpdate:modelValue":e[15]||(e[15]=o=>s.value.cpuThreshold=o),disabled:!f.value},null,8,fe),[[w,s.value.cpuThreshold]]),e[36]||(e[36]=M(" % "))]),t("div",null,[e[37]||(e[37]=t("div",null,[t("label",{class:"form-check-label"},"MEMORY (%)")],-1)),h(t("input",{type:"number",class:"form-control w-80-per d-inline",placeholder:"80","onUpdate:modelValue":e[16]||(e[16]=o=>s.value.memoryThreshold=o),disabled:!f.value},null,8,ye),[[w,s.value.memoryThreshold]]),e[38]||(e[38]=M(" % "))])])])])])])]),(m(!0),p(I,null,H(g.value,(o,l)=>(m(),p("div",{class:"row",id:"sc-ref",key:l},[t("div",_e,[t("div",we,[e[40]||(e[40]=t("label",{class:"form-label"},"Reference",-1)),h(t("select",{class:"form-select",id:"sc-reference-1","onUpdate:modelValue":a=>o.refType=a},e[39]||(e[39]=[tt('<option value="URL" data-v-a2f16b76>URL</option><option value="MANIFEST" data-v-a2f16b76>MANIFEST</option><option value="WORKFLOW" data-v-a2f16b76>WORKFLOW</option><option value="IMAGE" data-v-a2f16b76>IMAGE</option><option value="HOMEPAGE" data-v-a2f16b76>HOMEPAGE</option><option value="TAG" data-v-a2f16b76>TAG</option><option value="ETC" data-v-a2f16b76>ETC</option>',7)]),8,ke),[[Z,o.refType]])])]),t("div",$e,[t("div",Se,[e[41]||(e[41]=t("label",{class:"form-label"}," ",-1)),h(t("input",{type:"text",class:"form-control",id:"sc-ref-value-1",name:"refValue",placeholder:"Ref value","onUpdate:modelValue":a=>o.refValue=a},null,8,Ce),[[w,o.refValue]])])]),t("div",Re,[t("div",De,[h(t("input",{type:"text",class:"form-control w-80-per",id:"sc-ref-desc-1",name:"refDescription",placeholder:"Ref Description","onUpdate:modelValue":a=>o.refDesc=a},null,8,Te),[[w,o.refDesc]]),t("div",Ae,[t("button",{class:"btn btn-primary",onClick:V},[y(T(j),{class:"icon icon-tabler icon-tabler-plus",size:"24",style:{margin:"0px !important"}})]),t("button",{class:"btn btn-primary",onClick:a=>G(l)},[y(T(et),{class:"icon icon-tabler icon-tabler-plus",size:"24",style:{margin:"0px !important"}})],8,Ue)])])])]))),128))]),t("div",Ie,[t("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:u}," Cancel "),t("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:q},[y(T(j),{class:"icon icon-tabler icon-tabler-plus",size:"24","stroke-width":"2"}),c.value==="new"?(m(),p("span",Me,"Create New Software catalog")):c.value==="update"?(m(),p("span",xe,"Update Software catalog")):E("",!0)])])])])]))}}),Ne=ht(Ve,[["__scopeId","data-v-a2f16b76"]]),Ee={ref:"sofwareCatalog"},Le={class:"row"},Pe={class:"col-lg-9"},He={class:"card"},Fe={class:"list-group card-list-group",id:"sc-list-group"},Oe={class:"row g-2 align-items-center"},Ge={class:"col-auto me-3"},qe=["src"],ze=["onClick"],Be={class:"text-muted"},Ke={class:"col-auto text-muted"},Ye={class:"col-auto lh-1"},je={class:"dropdown"},We=["onClick"],Je=["id"],Qe=["onClick"],Xe=["id"],Ze={class:"accordion-body pt-0"},to=["innerHTML"],eo=["id"],oo=["onClick"],so=["id"],ao=["id"],lo={class:"btn btn-sm",style:{"margin-right":"5px"}},no={class:"btn btn-sm",style:{"margin-right":"5px"}},io={class:"btn btn-sm",style:{"margin-right":"5px"}},ro={class:"col-lg-3"},co={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},uo={class:"row row-cards",id:"resultDockerHubSearch"},po={class:"card"},mo={class:"row row-0"},vo={class:"col-auto"},bo=["src"],ho={class:"col"},go={class:"card-body"},fo={href:"",target:"_blank"},yo={class:"text-muted"},_o={class:"col-auto lh-1"},wo={class:"dropdown"},ko=["onClick"],$o=["id"],So=["onClick"],Co={class:"mt-5"},Ro={key:0,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},Do={class:"row row-cards",id:"resultArtifactHubSearch"},To={class:"card"},Ao={class:"row row-0"},Uo={class:"col"},Io={class:"card-body"},Mo={href:"",target:"_blank"},xo={class:"text-muted"},Vo={class:"col-auto lh-1"},No={class:"dropdown"},Eo=["onClick"],Lo=["id"],Po=["onClick"],Ho=K({__name:"softwareCatalogList",setup(P){const A=Y(),r=v([]),_=v(null),R=v("new"),k=v({}),c=v(""),b=v(""),$=v([]),s=v([]),g=v(""),f=o=>{g.value===o?g.value="":g.value=o};Q(async()=>{b.value="",u(),document.addEventListener("click",o=>{o.target.closest(".dropdown")||(g.value="")})});const u=async()=>{try{await dt(b.value).then(({data:o})=>{gt.forEach(o,function(l){l.refData=U(l.catalogRefs),l.isShow=!1}),r.value=o})}catch(o){console.log(o),A.error("Unable to retrieve data.")}},U=o=>o.reduce((l,a)=>(l[a.refType]||(l[a.refType]=[]),l[a.refType].push(a),l),{}),F=async o=>{o.keyCode==13&&(await O(),await i())},O=async()=>{$.value=[];try{const{data:o}=await rt(b.value);for(let l=0;l<3;l++)$.value.push(o.results[l])}catch(o){console.log(o),A.error("Unable to retrieve data.")}},i=async()=>{s.value=[];try{const{data:o}=await ct(b.value);for(let l=0;l<3;l++)s.value.push(o.packages[l])}catch(o){console.log(o),A.error("Unable to retrieve data.")}},d=(o,l)=>{R.value="new",_.value=0,k.value=l,c.value=o},x=o=>{R.value="update",_.value=o},V=()=>{let o=`https://hub.docker.com/search?q=${b.value}`;window.open(o,"_blank")},G=()=>{let o=`https://artifacthub.io/packages/search?ts_query_web=${b.value}&sort=relevance&page=1`;window.open(o,"_blank")},q=async o=>{r.value[o].isShow=!r.value[o].isShow},N=(o,l)=>Object.prototype.hasOwnProperty.call(o,l),n=o=>{window.open(o)},e=o=>o.replace(/\\n|\n/g,"<br/>");return(o,l)=>(m(),p(I,null,[t("div",Ee,[l[9]||(l[9]=t("h2",null,"Catalog",-1)),t("div",Le,[t("div",Pe,[t("div",He,[t("div",Fe,[(m(!0),p(I,null,H(r.value,(a,S)=>(m(),p("div",{class:"list-group-item",key:S},[t("div",Oe,[t("div",Ge,[t("img",{src:a.logoUrlLarge,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,qe)]),t("div",{class:"col",onClick:D=>q(S)},[M(C(a.title)+" ",1),t("div",Be,C(a.summary),1)],8,ze),t("div",Ke,C(a.category),1),t("div",Ye,[t("div",je,[t("a",{href:"#",class:"link-secondary",onClick:D=>f(`dropdown-${a.id}`)},[y(T(W),{class:"icon",width:"24",height:"24","stroke-width":"2"})],8,We),t("div",{id:`dropdown-${a.id}`,class:J(["dropdown-menu dropdown-menu-end",{show:g.value===`dropdown-${a.id}`}])},[t("a",{class:"dropdown-item",onClick:D=>x(a.id),"data-bs-toggle":"modal","data-bs-target":"#modal-form"}," Update ",8,Qe)],10,Je)])]),t("div",{id:"accordion_"+a.id,class:"accordion-collapse collapse",style:vt([a.isShow?{display:"block"}:{display:"none"}])},[t("div",Ze,[t("div",{class:"mt-3 mb-5",innerHTML:e(a.description)},null,8,to),t("div",null,[l[1]||(l[1]=t("strong",null,"Ref Information",-1)),t("ul",{id:`${S}-entity-ul`},[N(a.refData,"HOMEPAGE")?(m(!0),p(I,{key:0},H(a.refData.HOMEPAGE,(D,z)=>(m(),p("li",{key:z},[t("a",{class:"btn",onClick:cs=>n(D.refValue)},C(D.refValue),9,oo)]))),128)):E("",!0)],8,eo),l[2]||(l[2]=t("strong",null,"TAGS",-1)),t("ul",{id:`${S}-tag-ul`},[N(a.refData,"TAG")?(m(!0),p(I,{key:0},H(a.refData.TAG,(D,z)=>(m(),p("span",{key:z},"#"+C(D.refValue)+"  ",1))),128)):E("",!0)],8,so),l[3]||(l[3]=t("strong",null,"Recommended Spec",-1)),t("ul",{id:`${S}-tag-ul`},[a.recommendedCpu&&a.recommendedMemory&&a.recommendedDisk?(m(),p(I,{key:0},[t("button",lo," CPU : "+C(a.recommendedCpu)+" Core ",1),t("button",no," MEMORY : "+C(a.recommendedMemory)+" GB ",1),t("button",io," DISK : "+C(a.recommendedDisk)+" GB ",1)],64)):E("",!0)],8,ao)])])],12,Xe)])]))),128))])])]),t("div",ro,[h(t("input",{type:"text",class:"form-control mb-3",placeholder:"Search…",onKeypress:F,"onUpdate:modelValue":l[0]||(l[0]=a=>b.value=a),id:"inputCatalogSearch"},null,544),[[w,b.value]]),l[8]||(l[8]=t("h3",{class:"mb-3"}," dockerHub search ",-1)),$.value.length==0?(m(),p("div",co," There are no related Container Images found. ")):E("",!0),t("div",uo,[(m(!0),p(I,null,H($.value,(a,S)=>(m(),p("div",{class:"col-md-6 col-lg-12",key:S},[t("div",po,[t("div",mo,[t("div",vo,[t("img",{src:a.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,bo)]),t("div",ho,[t("div",go,[t("a",fo,C(a.name),1),t("div",yo,C(a.short_description.length>30?a.short_description.substring(0,30)+"...":""),1)])]),t("div",_o,[t("div",wo,[t("a",{href:"#",class:"link-secondary",onClick:D=>f(`dockerhub-dropdown-${S}`)},[y(T(W),{class:"icon",size:"24","stroke-width":"2"})],8,ko),t("div",{id:`dockerhub-dropdown-${S}`,class:J(["dropdown-menu dropdown-menu-end",{show:g.value===`dockerhub-dropdown-${S}`}])},[t("a",{class:"dropdown-item",onClick:V}," Go to the page "),t("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-form",onClick:D=>d("dockerhub",a)}," Enter content into softwareCatalog ",8,So),l[4]||(l[4]=t("a",{class:"dropdown-item",href:"#"}," Copy file/image to repository ",-1))],10,$o)])])])])]))),128))]),t("div",Co,[l[7]||(l[7]=t("h3",{class:"mb-3"}," artifactHub search ",-1)),s.value.length==0?(m(),p("div",Ro," There are no related Helm Charts found. ")):E("",!0),t("div",Do,[(m(!0),p(I,null,H(s.value,(a,S)=>(m(),p("div",{class:"col-md-6 col-lg-12",key:S},[t("div",To,[t("div",Ao,[l[6]||(l[6]=t("div",{class:"col-auto"},[t("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1)),t("div",Uo,[t("div",Io,[t("a",Mo,C(a.name),1),t("div",xo,C(a.description.length>30?a.description.substring(0,30)+"...":""),1)])]),t("div",Vo,[t("div",No,[t("a",{href:"#",class:"link-secondary",onClick:D=>f(`artifacthub-dropdown-${S}`)},[y(T(W),{class:"icon",width:"24",height:"24","stroke-width":"2"})],8,Eo),t("div",{id:`artifacthub-dropdown-${S}`,class:J(["dropdown-menu dropdown-menu-end",{show:g.value===`artifacthub-dropdown-${S}`}])},[t("a",{class:"dropdown-item",onClick:G}," Go to the page "),t("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-form",onClick:D=>d("artifacthub",a)}," Enter content into softwareCatalog ",8,Po),l[5]||(l[5]=t("a",{class:"dropdown-item",href:"#"}," Copy file/image to repository ",-1))],10,Lo)])])])])]))),128))])])])])],512),y(Ne,{mode:R.value,"catalog-idx":_.value,"repository-application-info":k.value,"repository-name":c.value,onGetList:u},null,8,["mode","catalog-idx","repository-application-info","repository-name"])],64))}}),Fo={class:"page",ref:"sofwareCatalog"},Oo={class:"page-wrapper"},Go={class:"page-header d-print-none"},qo={class:"container-xxl"},zo={class:"row g-2 align-items-center"},Bo={class:"col-auto ms-auto"},Ko={class:"page-body"},Yo={class:"container-xxl"},jo={class:"row"},Wo={class:"col-lg-12"},Jo={class:"card"},Qo={class:"card-header"},Xo={class:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs"},Zo={class:"nav-item"},ts={href:"#tabs-catalog",class:"nav-link active","data-bs-toggle":"tab"},es={class:"nav-item"},os={href:"#tabs-status",class:"nav-link","data-bs-toggle":"tab"},ss={class:"nav-item"},as={href:"#tabs-repository",class:"nav-link","data-bs-toggle":"tab"},ls={class:"card-body"},ns={class:"tab-content"},is={class:"tab-pane active show",id:"tabs-catalog"},ds={class:"tab-pane",id:"tabs-status"},rs={class:"tab-pane",id:"tabs-repository"},ws=K({__name:"SoftwareCatalog",setup(P){const A=bt(),r=v(""),_=v("");Q(async()=>{r.value=A.getNsId()});const R=k=>{_.value=k};return(k,c)=>(m(),p(I,null,[t("div",Fo,[t("div",Oo,[t("div",Go,[t("div",qo,[t("div",zo,[c[1]||(c[1]=t("div",{class:"col d-flex"},[t("h2",{class:"page-title"},"Software Catalog")],-1)),t("div",Bo,[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:c[0]||(c[0]=b=>R("Application Installation"))}," INSTALL ")])])])]),t("div",Ko,[t("div",Yo,[t("div",jo,[t("div",Wo,[t("div",Jo,[t("div",Qo,[t("ul",Xo,[t("li",Zo,[t("a",ts,[y(T(_t),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),c[2]||(c[2]=M(" Catalog "))])]),t("li",es,[t("a",os,[y(T(yt),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),c[3]||(c[3]=M(" Apps Status "))])]),t("li",ss,[t("a",as,[y(T(wt),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),c[4]||(c[4]=M(" Repository "))])])])]),t("div",ls,[t("div",ns,[t("div",is,[t("div",null,[y(Ho,{nsId:r.value},null,8,["nsId"])])]),t("div",ds,[t("div",null,[y(Ht)])]),t("div",rs,[t("div",null,[y(ft)])])])])])])])])])])],512),y(ut,{"ns-id":r.value,title:_.value},null,8,["ns-id","title"])],64))}});export{ws as default};
