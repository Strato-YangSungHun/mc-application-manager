import{c as E,I as U}from"./IconPlus-rWGugxnk.js";import{d as D,c as I,h as l,a as n,b as t,t as _,r as i,w as j,o as M,i as b,s as T,F as C,f as S,j as k,p as R,k as V,u as N,x as A}from"./index-Dv7ZO9TR.js";import{d as B,I as P,e as G,b as O,S as F,A as H}from"./softwareCatalogForm-CMYyEJme.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as K}from"./lodash-Cd2Ljc83.js";import"./request-rXGHRcEj.js";/**
 * @license @tabler/icons-vue v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J=E("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);const Y={class:"card mb-3"},q={class:"grid"},Q={class:"g-col-5"},W=["src"],X={class:"col-auto text-muted",style:{"align-items":"center"}},Z={class:"col g-col-7"},tt={class:"text-muted mt-3",style:{height:"50px"}},st=D({__name:"softwareCatalogCard",props:{catalogInfo:{},idx:{}},emits:["set-software-catalog-refrence"],setup(m,{emit:y}){const c=m,h=y,a=I(()=>c.catalogInfo),e=I(()=>c.idx),g=async r=>{h("set-software-catalog-refrence",r)};return(r,p)=>(l(),n("div",Y,[t("div",{class:"card-body cursor-pointer",onClick:p[0]||(p[0]=u=>g(e.value))},[t("div",q,[t("div",Q,[t("img",{src:a.value.catalogIcon,class:"rounded mb-3",alt:"Catalog Icon",width:"50",height:"50",style:{"margin-left":"5px"}},null,8,W),t("div",X,_(a.value.catalogCategory),1)]),t("div",Z,[t("div",null,[t("b",null,_(a.value.catalogTitle),1),t("div",tt,_(a.value.catalogSummary),1)])])])])]))}}),L=m=>(R("data-v-7728514d"),m=m(),V(),m),ot={class:"modal",id:"software-card-detail",tabindex:"-1"},et={class:"modal-dialog modal-lg",role:"document"},at={class:"modal-content"},lt={class:"modal-header"},nt={class:"modal-title"},ct=L(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),dt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},it={class:"datagrid"},rt={class:"datagrid-item"},_t={class:"d-flex justify-content-space-between"},ut={class:"col-lg-11 d-flex justify-content-start mb-5"},vt={class:"me-30",style:{"margin-right":"30px"}},mt=["src"],ht={class:"col-auto text-muted",style:{"align-items":"center"}},gt={class:"mt-3"},pt={class:"text-muted"},ft={class:"col-lg-1 lh-1"},bt={class:"dropdown"},yt={href:"#",class:"link-secondary","data-bs-toggle":"dropdown"},wt={class:"dropdown-menu dropdown-menu-end"},$t={class:"pt-0"},xt=["innerHTML"],Ct={class:"datagrid"},kt={class:"datagrid-item mb-5"},It=L(()=>t("div",{class:"datagrid-title"},"Ref Information",-1)),St={class:"datagrid-content"},Dt=["onClick"],Lt={class:"datagrid-item"},Tt=L(()=>t("div",{class:"datagrid-title"},"TAGS",-1)),jt={class:"datagrid-content"},Mt={key:0},Nt={class:"d-inline"},At={class:"datagrid"},Et={class:"datagrid-item mb-5"},Ut=L(()=>t("div",{class:"datagrid-title"},"Recommended Spec",-1)),Rt={class:"datagrid-content"},Vt={class:"btn btn-sm",style:{"margin-right":"5px"}},Bt={class:"btn btn-sm",style:{"margin-right":"5px"}},Pt={class:"btn btn-sm",style:{"margin-right":"5px"}},Gt={class:"footer"},Ot={class:"col-auto me-auto fs-3"},Ft={class:"d-flex justify-content-center"},Ht=D({__name:"softwareCatalogCardDetail",props:{catalogIdx:{}},emits:["set-software-catalog-refrence","on-click-deploy"],setup(m,{emit:y}){const c=m,h=y,a=I(()=>c.catalogIdx),e=i({});j(()=>a.value,async()=>{await g(a.value)}),M(async()=>{await g(a.value)});const g=async d=>{await B(d).then(({data:s})=>{const o=window.location.host.split(":"),v=window.location.protocol+"//"+o[0]+":18084";s.catalogIcon=v+s.catalogIcon,e.value=s})},r=i("new"),p=d=>{r.value="update"},u=d=>d===void 0?"":d.replace(/\\n|\n/g,"<br/>"),w=(d,s)=>d===void 0?null:Object.prototype.hasOwnProperty.call(d,s),f=d=>{window.open(d)},$=d=>{h("on-click-deploy",d)};return(d,s)=>(l(),n("div",ot,[t("div",et,[t("div",at,[t("div",lt,[t("h5",nt,_(e.value.catalogTitle),1),ct]),t("div",dt,[t("div",it,[t("div",rt,[t("div",_t,[t("div",ut,[t("div",vt,[t("img",{src:e.value.catalogIcon,class:"rounded mb-3",alt:"Catalog Icon",width:"50",height:"50",style:{"margin-left":"5px"}},null,8,mt),t("div",ht,_(e.value.catalogCategory),1)]),t("div",gt,[t("b",null,_(e.value.catalogTitle),1),t("div",pt,_(e.value.catalogSummary),1)])]),t("div",ft,[t("div",bt,[t("a",yt,[b(T(P),{class:"icon icon-tabler",color:"black",size:20,"stroke-width":"2"})]),t("div",wt,[t("a",{class:"dropdown-item",onClick:s[0]||(s[0]=o=>p(e.value.catalogIdx)),"data-bs-toggle":"modal","data-bs-target":"#modal-form"},"Update")])])])])])]),t("div",$t,[t("div",{class:"mb-5",style:{"white-space":"pre-wrap"},innerHTML:u(e.value.catalogDescription)},null,8,xt),t("div",Ct,[t("div",kt,[It,t("div",St,[w(e.value.refData,"HOMEPAGE")?(l(!0),n(C,{key:0},S(e.value.refData.HOMEPAGE,o=>(l(),n("div",{key:o},[t("a",{onClick:v=>f(o.referenceValue),class:"btn"},_(o.referenceValue),9,Dt)]))),128)):k("",!0)])]),t("div",Lt,[Tt,t("div",jt,[w(e.value.refData,"TAG")?(l(),n("div",Mt,[(l(!0),n(C,null,S(e.value.refData.TAG,o=>(l(),n("div",{class:"d-inline",key:o},[t("div",Nt,[t("span",null,"#"+_(o.referenceValue)+"  ",1)])]))),128))])):k("",!0)])])]),t("div",At,[t("div",Et,[Ut,t("div",Rt,[e.value.recommendedCpu&&e.value.recommendedMemory&&e.value.recommendedDisk?(l(),n(C,{key:0},[t("button",Vt," CPU : "+_(e.value.recommendedCpu),1),t("button",Bt," MEMORY : "+_(e.value.recommendedMemory),1),t("button",Pt," DISK : "+_(e.value.recommendedDisk),1)],64)):k("",!0)])])])])]),t("div",Gt,[t("div",Ot,[t("div",Ft,[t("button",{class:"btn btn-primary me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:s[1]||(s[1]=o=>$("Application Installation"))},"INSTALL"),t("button",{class:"btn btn-danger me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:s[2]||(s[2]=o=>$("Application Uninstallation"))},"UNINSTALL")])])])])])]))}}),zt=z(Ht,[["__scopeId","data-v-7728514d"]]),Kt={class:"modal",id:"softwareCatalogLog",tabindex:"-1"},Jt={class:"modal-dialog modal-xl",role:"document"},Yt={class:"modal-content"},qt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Qt={class:"modal-body text-left py-4"},Wt={class:"mb-5"},Xt={key:0,class:"spinner-border",role:"status"},Zt=t("span",{class:"visually-hidden"},"Loading...",-1),ts=[Zt],ss={key:0},os=t("p",{class:"text-secondary"},"No Data",-1),es=[os],as={class:"card mb-3"},ls=["onClick"],ns={class:"card-title"},cs={key:0,class:"card-body"},ds=["value"],is=D({__name:"softwareCatalogLog",props:{jobName:{}},setup(m){N();const y=m,c=i(!1),h=I(()=>y.jobName);j(h,async()=>{c.value=!1,await e()});const a=i([]),e=async()=>{a.value=[];const u=await G(h.value);a.value=u.data.data,c.value=!0},g=()=>{a.value=[],r.value=1},r=i(1),p=u=>{r.value===u?r.value=0:r.value=u};return(u,w)=>(l(),n("div",Kt,[t("div",Jt,[t("div",Yt,[qt,t("div",Qt,[t("h3",Wt,[A(" Build Log "),c.value?k("",!0):(l(),n("div",Xt,ts))]),t("div",null,[a.value.length<=0?(l(),n("div",ss,es)):(l(!0),n(C,{key:1},S(a.value,f=>(l(),n("div",{key:f.buildIdx},[t("div",as,[t("div",{class:"card-header",onClick:$=>p(f.buildIdx),style:{cursor:"pointer"}},[t("h3",ns,_(f.buildIdx),1)],8,ls),r.value===f.buildIdx?(l(),n("div",cs,[t("textarea",{value:f.buildLog,disabled:"",style:{width:"100%"},rows:"20"},null,8,ds)])):k("",!0)])]))),128))])]),t("div",{class:"modal-footer"},[t("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:g}," Cancel ")])])])]))}}),rs={class:"page",ref:"sofwareCatalog"},_s={class:"page-wrapper"},us={class:"page-header d-print-none"},vs={class:"container-xl"},ms={class:"row g-2 align-items-center"},hs=t("div",{class:"col d-flex"},[t("h2",{class:"page-title"},"Software catalog")],-1),gs={class:"col-auto ms-auto d-print-none"},ps={class:"d-flex"},fs={class:"me-3 d-none d-md-block"},bs={class:"input-icon"},ys=t("input",{type:"text",class:"form-control",placeholder:"Search…"},null,-1),ws={class:"input-icon-addon"},$s={class:"col-auto ms-auto"},xs={class:"btn-list"},Cs={class:"page-body"},ks={class:"container-xl"},Is={class:"row"},Ss={class:"col-auto"},Ds={class:"card bg-color-white"},Ls={class:"card-body"},Ts={class:"row row-deck"},js={class:"w-100"},Bs=D({__name:"SoftwareCatalogListTest",setup(m){const y=N(),c=i([]),h=i("");i([]),i([]);const a=i(0),e=i(""),g=i("new"),r=i("");i("ns01");const p=i("");M(async()=>{h.value="",window.addEventListener("message",async function(s){const o=s.data;o.projectInfo&&(r.value=o.projectInfo.ns_id)}),await u()});const u=async()=>{try{const s=await O(h.value);K.forEach(s.data,function(o){const v=window.location.host.split(":"),x=window.location.protocol+"//"+v[0]+":18084";o.catalogIcon=x+o.catalogIcon,o.refData=w(o.catalogRefData),o.isShow=!1}),c.value=s.data}catch(s){console.log(s),y.error("데이터를 가져올 수 없습니다.")}},w=s=>s.reduce((o,v)=>(o[v.referenceType]||(o[v.referenceType]=[]),o[v.referenceType].push(v),o),{}),f=async s=>{a.value=s,c.value.forEach(o=>{o.isShow=!1}),c.value[s].isShow=!c.value[s].isShow},$=()=>{g.value="new",a.value=0},d=s=>{p.value=s};return(s,o)=>(l(),n("div",rs,[t("div",_s,[t("div",us,[t("div",vs,[t("div",ms,[hs,t("div",gs,[t("div",ps,[t("div",fs,[t("div",bs,[ys,t("span",ws,[b(T(J),{class:"icon icon-tabler icon-tabler-search",size:24})])])])])]),t("div",$s,[t("div",xs,[t("a",{class:"btn btn-primary d-none d-sm-inline-block",onClick:$,"data-bs-toggle":"modal","data-bs-target":"#modal-form"},[b(T(U),{class:"icon icon-tabler icon-tabler-plus",color:"white",size:20,"stroke-width":"2"}),A(" New ")])])])])])]),t("div",Cs,[t("div",ks,[t("div",Is,[t("div",Ss,[t("div",Ds,[t("div",Ls,[t("div",Ts,[(l(!0),n(C,null,S(c.value,(v,x)=>(l(),n("div",{class:"col-md-4",key:x,style:{width:"33%",display:"flex","justify-content":"space-between"}},[t("div",js,[b(st,{"catalog-info":v,idx:x,"data-bs-toggle":"modal","data-bs-target":"#software-card-detail",onSetSoftwareCatalogRefrence:Ms=>f(x)},null,8,["catalog-info","idx","onSetSoftwareCatalogRefrence"])])]))),128))])])])])])])])]),b(F,{mode:g.value,"catalog-idx":a.value+1,onGetList:u},null,8,["mode","catalog-idx"]),b(is,{"job-name":e.value},null,8,["job-name"]),b(H,{"ns-id":r.value,title:p.value,"catalog-list":c.value},null,8,["ns-id","title","catalog-list"]),b(zt,{"catalog-idx":a.value+1,onOnClickDeploy:d},null,8,["catalog-idx"])],512))}});export{Bs as default};
