import{c as G}from"./IconPlus-CqqyfiSE.js";import{r as he,a as ye,g as _e,b as ke,c as we,u as Ce,d as $e,e as Te,f as Me,h as Se,i as Ue,j as Ie,k as Re,I as Ae,s as De,l as xe,m as Ve,n as Ee,A as Pe}from"./softwareCatalogForm.vue_vue_type_style_index_0_scoped_c6733d12_lang-Dagcjqv2.js";import{_ as Le}from"./Tabulator.vue_vue_type_style_index_0_lang-avgDya_r.js";import{d as z,u as W,c as le,r as m,a as p,b as e,l as N,j as P,t as T,e as y,g as S,h as u,o as Z,F as x,i as R,m as O,p as ge,w as X,n as oe,q as se,s as ce,f as L,v as Y,x as ue,k as Ne,y as re,z as me,A as He,B as Be,C as pe}from"./index-C3PXXBcp.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as be}from"./lodash-DzClcHwC.js";import{_ as Ke}from"./RepositoryList.vue_vue_type_script_setup_true_lang-DxgVhnfR.js";import{_ as Oe}from"./RepositoryDetail.vue_vue_type_script_setup_true_lang-DEiGxMyl.js";import"./request-CBOVy-9I.js";import"./bootstrap.esm-cbDoEtWb.js";import"./repository-Cuhmmp2J.js";/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ge=G("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ze=G("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ve=G("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=G("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qe=G("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var je=G("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ye=G("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var We=G("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);const Je={class:"modal",id:"action-confirm",tabindex:"-1"},Qe={class:"modal-dialog modal-lg",role:"document"},Xe={class:"modal-content"},Ze={class:"modal-header"},et={class:"modal-title"},tt={key:0},at={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},ot={class:"mb-3"},st={class:"modal-footer d-flex justify-content-between"},lt=z({__name:"applicationActionConfirm",props:{title:{},applicationStatusId:{},type:{},applicationName:{}},emits:["getApplicationsStatusList"],setup(H,{emit:A}){const d=W(),U=H,_=A,r=le(()=>U.title),v=le(()=>U.applicationStatusId),g=le(()=>U.type),M=m(""),f=()=>{M.value=""},C=async()=>{f();let I;const $={operation:r.value,applicationStatusId:v.value,reason:M.value};if(g.value==="VM"){const{data:a}=await he($);I=a}else if(g.value==="K8S"){const{data:a}=await ye($);I=a}_("getApplicationsStatusList"),I?d.success(`${r.value} Action SUCCESS`):d.error(`${r.value} Action FAIL`)};return(I,$)=>(u(),p("div",Je,[e("div",Qe,[e("div",Xe,[e("div",Ze,[e("h5",et,[N(T(I.applicationName)+" "+T(r.value)+" ",1),g.value?(u(),p("span",tt,"("+T(g.value)+")",1)):P("",!0)]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:f})]),e("div",at,[e("div",ot,[$[1]||($[1]=e("label",{class:"form-label"},"Reason",-1)),$[2]||($[2]=e("p",{class:"text-muted"}," Please enter a reason ",-1)),y(e("textarea",{class:"form-control",rows:"10",placeholder:"Reason","onUpdate:modelValue":$[0]||($[0]=a=>M.value=a)},null,512),[[S,M.value]])])]),e("div",st,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:f}," Cancel "),e("div",null,[e("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:C},T(r.value),1)])])])])]))}}),nt={class:"card card-flush w-100"},it={class:"page-header page-wrapper"},dt={class:"row align-items-center"},rt={class:"card-header d-flex",style:{"justify-content":"space-between"}},ct={class:"btn-list"},ut={class:"me-2"},mt=z({__name:"applicationStatusList",setup(H){const A=W(),d=m([]),U=m([]),_=m(""),r=m(""),v=m(0),g=m(""),M=m("");Z(async()=>{I(),await f()});const f=async()=>{try{C();const{data:k}=await _e();k?d.value=k:d.value=[]}catch(k){console.log(k),A.error("Unable to retrieve data")}},C=()=>{d.value=[];const k=new Date,n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};_.value=k.toLocaleDateString("ko-KR",n)},I=()=>{U.value=[{title:"Infra",width:"25%",formatter:a},{title:"Application",field:"applicationName",width:"15%"},{title:"Status",width:"15%",formatter:b},{title:"CheckedAt",field:"checkedAt",width:"20%"},{title:"Action",width:"25%",formatter:w,cellClick:async function(k,n){const i=k.target,h=i==null?void 0:i.getAttribute("id"),D=n.getRow().getData().id,E=n.getRow().getData().deploymentType,J=n.getRow().getData().applicationName,B={operation:"",applicationStatusId:D,deploymentType:E,applicationName:J};h==="restart-btn"?(B.operation="RESTART",await $(B)):h==="stop-btn"?(B.operation="STOP",await $(B)):h==="uninstall-btn"&&(B.operation="UNINSTALL",await $(B))}}]},$=async k=>{r.value=k.operation,v.value=k.applicationStatusId,g.value=k.deploymentType,M.value=k.applicationName},a=k=>{const n=k.getRow().getData().deploymentType,i=k.getRow().getData().vmId?k.getRow().getData().vmId:k.getRow().getData().clusterName?k.getRow().getData().clusterName:"-";return`
    <div>
      <p>
        ${n} (${i})
      <p>
    </div>
  `},b=k=>{const n=k.getRow().getData().status;return n==="RUNNING"?`
      <div>
        <span class="status status-green">  
          <span class="status-dot"></span>
            ${n}
        </span>
      </div>`:n==="RESTART"||n==="IN_PROGRESS"?`
    <div>
      <span class="status status-primary">  
        <span class="status-dot"></span>
          ${n}
      </span>
    </div>`:n==="NOT_FOUND"?`
    <div>
      <span class="status status-yellow">  
        <span class="status-dot"></span>
          ${n}
      </span>
    </div>`:`
  <div>
    <span class="status status-red">  
      <span class="status-dot"></span>
        ${n}
    </span>
  </div>`},w=()=>`
  <div>
    <button
      class='btn btn-ghost-primary d-none d-sm-inline-block'
      id='restart-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Restart
    </button>
    <button
      class='btn btn-ghost-warning d-none d-sm-inline-block'
      id='stop-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Stop
    </button>
    <button
      class='btn btn-ghost-danger d-none d-sm-inline-block'
      id='uninstall-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Uninstall
    </button>
  </div>`;return(k,n)=>(u(),p(x,null,[e("div",nt,[e("div",it,[e("div",dt,[e("div",rt,[n[1]||(n[1]=e("h3",{class:"card-title"},[e("strong",null,"Apps Status")],-1)),e("div",ct,[e("span",ut,T(_.value),1),e("a",{class:"btn btn-outline-primary d-none d-sm-inline-block",onClick:f},[R(O(je),{class:"icon icon-tabler",size:20,"stroke-width":"1"}),n[0]||(n[0]=N(" Refresh "))])])])])]),R(Le,{columns:U.value,"table-data":d.value},null,8,["columns","table-data"])]),R(lt,{title:r.value,applicationStatusId:v.value,type:g.value,applicationName:M.value,onGetApplicationsStatusList:f},null,8,["title","applicationStatusId","type","applicationName"])],64))}}),pt={class:"modal-dialog modal-lg",role:"document"},vt={class:"modal-content"},gt={class:"modal-header"},ft={class:"modal-title"},bt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},ht={class:"nav nav-tabs mb-3"},yt={class:"nav-item"},_t={class:"nav-item"},kt={class:"nav-item"},wt={class:"nav-item"},Ct={class:"mb-3"},$t={class:"d-flex align-items-center"},Tt={class:"form-check me-3"},Mt=["disabled"],St={class:"form-check"},Ut=["disabled"],It={class:"mb-3"},Rt=["disabled"],At=["value"],Dt={class:"w-100 d-flex justify-content-between"},xt={class:"mb-3 w-50",style:{"margin-right":"10px"}},Vt=["disabled"],Et=["value"],Pt={class:"mb-3 w-50"},Lt=["disabled"],Nt=["value"],Ht={class:"mb-3"},Bt={class:"mb-3"},Kt={class:"mb-3"},Ot={class:"mb-3"},Gt={class:"col-5"},zt=["onUpdate:modelValue"],Ft={class:"col-6"},qt=["onUpdate:modelValue"],jt={class:"col-1 d-flex gap-2"},Yt=["onClick","disabled"],Wt={class:"row"},Jt={class:"col-md-6"},Qt={class:"row"},Xt={class:"col-6"},Zt={class:"input-group"},ea={class:"col-6"},ta={class:"input-group"},aa={class:"row mt-3"},oa={class:"col-md-6"},sa={class:"row"},la={class:"col-6"},na={class:"input-group"},ia={class:"col-6"},da={class:"input-group"},ra={class:"row mt-3"},ca={class:"col-md-6"},ua={class:"row"},ma={class:"col-6"},pa={class:"input-group"},va={class:"col-6"},ga={class:"input-group"},fa={key:0,class:"card mt-3"},ba={class:"card-body"},ha={class:"d-flex align-items-center mb-2"},ya={class:"form-check form-switch"},_a={class:"row"},ka={class:"col-md-3"},wa=["disabled"],Ca={class:"col-md-3"},$a=["disabled"],Ta={class:"col-md-3"},Ma=["disabled"],Sa={class:"col-md-3"},Ua=["disabled"],Ia={key:0},Ra={class:"card"},Aa={class:"card-body"},Da={class:"mb-3"},xa={key:1},Va={class:"card"},Ea={class:"card-body"},Pa={class:"mb-3"},La={class:"col-4"},Na=["onUpdate:modelValue"],Ha={class:"col-3"},Ba=["onUpdate:modelValue"],Ka={class:"col-4"},Oa=["onUpdate:modelValue"],Ga={class:"col-1 d-flex align-items-end gap-2"},za=["onClick","disabled"],Fa={class:"card mt-3"},qa={class:"card-body"},ja={class:"d-flex align-items-center mb-3"},Ya={class:"form-check form-switch"},Wa={key:0},Ja={class:"mb-3"},Qa={class:"modal-footer"},Xa={class:"ms-auto d-flex gap-2"},Za=["disabled"],eo=["disabled"],to=["disabled"],ao=z({__name:"softwareCatalogWizard",props:{show:{type:Boolean},mode:{},catalogId:{},catalogInfo:{}},emits:["created","updated"],setup(H,{emit:A}){const d=H,U=A,_=W(),r=m(1),v=m(!1),g=m(!1),M=m(0),f=m(null),C=m(!1);Z(()=>{M.value=d.catalogId,f.value&&(f.value.addEventListener("show.bs.modal",I),f.value.addEventListener("hide.bs.modal",$)),q()}),ge(()=>{f.value&&(f.value.removeEventListener("show.bs.modal",I),f.value.removeEventListener("hide.bs.modal",$))}),X(()=>[d.mode,d.catalogId],([o,t],[s,K])=>{t&&o==="update"&&(r.value=1,M.value=t,de())});const I=()=>{g.value=!0,d.mode==="new"&&h()},$=()=>{g.value=!1,C.value=!1},a=m({id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null}),b=m([{refId:0,refValue:"",refDesc:"",refType:"URL"}]),w=m([{targetPort:80,hostPort:8080,protocol:"TCP"}]),k=le(()=>r.value===1?a.value.target&&a.value.category&&a.value.packageName&&a.value.version:r.value===2?a.value.name.trim().length>0&&a.value.summary.trim().length>0&&a.value.description.trim().length>0:r.value===3?a.value.minCpu>0&&a.value.minMemory>0&&a.value.minDisk>0&&a.value.recommendedCpu>0&&a.value.recommendedMemory>0&&a.value.recommendedDisk>0:r.value===3&&a.value.hpaEnabled?a.value.minReplicas>0&&a.value.maxReplicas>0&&a.value.cpuThreshold>0&&a.value.memoryThreshold>0:(console.log(w.value),r.value===3&&a.value.target==="VM"?a.value.defaultPort>0:r.value===4&&a.value.target==="K8S"?(console.log(w.value.length),w.value.length>0?w.value.every(o=>o.targetPort>0&&o.hostPort>0&&o.protocol):!1):r.value===4&&a.value.ingressEnabled?a.value.ingressUrl.trim().length>0:!0)),n=()=>{k.value&&r.value<4&&(r.value+=1)},i=()=>{r.value>1&&(r.value-=1)},h=()=>{r.value=1,a.value={id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null},b.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],w.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}]},D=()=>{b.value.push({refId:0,refValue:"",refDesc:"",refType:"URL"})},E=o=>{b.value.length>1&&b.value.splice(o,1)},J=()=>{w.value.push({targetPort:80,hostPort:8080,protocol:"TCP"})},B=o=>{w.value.length>1&&w.value.splice(o,1)},ee=()=>{if(f.value){g.value=!1;const o=f.value.querySelector('[data-bs-dismiss="modal"]');if(o)o.click();else try{const t=window.bootstrap;if(t!=null&&t.Modal)(t.Modal.getInstance(f.value)||new t.Modal(f.value)).hide();else{f.value.classList.remove("show"),f.value.style.display="none",document.body.classList.remove("modal-open");const s=document.querySelector(".modal-backdrop");s==null||s.remove()}}catch(t){console.warn("Modal close failed:",t)}}},ne=async()=>{try{a.value.catalogRefs=b.value.filter(o=>o.refValue.trim()),a.value.target==="K8S"&&(a.value.ports=w.value.filter(o=>o.targetPort&&o.hostPort)),a.value.target==="VM"?a.value.sourceType="DOCKERHUB":a.value.target==="K8S"&&(a.value.sourceType="ARTIFACTHUB"),await we(a.value),_.success("Registration Success"),ee(),U("created")}catch{_.error("Registration Failed")}},ie=async()=>{try{a.value.catalogRefs=b.value.filter(o=>o.refValue.trim()),a.value.target==="K8S"&&(a.value.ports=w.value.filter(o=>o.targetPort&&o.hostPort)),a.value.target==="VM"?a.value.sourceType="DOCKERHUB":a.value.target==="K8S"&&(a.value.sourceType="ARTIFACTHUB"),await Ce(a.value),_.success("Update Success"),ee(),U("updated")}catch{_.error("Update Failed")}},de=async()=>{try{if(!M.value)return;d.catalogInfo&&d.catalogInfo.category&&(v.value=!0,a.value.target=d.catalogInfo.sourceType==="DOCKERHUB"?"VM":"K8S",a.value.category=d.catalogInfo.category,d.catalogInfo.sourceType==="DOCKERHUB"?(a.value.packageName=d.catalogInfo.packageInfo.packageName,a.value.version=d.catalogInfo.packageInfo.packageVersion):d.catalogInfo.sourceType==="ARTIFACTHUB"&&(a.value.packageName=d.catalogInfo.helmChart.chartName,a.value.version=d.catalogInfo.helmChart.chartVersion),v.value=!1),await te()}catch{_.error("Failed to load catalog data"),v.value=!1}},te=async()=>{try{if(!M.value)return;const{data:o}=await $e(M.value);v.value=!0,a.value={...a.value,...o,target:o.sourceType==="DOCKERHUB"?"VM":"K8S"},o.sourceType==="DOCKERHUB"&&(a.value.packageName=o.packageInfo.packageName,a.value.version=o.packageInfo.packageVersion),o.sourceType==="ARTIFACTHUB"&&(a.value.packageName=o.helmChart.chartName,a.value.version=o.helmChart.chartVersion),o.catalogRefs&&o.catalogRefs.length>0?b.value=o.catalogRefs.map(t=>({refId:t.id||0,refValue:t.refValue||"",refDesc:t.refDesc||"",refType:t.refType||"URL"})):b.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],o.ports&&o.ports.length>0?w.value=o.ports.map(t=>({targetPort:t.targetPort||80,hostPort:t.hostPort||8080,protocol:t.protocol||"TCP"})):w.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}],await q(),a.value.category&&(await ae(),a.value.packageName&&await c()),v.value=!1}catch{_.error("Failed to load catalog data"),v.value=!1}},F=o=>{k.value&&(r.value=o)};X(()=>a.value.target,o=>{o&&(d.mode==="new"&&(a.value.category="",a.value.packageName="",a.value.version=""),q())});const Q=m([]),q=async()=>{if(d.mode==="new"&&(Q.value=[],j.value=[],l.value=[],a.value.category="",a.value.packageName="",a.value.version=""),a.value.target){const o={target:a.value.target==="VM"?"DOCKER":"HELM"},{data:t}=await ke(o);Q.value=t}};X(()=>a.value.category,o=>{o&&(d.mode==="new"&&(a.value.packageName="",a.value.version=""),ae())});const j=m([]),ae=async()=>{d.mode==="new"&&(j.value=[],l.value=[],a.value.packageName="",a.value.version="");const o={target:a.value.target==="VM"?"DOCKER":"HELM",category:a.value.category||""},{data:t}=await Te(o);j.value=t};X(()=>a.value.packageName,o=>{o&&(d.mode==="new"&&(a.value.version=""),c())});const l=m([]),c=async()=>{d.mode==="new"&&(l.value=[],a.value.version="");const o={target:a.value.target==="VM"?"DOCKER":"HELM",packageName:a.value.packageName||""},{data:t}=await Me(o);d.mode==="new"?t.forEach(s=>{s.isUsed||l.value.push(s)}):l.value=t};return(o,t)=>(u(),p("div",{class:"modal fade",id:"modal-wizard",tabindex:"-1",ref_key:"wizardModal",ref:f},[e("div",pt,[e("div",vt,[e("div",gt,[e("h5",ft,T(d.mode==="update"?"Application Update":"Application Registration"),1),t[27]||(t[27]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",bt,[e("ul",ht,[e("li",yt,[e("a",{class:oe(["nav-link",{active:r.value===1}]),href:"javascript:void(0);",onClick:t[0]||(t[0]=s=>F(1))},"1. Package",2)]),e("li",_t,[e("a",{class:oe(["nav-link",{active:r.value===2}]),href:"javascript:void(0);",onClick:t[1]||(t[1]=s=>F(2))},"2. General",2)]),e("li",kt,[e("a",{class:oe(["nav-link",{active:r.value===3}]),href:"javascript:void(0);",onClick:t[2]||(t[2]=s=>F(3))},"3. Resource Requirements",2)]),e("li",wt,[e("a",{class:oe(["nav-link",{active:r.value===4}]),href:"javascript:void(0);",onClick:t[3]||(t[3]=s=>F(4))},"4. Network",2)])]),y(e("div",null,[e("div",Ct,[t[30]||(t[30]=e("label",{class:"form-label required"},"Target",-1)),e("div",$t,[e("div",Tt,[y(e("input",{class:"form-check-input",type:"radio",name:"target",value:"VM","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.target=s),id:"targetVM",disabled:d.mode==="update"},null,8,Mt),[[ce,a.value.target]]),t[28]||(t[28]=e("label",{class:"form-check-label",for:"targetVM"},"VM",-1))]),e("div",St,[y(e("input",{class:"form-check-input",type:"radio",name:"target",value:"K8S","onUpdate:modelValue":t[5]||(t[5]=s=>a.value.target=s),id:"targetK8S",disabled:d.mode==="update"},null,8,Ut),[[ce,a.value.target]]),t[29]||(t[29]=e("label",{class:"form-check-label",for:"targetK8S"},"K8S",-1))])])]),e("div",It,[t[32]||(t[32]=e("label",{class:"form-label required"},"Category",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.category=s),disabled:d.mode==="update"},[t[31]||(t[31]=e("option",{value:""},"Select Category",-1)),(u(!0),p(x,null,L(Q.value,s=>(u(),p("option",{value:s.value,key:s.key},T(s.value),9,At))),128))],8,Rt),[[Y,a.value.category]])]),e("div",Dt,[e("div",xt,[t[34]||(t[34]=e("label",{class:"form-label required"},"Package",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[7]||(t[7]=s=>a.value.packageName=s),disabled:d.mode==="update"},[t[33]||(t[33]=e("option",{value:""},"Select Package",-1)),(u(!0),p(x,null,L(j.value,s=>(u(),p("option",{value:s.value,key:s.key},T(s.value),9,Et))),128))],8,Vt),[[Y,a.value.packageName]])]),e("div",Pt,[t[36]||(t[36]=e("label",{class:"form-label required"},"Version",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.version=s),disabled:d.mode==="update"},[t[35]||(t[35]=e("option",{value:""},"Select Version",-1)),(u(!0),p(x,null,L(l.value,s=>(u(),p("option",{value:s.value,key:s.key},T(s.value),9,Nt))),128))],8,Lt),[[Y,a.value.version]])])])],512),[[se,r.value===1]]),y(e("div",null,[e("div",Ht,[t[37]||(t[37]=e("label",{class:"form-label required"},"Application Name",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=s=>a.value.name=s),placeholder:"Application name"},null,512),[[S,a.value.name]])]),e("div",Bt,[t[38]||(t[38]=e("label",{class:"form-label required"},"Summary",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=s=>a.value.summary=s),placeholder:"Application summary"},null,512),[[S,a.value.summary]])]),e("div",Kt,[t[39]||(t[39]=e("label",{class:"form-label required"},"Description",-1)),y(e("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":t[11]||(t[11]=s=>a.value.description=s),placeholder:"Application description"},null,512),[[S,a.value.description]])]),e("div",Ot,[t[41]||(t[41]=e("label",{class:"form-label"},"Reference",-1)),(u(!0),p(x,null,L(b.value,(s,K)=>(u(),p("div",{class:"row g-2 mb-2",key:K},[e("div",Gt,[y(e("select",{class:"form-select","onUpdate:modelValue":V=>s.refType=V},t[40]||(t[40]=[Ne('<option value="URL" data-v-42b8d677>URL</option><option value="IMAGE" data-v-42b8d677>IMAGE</option><option value="HOMEPAGE" data-v-42b8d677>HOMEPAGE</option><option value="TAG" data-v-42b8d677>TAG</option><option value="ETC" data-v-42b8d677>ETC</option>',5)]),8,zt),[[Y,s.refType]])]),e("div",Ft,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":V=>s.refValue=V,placeholder:"Ref Value"},null,8,qt),[[S,s.refValue]])]),e("div",jt,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:V=>E(K),disabled:b.value.length<=1},"-",8,Yt)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:D,style:{color:"gray"}},"+ Add Reference")])],512),[[se,r.value===2]]),y(e("div",null,[e("div",Wt,[e("div",Jt,[t[46]||(t[46]=e("label",{class:"form-label"},"CPU",-1)),e("div",Qt,[e("div",Xt,[t[43]||(t[43]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",Zt,[y(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=s=>a.value.minCpu=s),placeholder:"1"},null,512),[[S,a.value.minCpu,void 0,{number:!0}]]),t[42]||(t[42]=e("span",{class:"input-group-text"},"Cores",-1))])]),e("div",ea,[t[45]||(t[45]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",ta,[y(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>a.value.recommendedCpu=s),placeholder:"2"},null,512),[[S,a.value.recommendedCpu,void 0,{number:!0}]]),t[44]||(t[44]=e("span",{class:"input-group-text"},"Cores",-1))])])])])]),e("div",aa,[e("div",oa,[t[51]||(t[51]=e("label",{class:"form-label"},"Memory",-1)),e("div",sa,[e("div",la,[t[48]||(t[48]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",na,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=s=>a.value.minMemory=s),placeholder:"4"},null,512),[[S,a.value.minMemory,void 0,{number:!0}]]),t[47]||(t[47]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",ia,[t[50]||(t[50]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",da,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=s=>a.value.recommendedMemory=s),placeholder:"8"},null,512),[[S,a.value.recommendedMemory,void 0,{number:!0}]]),t[49]||(t[49]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),e("div",ra,[e("div",ca,[t[56]||(t[56]=e("label",{class:"form-label"},"Storage",-1)),e("div",ua,[e("div",ma,[t[53]||(t[53]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",pa,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[16]||(t[16]=s=>a.value.minDisk=s),placeholder:"10"},null,512),[[S,a.value.minDisk,void 0,{number:!0}]]),t[52]||(t[52]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",va,[t[55]||(t[55]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",ga,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[17]||(t[17]=s=>a.value.recommendedDisk=s),placeholder:"20"},null,512),[[S,a.value.recommendedDisk,void 0,{number:!0}]]),t[54]||(t[54]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),a.value.target==="K8S"?(u(),p("div",fa,[e("div",ba,[e("div",ha,[t[57]||(t[57]=e("label",{class:"form-check-label me-2"},"K8S HPA",-1)),e("div",ya,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=s=>a.value.hpaEnabled=s)},null,512),[[ue,a.value.hpaEnabled]])])]),e("div",_a,[e("div",ka,[t[58]||(t[58]=e("label",{class:"form-label"},"minReplicas",-1)),y(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=s=>a.value.minReplicas=s),disabled:!a.value.hpaEnabled,placeholder:"1"},null,8,wa),[[S,a.value.minReplicas,void 0,{number:!0}]])]),e("div",Ca,[t[59]||(t[59]=e("label",{class:"form-label"},"maxReplicas",-1)),y(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=s=>a.value.maxReplicas=s),disabled:!a.value.hpaEnabled,placeholder:"10"},null,8,$a),[[S,a.value.maxReplicas,void 0,{number:!0}]])]),e("div",Ta,[t[60]||(t[60]=e("label",{class:"form-label"},"CPU (%)",-1)),y(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":t[21]||(t[21]=s=>a.value.cpuThreshold=s),disabled:!a.value.hpaEnabled,placeholder:"80"},null,8,Ma),[[S,a.value.cpuThreshold,void 0,{number:!0}]])]),e("div",Sa,[t[61]||(t[61]=e("label",{class:"form-label"},"Memory (%)",-1)),y(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":t[22]||(t[22]=s=>a.value.memoryThreshold=s),disabled:!a.value.hpaEnabled,placeholder:"80"},null,8,Ua),[[S,a.value.memoryThreshold,void 0,{number:!0}]])])])])])):P("",!0)],512),[[se,r.value===3]]),y(e("div",null,[a.value.target==="VM"?(u(),p("div",Ia,[e("div",Ra,[t[63]||(t[63]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",Aa,[e("div",Da,[t[62]||(t[62]=e("label",{class:"form-label"},"Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":t[23]||(t[23]=s=>a.value.defaultPort=s),placeholder:"80"},null,512),[[S,a.value.defaultPort,void 0,{number:!0}]])])])])])):P("",!0),a.value.target==="K8S"?(u(),p("div",xa,[e("div",Va,[t[69]||(t[69]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",Ea,[e("div",Pa,[t[68]||(t[68]=e("label",{class:"form-label"},"Port",-1)),(u(!0),p(x,null,L(w.value,(s,K)=>(u(),p("div",{class:"row g-2 mb-2",key:K},[e("div",La,[t[64]||(t[64]=e("label",{class:"form-label small"},"Target Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":V=>s.targetPort=V,placeholder:"80"},null,8,Na),[[S,s.targetPort,void 0,{number:!0}]])]),e("div",Ha,[t[66]||(t[66]=e("label",{class:"form-label small"},"Protocol",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":V=>s.protocol=V},t[65]||(t[65]=[e("option",{value:"TCP"},"TCP",-1),e("option",{value:"UDP"},"UDP",-1),e("option",{value:"SCTP"},"SCTP",-1)]),8,Ba),[[Y,s.protocol]])]),e("div",Ka,[t[67]||(t[67]=e("label",{class:"form-label small"},"Host Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":V=>s.hostPort=V,placeholder:"8080"},null,8,Oa),[[S,s.hostPort,void 0,{number:!0}]])]),e("div",Ga,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:V=>B(K),disabled:w.value.length<=1},"-",8,za)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:J,style:{color:"gray"}},"+ Add Port Mapping")])])]),e("div",Fa,[e("div",qa,[e("div",ja,[t[70]||(t[70]=e("label",{class:"form-check-label me-2"},"Ingress Configuration",-1)),e("div",Ya,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=s=>a.value.ingressEnabled=s)},null,512),[[ue,a.value.ingressEnabled]])])]),a.value.ingressEnabled?(u(),p("div",Wa,[e("div",Ja,[t[71]||(t[71]=e("label",{class:"form-label"},"Ingress Path",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[25]||(t[25]=s=>a.value.ingressUrl=s),placeholder:"/"},null,512),[[S,a.value.ingressUrl]])])])):P("",!0)])])])):P("",!0)],512),[[se,r.value===4]])]),e("div",Qa,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:h}," Cancel "),e("div",Xa,[e("button",{class:"btn btn-outline-secondary",disabled:r.value===1,onClick:i},"Prev",8,Za),r.value<4?(u(),p("button",{key:0,class:"btn btn-primary",disabled:!k.value,onClick:n},"Next",8,eo)):(u(),p("button",{key:1,class:"btn btn-primary",disabled:!k.value,onClick:t[26]||(t[26]=s=>d.mode==="update"?ie():ne())},T(d.mode==="update"?"Update":"Create"),9,to))])])])])],512))}}),oo=fe(ao,[["__scopeId","data-v-42b8d677"]]),so={class:"modal-dialog",role:"document"},lo={class:"modal-content"},no={class:"modal-body"},io={class:"modal-footer"},ro=["disabled"],co={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},uo=z({__name:"DeleteConfirmModal",props:{targetCatalog:{}},emits:["deleted","close"],setup(H,{expose:A,emit:d}){const U=H,_=d,r=W(),v=m(!1),g=m(null),M=()=>{if(g.value)try{const a=window.bootstrap;if(a&&a.Modal)new a.Modal(g.value).show();else{g.value.classList.add("show"),g.value.style.display="block",document.body.classList.add("modal-open");const b=document.createElement("div");b.className="modal-backdrop fade show",b.id="delete-modal-backdrop",document.body.appendChild(b)}}catch(a){console.warn("Failed to show modal with Bootstrap, using fallback:",a),g.value.classList.add("show"),g.value.style.display="block",document.body.classList.add("modal-open")}},f=()=>{if(g.value)try{const a=window.bootstrap;if(a&&a.Modal){const b=a.Modal.getInstance(g.value);b?b.hide():C()}else C()}catch(a){console.warn("Failed to hide modal with Bootstrap, using fallback:",a),C()}},C=()=>{if(g.value){g.value.classList.remove("show"),g.value.style.display="none",document.body.classList.remove("modal-open");const a=document.getElementById("delete-modal-backdrop");a&&a.remove(),_("close")}},I=async()=>{var a;if((a=U.targetCatalog)!=null&&a.id){v.value=!0;try{await Se(U.targetCatalog.id),r.success(`${U.targetCatalog.name} catalog has been successfully deleted.`),f(),_("deleted",U.targetCatalog.id)}catch(b){console.error("Delete failed:",b),r.error("Failed to delete catalog.")}finally{v.value=!1}}},$=()=>{_("close")};return Z(()=>{g.value&&g.value.addEventListener("hidden.bs.modal",$)}),ge(()=>{g.value&&g.value.removeEventListener("hidden.bs.modal",$)}),A({show:M,hide:f}),(a,b)=>(u(),p("div",{class:"modal fade",id:"deleteConfirmModal",tabindex:"-1",ref_key:"deleteModal",ref:g,onClick:re(f,["self"])},[e("div",so,[e("div",lo,[e("div",{class:"modal-header"},[b[0]||(b[0]=e("h5",{class:"modal-title"},"Confirm Catalog Deletion",-1)),e("button",{type:"button",class:"btn-close",onClick:f,"aria-label":"Close"})]),e("div",no,[e("p",null,[b[1]||(b[1]=N("Are you sure you want to delete ")),e("strong",null,T(a.targetCatalog.name),1),N(" ("+T(a.targetCatalog.category)+") catalog?",1)]),b[2]||(b[2]=e("p",{class:"text-muted"},"This action cannot be undone.",-1))]),e("div",io,[e("button",{type:"button",class:"btn btn-secondary",onClick:f},"Cancel"),e("button",{type:"button",class:"btn btn-danger",onClick:I,disabled:v.value},[v.value?(u(),p("span",co)):P("",!0),N(" "+T(v.value?"Deleting...":"Delete"),1)],8,ro)])])])],512))}}),mo={class:"modal-content"},po={class:"modal-body"},vo={class:"row"},go={class:"col-lg-12"},fo={class:"mb-3"},bo={class:"row"},ho={class:"col-lg-12"},yo={class:"mb-3"},_o={class:"row"},ko={class:"col-lg-12"},wo={class:"mb-3"},Co=["value"],$o={class:"modal-footer"},To=z({__name:"uploadForm",props:{sourceData:{}},emits:["uploaded","close"],setup(H,{expose:A,emit:d}){const U=W(),_=H,r=d,v=m({path:"",sourceType:"",name:"",tag:""});X(()=>{var n,i;return[(n=_.sourceData)==null?void 0:n.sourceType,(i=_.sourceData)==null?void 0:i.name]},()=>{var n,i,h,D,E;(n=_.sourceData)!=null&&n.sourceType&&(v.value.sourceType=(i=_.sourceData)==null?void 0:i.sourceType),(h=_.sourceData)!=null&&h.name&&(v.value.name=(D=_.sourceData)==null?void 0:D.name,console.log(v.value.sourceType),v.value.sourceType.toUpperCase()=="DOCKERHUB"?f((E=_.sourceData)==null?void 0:E.name):v.value.sourceType.toUpperCase()=="ARTIFACTHUB"&&C(_.sourceData))},{immediate:!0});const g=m([]);me(()=>{M()});const M=()=>{v.value={path:"",sourceType:"",name:"",tag:""},g.value=[]},f=async n=>{var D;const i={path:((D=_.sourceData)==null?void 0:D.id)||""},{data:h}=await Ue(i);g.value=[],h.length>0&&h.forEach(E=>{g.value.push({key:E.name,value:E.name})})},C=async n=>{console.log("sourceData",n);const i={kind:"helm",repository:n.repository.name,packageName:n.name},{data:h}=await Ie(i);g.value=[],h.length>0&&h.forEach(D=>{g.value.push({key:D.version,value:D.version})})},I=()=>{if(!v.value.tag.trim()){U.error("Tag is required.");return}const n=be.cloneDeep(_.sourceData);n.tag=v.value.tag,n.sourceType=v.value.sourceType,n.name=v.value.name,r("uploaded",n),M(),w()},$=()=>{w()},a=()=>{M();const n=document.getElementById("upload-form-modal");if(n)try{const i=window.bootstrap;i&&i.Modal?new i.Modal(n).show():b()}catch(i){console.warn("Failed to show modal with Bootstrap, using fallback:",i),b()}},b=()=>{const n=document.getElementById("upload-form-modal");if(n){document.querySelectorAll(".modal-backdrop").forEach(D=>D.remove()),n.classList.add("show"),n.style.display="block",n.style.opacity="1",n.setAttribute("aria-hidden","false"),document.body.classList.add("modal-open");const h=document.createElement("div");h.className="modal-backdrop fade show",h.id="upload-modal-backdrop",document.body.appendChild(h)}},w=()=>{const n=document.getElementById("upload-form-modal");if(n)try{const i=window.bootstrap;if(i&&i.Modal){const h=i.Modal.getInstance(n);h?h.hide():k()}else k()}catch(i){console.warn("Failed to hide modal with Bootstrap, using fallback:",i),k()}},k=()=>{const n=document.getElementById("upload-form-modal");n&&(n.classList.remove("show","fade","in"),n.style.display="none",n.style.opacity="0",n.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.querySelectorAll(".modal-backdrop, #upload-modal-backdrop").forEach(h=>h.remove()),r("close"))};return me(()=>{M()}),A({show:a,hide:w}),(n,i)=>(u(),p("div",{class:"modal modal-blur fade",id:"upload-form-modal",tabindex:"-1",role:"dialog","aria-hidden":"true",onClick:$},[e("div",{class:"modal-dialog modal-lg modal-dialog-centered",role:"document",onClick:i[3]||(i[3]=re(()=>{},["stop"]))},[e("div",mo,[e("div",{class:"modal-header"},[i[4]||(i[4]=e("h5",{class:"modal-title"},"Upload Application",-1)),e("button",{type:"button",class:"btn-close",onClick:w,"aria-label":"Close"})]),e("div",po,[e("form",{onSubmit:re(I,["prevent"])},[e("div",vo,[e("div",go,[e("div",fo,[i[5]||(i[5]=e("label",{class:"form-label"},"Source Type",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=h=>v.value.sourceType=h),disabled:""},null,512),[[S,v.value.sourceType]])])])]),e("div",bo,[e("div",ho,[e("div",yo,[i[6]||(i[6]=e("label",{class:"form-label"},"Name",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=h=>v.value.name=h),disabled:""},null,512),[[S,v.value.name]])])])]),e("div",_o,[e("div",ko,[e("div",wo,[i[8]||(i[8]=e("label",{class:"form-label"},[N("Tag "),e("span",{class:"text-red"},"*")],-1)),y(e("select",{class:"form-select","onUpdate:modelValue":i[2]||(i[2]=h=>v.value.tag=h)},[i[7]||(i[7]=e("option",{value:""},"Select Tag",-1)),(u(!0),p(x,null,L(g.value,h=>(u(),p("option",{value:h.value,key:h.key},T(h.value),9,Co))),128))],512),[[Y,v.value.tag]]),i[9]||(i[9]=e("small",{class:"form-hint"},"Please enter the tag for this catalog.",-1))])])])],32)]),e("div",$o,[e("button",{type:"button",class:"btn btn-link link-secondary",onClick:w}," Cancel "),e("button",{type:"submit",class:"btn btn-primary ms-auto",onClick:I},[R(O(We),{class:"icon"}),i[10]||(i[10]=N(" Upload "))])])])])]))}}),Mo=fe(To,[["__scopeId","data-v-3e6265d5"]]),So={ref:"sofwareCatalog"},Uo={class:"row"},Io={class:"col-lg-9"},Ro={class:"card"},Ao={class:"list-group card-list-group",id:"sc-list-group"},Do={class:"row g-2 align-items-center"},xo={class:"col-auto me-3"},Vo=["src"],Eo={key:1,src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},Po=["onClick"],Lo={class:"text-muted"},No={class:"col-auto text-muted"},Ho={class:"d-flex justify-content-end"},Bo={class:"mouse-hover"},Ko={class:"d-flex justify-content-end"},Oo=["id"],Go={class:"accordion-body pt-0"},zo=["innerHTML"],Fo=["id"],qo=["onClick"],jo=["id"],Yo=["id"],Wo={class:"btn btn-sm",style:{"margin-right":"5px"}},Jo={class:"btn btn-sm",style:{"margin-right":"5px"}},Qo={class:"btn btn-sm",style:{"margin-right":"5px"}},Xo={class:"col-lg-3"},Zo={class:"input-icon mb-3"},es={class:"input-icon-addon"},ts={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},as={class:"row row-cards",id:"resultDockerHubSearch"},os={class:"card"},ss={class:"row row-0"},ls={class:"col-auto"},ns=["src"],is={class:"col"},ds={class:"card-body"},rs=["href"],cs={class:"text-muted"},us={class:"col-auto lh-1"},ms={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},ps={class:"mt-5"},vs={key:0,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},gs={class:"row row-cards",id:"resultArtifactHubSearch"},fs={class:"card"},bs={class:"row row-0"},hs={class:"col"},ys={class:"card-body"},_s=["href"],ks={class:"text-muted"},ws={class:"col-auto lh-1"},Cs={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},$s=z({__name:"softwareCatalogList",setup(H){const A=W(),d=m([]),U=m(null),_=m(null),r=m({}),v=m("new"),g=m({}),M=m(""),f=m({}),C=m(null),I=m(null),$=m({}),a=m(""),b=m([]),w=m([]),k=m("");Z(async()=>{a.value="",i(),document.addEventListener("click",l=>{l.target.closest(".dropdown")||(k.value="")})});const n=()=>{v.value="new",_.value=null,r.value={},U.value=0,g.value={},M.value=""},i=async()=>{try{await Re(a.value).then(({data:l})=>{be.forEach(l,function(c){c.refData=h(c.catalogRefs),c.isShow=!1}),d.value=l})}catch(l){console.log(l),A.error("Unable to retrieve data.")}},h=l=>l.reduce((c,o)=>(c[o.refType]||(c[o.refType]=[]),c[o.refType].push(o),c),{}),D=async l=>{l.keyCode==13&&(await E(),await J())},E=async()=>{b.value=[];try{const{data:l}=await De(a.value);for(let c=0;c<3;c++)b.value.push(l.results[c])}catch(l){console.log(l),A.error("Unable to retrieve data.")}},J=async()=>{w.value=[];try{const{data:l}=await xe(a.value);for(let c=0;c<3;c++)w.value.push(l.packages[c])}catch(l){console.log(l),A.error("Unable to retrieve data.")}},B=l=>{const c=d.value.find(o=>o.id===l);_.value=l,r.value=c||{},v.value="update"},ee=l=>{f.value=l,C.value&&C.value.show()},ne=async l=>{await i()},ie=()=>{f.value={}},de=async l=>{d.value[l].isShow=!d.value[l].isShow},te=(l,c)=>Object.prototype.hasOwnProperty.call(l,c),F=l=>{window.open(l)},Q=l=>l.replace(/\\n|\n/g,"<br/>"),q=(l,c)=>{$.value=l,$.value.sourceType=c,I.value&&I.value.show()},j=async l=>{if(l.sourceType=="DockerHub"){l.createdAt=l.created_at,l.updatedAt=l.updated_at,l.shortDescription=l.short_description,l.starCount=l.star_count,l.ratePlans=l.rate_plans,delete l.created_at,delete l.updated_at,delete l.short_description,delete l.star_count,delete l.rate_plans;const{data:c}=await Ve(l)}else if(l.sourceType=="ArtifactHub"){const{data:c}=await Ee(l)}A.success("Software catalog uploaded successfully!")},ae=()=>{$.value={sourceType:"",name:"",sourceData:{}}};return(l,c)=>(u(),p(x,null,[e("div",So,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[c[1]||(c[1]=e("h2",{class:"mb-0"},"Catalog",-1)),e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block",style:{"margin-right":"315px"},"data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:n}," Regist ")]),e("div",Uo,[e("div",Io,[e("div",Ro,[e("div",Ao,[(u(!0),p(x,null,L(d.value,(o,t)=>(u(),p("div",{class:"list-group-item",key:t},[e("div",Do,[e("div",xo,[o.logoUrlLarge?(u(),p("img",{key:0,src:o.logoUrlLarge,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,Vo)):(u(),p("img",Eo))]),e("div",{class:"col",onClick:s=>de(t)},[N(T(o.name)+" ",1),e("div",Lo,T(o.summary),1)],8,Po),e("div",No,[e("div",Ho,[e("div",Bo,[R(O(Fe),{class:"me-2 cursor-pointer",size:"15","stroke-width":"2","data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:s=>B(o.id)},null,8,["onClick"]),R(O(Ye),{class:"cursor-pointer",size:"15","stroke-width":"2",onClick:s=>ee(o)},null,8,["onClick"])])]),e("div",Ko,T(o.category),1)]),e("div",{id:"accordion_"+o.id,class:"accordion-collapse collapse",style:He([o.isShow?{display:"block"}:{display:"none"}])},[e("div",Go,[e("div",{class:"mt-3 mb-5",innerHTML:Q(o.description)},null,8,zo),e("div",null,[c[2]||(c[2]=e("strong",null,"Ref Information",-1)),e("ul",{id:`${t}-entity-ul`},[te(o.refData,"HOMEPAGE")?(u(!0),p(x,{key:0},L(o.refData.HOMEPAGE,(s,K)=>(u(),p("li",{key:K},[e("a",{class:"btn",onClick:V=>F(s.refValue)},T(s.refValue),9,qo)]))),128)):P("",!0)],8,Fo),c[3]||(c[3]=e("strong",null,"TAGS",-1)),e("ul",{id:`${t}-tag-ul`},[te(o.refData,"TAG")?(u(!0),p(x,{key:0},L(o.refData.TAG,(s,K)=>(u(),p("span",{key:K},"#"+T(s.refValue)+"  ",1))),128)):P("",!0)],8,jo),c[4]||(c[4]=e("strong",null,"Recommended Spec",-1)),e("ul",{id:`${t}-tag-ul`},[o.recommendedCpu&&o.recommendedMemory&&o.recommendedDisk?(u(),p(x,{key:0},[e("button",Wo," CPU : "+T(o.recommendedCpu)+" Core ",1),e("button",Jo," MEMORY : "+T(o.recommendedMemory)+" GB ",1),e("button",Qo," DISK : "+T(o.recommendedDisk)+" GB ",1)],64)):P("",!0)],8,Yo)])])],12,Oo)])]))),128))])])]),e("div",Xo,[e("div",Zo,[e("span",es,[R(O(Ae),{class:"icon",width:"24",height:"24","stroke-width":"2"})]),y(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:D,"onUpdate:modelValue":c[0]||(c[0]=o=>a.value=o),id:"inputCatalogSearch"},null,544),[[S,a.value]])]),c[7]||(c[7]=e("h3",{class:"mb-3"}," DOCKERHUB ",-1)),b.value.length==0?(u(),p("div",ts," There are no related Container Images found. ")):P("",!0),e("div",as,[(u(!0),p(x,null,L(b.value,(o,t)=>(u(),p("div",{class:"col-md-6 col-lg-12",key:t},[e("div",os,[e("div",ss,[e("div",ls,[e("img",{src:o.logo_url.large,class:"rounded-start ms-2",alt:"Shape of You",width:"80",height:"80"},null,8,ns)]),e("div",is,[e("div",ds,[e("a",{href:"https://hub.docker.com/search?q="+a.value,target:"_blank"},T(o.name),9,rs),e("div",cs,T(o.short_description.length>30?o.short_description.substring(0,30)+"...":""),1)])]),e("div",us,[e("div",ms,[R(O(ve),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:s=>q(o,"DockerHub")},null,8,["onClick"])])])])])]))),128))]),e("div",ps,[c[6]||(c[6]=e("h3",{class:"mb-3"}," ARTIFACTHUB ",-1)),w.value.length==0?(u(),p("div",vs," There are no related Helm Charts found. ")):P("",!0),e("div",gs,[(u(!0),p(x,null,L(w.value,(o,t)=>(u(),p("div",{class:"col-md-6 col-lg-12",key:t},[e("div",fs,[e("div",bs,[c[5]||(c[5]=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1)),e("div",hs,[e("div",ys,[e("a",{href:"https://artifacthub.io/packages/search?ts_query_web="+a.value+"&sort=relevance&page=1",target:"_blank"},T(o.name),9,_s),e("div",ks,T(o.description.length>30?o.description.substring(0,30)+"...":""),1)])]),e("div",ws,[e("div",Cs,[R(O(ve),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:s=>q(o,"ArtifactHub")},null,8,["onClick"])])])])])]))),128))])])])])],512),R(uo,{ref_key:"deleteConfirmModal",ref:C,"target-catalog":f.value,onDeleted:ne,onClose:ie},null,8,["target-catalog"]),R(oo,{mode:v.value,"catalog-id":_.value,"catalog-info":r.value,onCreated:i,onUpdated:i},null,8,["mode","catalog-id","catalog-info"]),R(Mo,{ref_key:"uploadFormModal",ref:I,"source-data":$.value,onUploaded:j,onClose:ae},null,8,["source-data"])],64))}}),Ts={class:"page",ref:"sofwareCatalog"},Ms={class:"page-wrapper"},Ss={class:"page-header d-print-none"},Us={class:"container-xxl"},Is={class:"row g-2 align-items-center"},Rs={class:"col-auto ms-auto"},As={class:"page-body"},Ds={class:"container-xxl"},xs={class:"row"},Vs={class:"col-lg-12"},Es={class:"card"},Ps={class:"card-header"},Ls={class:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs"},Ns={class:"nav-item"},Hs={href:"#tabs-catalog",class:"nav-link active","data-bs-toggle":"tab"},Bs={class:"nav-item"},Ks={href:"#tabs-status",class:"nav-link","data-bs-toggle":"tab"},Os={class:"nav-item"},Gs={href:"#tabs-repository",class:"nav-link","data-bs-toggle":"tab"},zs={class:"card-body"},Fs={class:"tab-content"},qs={class:"tab-pane active show",id:"tabs-catalog"},js={class:"tab-pane",id:"tabs-status"},Ys={class:"tab-pane",id:"tabs-repository"},nl=z({__name:"SoftwareCatalog",setup(H){const A=Be(),d=m(""),U=m(""),_=m(!1),r=m("");Z(async()=>{d.value=A.getNsId()});const v=f=>{U.value=f},g=f=>{r.value=f,_.value=!0},M=()=>{_.value=!1,r.value=""};return(f,C)=>(u(),p(x,null,[e("div",Ts,[e("div",Ms,[e("div",Ss,[e("div",Us,[e("div",Is,[C[1]||(C[1]=e("div",{class:"col d-flex"},[e("h2",{class:"page-title"},"Software Catalog")],-1)),e("div",Rs,[e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:C[0]||(C[0]=I=>v("Application Installation"))}," DEPLOY ")])])])]),e("div",As,[e("div",Ds,[e("div",xs,[e("div",Vs,[e("div",Es,[e("div",Ps,[e("ul",Ls,[e("li",Ns,[e("a",Hs,[R(O(ze),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),C[2]||(C[2]=N(" Catalog "))])]),e("li",Bs,[e("a",Ks,[R(O(Ge),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),C[3]||(C[3]=N(" Apps Status "))])]),e("li",Os,[e("a",Gs,[R(O(qe),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),C[4]||(C[4]=N(" Repository "))])])])]),e("div",zs,[e("div",Fs,[e("div",qs,[e("div",null,[R($s,{nsId:d.value},null,8,["nsId"])])]),e("div",js,[e("div",null,[R(mt)])]),e("div",Ys,[e("div",null,[_.value?(u(),pe(Oe,{key:1,embedded:!0,"repository-name":r.value,onBackToList:M},null,8,["repository-name"])):(u(),pe(Ke,{key:0,embedded:!0,onOpenDetail:g}))])])])])])])])])])])],512),R(Pe,{"ns-id":d.value,title:U.value},null,8,["ns-id","title"])],64))}});export{nl as default};
