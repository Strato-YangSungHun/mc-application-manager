import{d as Y,u as q,r as u,c as ee,w as te,o as ae,z as U,a,b as e,e as k,g as O,v as j,F as $,f as D,s as P,h as o,p as se,k as le,l as W,j as N,t as _,i as X,A as ie,B as ce}from"./index-TL2lCG0H.js";import{_ as Z}from"./lodash-BW_D7Dbg.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x=p=>(se("data-v-d9b4fd3d"),p=p(),le(),p),de={class:"modal",id:"modal-form",tabindex:"-1"},re={class:"modal-dialog modal-lg",role:"document"},ue={class:"modal-content"},pe=x(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Create New Software catalog"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),me={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},_e={class:"mb-3"},he=x(()=>e("label",{class:"form-label"},"Title",-1)),ve={class:"mb-3"},ge=x(()=>e("label",{class:"form-label"},"Summary",-1)),fe={class:"mb-3"},be=x(()=>e("label",{class:"form-label"},"Icon",-1)),we={class:"mb-3"},ye=x(()=>e("label",{class:"form-label"},"Category",-1)),ke=W('<option value="SERVER" selected data-v-d9b4fd3d>SERVER</option><option value="WAS" data-v-d9b4fd3d>WAS</option><option value="DB" data-v-d9b4fd3d>DB</option><option value="UTIL" data-v-d9b4fd3d>UTIL</option><option value="OBSERVABILITY" data-v-d9b4fd3d>OBSERVABILITY</option>',5),$e=[ke],Ce={class:"mb-3"},xe=x(()=>e("label",{class:"form-label"},"Description",-1)),Ie={class:"col-lg-6"},Se={class:"mb-3"},Ve=x(()=>e("label",{class:"form-label"},"Reference",-1)),Me=["onUpdate:modelValue"],Ue=W('<option value="URL" data-v-d9b4fd3d>URL</option><option value="MANIFEST" data-v-d9b4fd3d>MANIFEST</option><option value="WORKFLOW" data-v-d9b4fd3d>WORKFLOW</option><option value="IMAGE" data-v-d9b4fd3d>IMAGE</option><option value="HOMEPAGE" data-v-d9b4fd3d>HOMEPAGE</option><option value="TAG" data-v-d9b4fd3d>TAG</option><option value="ETC" data-v-d9b4fd3d>ETC</option>',7),De=[Ue],Te={class:"col-lg-6"},Ae={class:"mb-3"},Ne=x(()=>e("label",{class:"form-label"}," ",-1)),Le=["onUpdate:modelValue"],He={class:"mb-3"},Re={class:"input-form"},Ee=["onUpdate:modelValue"],Be={class:"btn-list"},je={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-plus",style:{margin:"0 !important"}},Fe=x(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Oe=x(()=>e("path",{d:"M12 5l0 14"},null,-1)),Ge=x(()=>e("path",{d:"M5 12l14 0"},null,-1)),ze=[Fe,Oe,Ge],Pe=["onClick"],We={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-minus",style:{margin:"0 !important"}},Ke=x(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Ye=x(()=>e("path",{d:"M5 12l14 0"},null,-1)),qe=[Ke,Ye],Je=x(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1)),Qe=Y({__name:"softwareCatalogForm",props:{mode:{},catalogIdx:{}},emits:["get-list"],setup(p,{emit:T}){const r=q(),i=u({}),h=u([]),C=u([]),I=window.location.host.split(":"),l=window.location.protocol+"//"+I[0]+":18084",c=T,m=p,S=ee(()=>m.catalogIdx);te(S,async()=>{await g()}),ae(async()=>{await g()});const g=async()=>{m.mode=="update"?await V():(i.value={catalogIdx:null,catalogTitle:"",catalogDescription:"",catalogSummary:"",catalogCategory:"",catalogRefData:[]},h.value=[],h.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"url"}))},V=async()=>{try{const f=await U.get(l+"/catalog/software/"+m.catalogIdx);console.log("response : ",f),i.value=f.data,h.value=f.data.catalogRefData}catch(f){console.log(f),r.error("데이터를 가져올 수 없습니다.")}},y=()=>{console.log("addRef"),h.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:0,referenceValue:"",referenceDescription:"",referenceType:"url"})},R=f=>{h.value.length!==1&&h.value.splice(f,1)},E=f=>{C.value=f.target.files[0]},L=async()=>{const f=new FormData;if(f.append("iconFile",C.value),i.value.catalogRefData=h.value,f.append("catalogDto",new Blob([JSON.stringify(i.value)],{type:"application/json"})),m.mode=="new"){const b=await U.post(l+"/catalog/software",f,{headers:{"Content-Type":"multipart/form-data"}});b.data?b.data.data==null?(r.error("등록 할 수 없습니다."),g()):(r.success("등록되었습니다."),c("get-list")):(r.error("등록 할 수 없습니다."),g())}else(await U.put(l+"/catalog/software",f,{headers:{"Content-Type":"multipart/form-data"}})).data?(r.success("수정되었습니다."),c("get-list")):(r.error("수정 할 수 없습니다."),g())};return(f,b)=>(o(),a("div",de,[e("div",re,[e("div",ue,[pe,e("div",me,[e("div",_e,[he,k(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"Application name","onUpdate:modelValue":b[0]||(b[0]=w=>i.value.catalogTitle=w)},null,512),[[O,i.value.catalogTitle]])]),e("div",ve,[ge,k(e("input",{type:"text",class:"form-control",id:"sc-summary",name:"summary",placeholder:"Application summary","onUpdate:modelValue":b[1]||(b[1]=w=>i.value.catalogSummary=w)},null,512),[[O,i.value.catalogSummary]])]),e("div",fe,[be,e("input",{type:"file",class:"form-control",id:"sc-icon",name:"icon",placeholder:"Icon File",onChange:E},null,32)]),e("div",we,[ye,k(e("select",{class:"form-select",id:"sc-category","onUpdate:modelValue":b[2]||(b[2]=w=>i.value.catalogCategory=w)},$e,512),[[j,i.value.catalogCategory]])]),e("div",Ce,[xe,k(e("textarea",{class:"form-control",rows:"5",id:"sc-desc","onUpdate:modelValue":b[3]||(b[3]=w=>i.value.catalogDescription=w)},null,512),[[O,i.value.catalogDescription]])]),(o(!0),a($,null,D(h.value,(w,F)=>(o(),a("div",{class:"row",id:"sc-ref",key:F},[e("div",Ie,[e("div",Se,[Ve,k(e("select",{class:"form-select",id:"sc-reference-1","onUpdate:modelValue":A=>w.referenceType=A},De,8,Me),[[j,w.referenceType]])])]),e("div",Te,[e("div",Ae,[Ne,k(e("input",{type:"text",class:"form-control",id:"sc-ref-value-1",name:"refValue",placeholder:"Ref value","onUpdate:modelValue":A=>w.referenceValue=A},null,8,Le),[[O,w.referenceValue]])])]),e("div",He,[e("div",Re,[k(e("input",{type:"text",class:"form-control",style:{width:"80% !important"},id:"sc-ref-desc-1",name:"refDescription",placeholder:"Ref Description","onUpdate:modelValue":A=>w.referenceDescription=A},null,8,Ee),[[O,w.referenceDescription]]),e("div",Be,[e("button",{class:"btn btn-primary",onClick:y,style:{"text-align":"center !important"}},[(o(),a("svg",je,ze))]),e("button",{class:"btn btn-primary",onClick:A=>R(F)},[(o(),a("svg",We,qe))],8,Pe)])])])]))),128))]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:g}," Cancel "),e("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:L},[Je,P(" Create New Software catalog ")])])])])]))}}),Xe=ne(Qe,[["__scopeId","data-v-d9b4fd3d"]]),Ze={class:"modal",id:"softwareCatalogLog",tabindex:"-1"},et={class:"modal-dialog modal-xl",role:"document"},tt={class:"modal-content"},at=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ot={class:"modal-body text-left py-4"},st={class:"mb-5"},lt={key:0,class:"spinner-border",role:"status"},nt=e("span",{class:"visually-hidden"},"Loading...",-1),it=[nt],ct={key:0},dt=e("p",{class:"text-secondary"},"No Data",-1),rt=[dt],ut={class:"card mb-3"},pt=["onClick"],mt={class:"card-title"},_t={key:0,class:"card-body"},ht=["value"],vt=Y({__name:"softwareCatalogLog",props:{jobName:{}},setup(p){q();const T=p,r=u(!1),i=window.location.host.split(":"),h=window.location.protocol+"//"+i[0]+":18084",C=ee(()=>T.jobName);te(C,async()=>{r.value=!1,await l()});const I=u([]),l=async()=>{I.value=[];const g=await U.get(h+"/ape/log/"+C.value);I.value=g.data.data,r.value=!0},c=()=>{I.value=[],m.value=1},m=u(1),S=g=>{m.value===g?m.value=0:m.value=g};return(g,V)=>(o(),a("div",Ze,[e("div",et,[e("div",tt,[at,e("div",ot,[e("h3",st,[P(" Build Log "),r.value?N("",!0):(o(),a("div",lt,it))]),e("div",null,[I.value.length<=0?(o(),a("div",ct,rt)):(o(!0),a($,{key:1},D(I.value,y=>(o(),a("div",{key:y.buildIdx},[e("div",ut,[e("div",{class:"card-header",onClick:R=>S(y.buildIdx),style:{cursor:"pointer"}},[e("h3",mt,_(y.buildIdx),1)],8,pt),m.value===y.buildIdx?(o(),a("div",_t,[e("textarea",{value:y.buildLog,disabled:"",style:{width:"100%"},rows:"20"},null,8,ht)])):N("",!0)])]))),128))])]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:c}," Cancel ")])])])]))}}),H=p=>(se("data-v-5454572a"),p=p(),le(),p),gt={class:"modal",id:"install-form",tabindex:"-1"},ft={class:"modal-dialog modal-lg",role:"document"},bt={class:"modal-content"},wt={class:"modal-header"},yt={class:"modal-title"},kt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},$t={class:"mb-3"},Ct=H(()=>e("label",{class:"form-label"},"Namespace",-1)),xt={key:0,class:"text-muted"},It={key:1,class:"text-muted"},St=["value"],Vt={value:"selectNsId"},Mt={class:"mb-3"},Ut=H(()=>e("label",{class:"form-label"},"MCI Name",-1)),Dt={key:0,class:"text-muted"},Tt={key:1,class:"text-muted"},At=["disabled"],Nt=["value"],Lt={class:"mb-3"},Ht=H(()=>e("label",{class:"form-label"},"VM Name",-1)),Rt=H(()=>e("p",{class:"text-muted"},"Select the virtual machine (VM) within the chosen multi-cloud infrastructure where the application will be deployed",-1)),Et=["disabled"],Bt=["value"],jt={class:"mb-3"},Ft=H(()=>e("label",{class:"form-label"},"Application",-1)),Ot=H(()=>e("p",{class:"text-muted"},"applications to install (e.g. nginx,tomcat,mariadb,redis,grafana,prometheus)",-1)),Gt={class:"mb-3"},zt=H(()=>e("label",{class:"form-label"},"Namespace",-1)),Pt={key:0,class:"text-muted"},Wt={key:1,class:"text-muted"},Kt=["value"],Yt={value:"selectNsId"},qt={class:"mb-3"},Jt=H(()=>e("label",{class:"form-label"},"ClusterName",-1)),Qt={key:0,class:"text-muted"},Xt={key:1,class:"text-muted"},Zt=["disabled"],ea=["value"],ta={class:"mb-3"},aa=H(()=>e("label",{class:"form-label"},"Helm chart",-1)),oa=H(()=>e("p",{class:"text-muted"},"Helm Charts to Install (e.g. nginx,tomcat,mariadb,redis,grafana,prometheus)",-1)),sa=Y({__name:"applicationInstallationForm",props:{nsId:{},title:{}},setup(p){const T=window.location.host.split(":"),r=window.location.protocol+"//"+T[0]+":18084",i=q(),h=p,C=ee(()=>h.title),I=u(""),l=u(""),c=u(""),m=u([]),S=u([]),g=u([]),V=u(""),y=u(""),R=u([]),E=u(""),L=u("");te(C,async()=>{I.value=f(h.title),l.value=h.title,await b()}),ae(async()=>{await b()});const f=v=>v.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),b=async()=>{Z.isEmpty(h.nsId)?await w():c.value=h.nsId},w=async()=>{const v=await U.get(r+"/cbtumblebug/ns");m.value=v.data,m.value.length>0&&(c.value=m.value[0].name,l.value=="vm_application_install"||l.value=="vm_application_uninstall"?await F():await G()),Z.isEmpty(c.value)||(l.value=="vm_application_install"||l.value=="vm_application_uninstall"?await F():await G())},F=async()=>{const v=await U.get(r+"/cbtumblebug/ns/"+c.value+"/mci");S.value=v.data,S.value.length>0?(V.value=S.value[0].name,await A()):V.value=""},A=async()=>{const v=await U.get(r+"/cbtumblebug/ns/"+c.value+"/mci/"+V.value);g.value=v.data.vm,S.value.length>0?y.value=g.value[0].name:y.value=""},G=async()=>{const v=await U.get(r+"/cbtumblebug/ns/"+c.value+"/k8scluster");R.value=v.data,R.value.length>0?E.value=R.value[0].name:E.value=""},z=async()=>{await F()},J=async()=>{await A()},K=async()=>{await G()},Q=async()=>{if(l.value=="vm_application_install"||l.value=="vm_application_uninstall"){let v="";l.value=="vm_application_install"?v="/ape/vm/install":v="/ape/vm/uninstall";const d=L.value.split(",").map(n=>n.trim()),t={namespace:c.value,mciName:V.value,vmName:y.value,applications:d},s=await U.post(r+v,t);s.data.code==200&&s.data.message?i.success(s.data.message):i.error(s.data.message)}else if(l.value=="helm_application_install"||l.value=="helm_application_uninstall"){let v="";l.value=="helm_application_install"?v="/ape/helm/install":v="/ape/helm/uninstall";const d=L.value.split(",").map(n=>n.trim()),t={namespace:c.value,clusterName:E.value,helmCharts:d},s=await U.post(r+v,t);s.data.code==200&&s.data.message?i.success(s.data.message):i.error(s.data.message)}};return(v,d)=>(o(),a("div",gt,[e("div",ft,[e("div",bt,[e("div",wt,[e("h5",yt,_(l.value=="vm_application_install"?"Application installation for VM":l.value=="vm_application_uninstall"?"Application uninstallation for VM":l.value=="helm_application_install"?"Application installation for k8s":l.value=="helm_application_uninstall"?"Application uninstallation for k8s":""),1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:b})]),e("div",kt,[l.value=="vm_application_install"||l.value=="vm_application_uninstall"?(o(),a($,{key:0},[e("div",$t,[Ct,l.value=="vm_application_install"?(o(),a("p",xt,"Select the namespace where the application will be installed")):l.value=="vm_application_uninstall"?(o(),a("p",It,"Select the namespace where the application will be uninstalled")):N("",!0),m.value.length>0?k((o(),a("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":d[0]||(d[0]=t=>c.value=t),onChange:z},[(o(!0),a($,null,D(m.value,t=>(o(),a("option",{value:t.name,key:t.name},_(t.name),9,St))),128))],544)),[[j,c.value]]):k((o(),a("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":d[1]||(d[1]=t=>c.value=t),onChange:z},[e("option",Vt,_(c.value),1)],544)),[[j,c.value]])]),e("div",Mt,[Ut,l.value=="vm_application_install"?(o(),a("p",Dt,"Select the multi-cloud infrastructure information where the application will be deployed")):l.value=="vm_application_uninstall"?(o(),a("p",Tt,"Remove the application and associated resources from the multi-cloud infrastructure")):N("",!0),k(e("select",{class:"form-select",id:"mci-name",disabled:c.value=="","onUpdate:modelValue":d[2]||(d[2]=t=>V.value=t),onChange:J},[(o(!0),a($,null,D(S.value,t=>(o(),a("option",{value:t.id,key:t.name},_(t.name),9,Nt))),128))],40,At),[[j,V.value]])]),e("div",Lt,[Ht,Rt,k(e("select",{class:"form-select",id:"mci-name",disabled:V.value=="","onUpdate:modelValue":d[3]||(d[3]=t=>y.value=t)},[(o(!0),a($,null,D(g.value,t=>(o(),a("option",{value:t.id,key:t.name},_(t.name),9,Bt))),128))],8,Et),[[j,y.value]])]),e("div",jt,[Ft,Ot,k(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"nginx, tomcat ...","onUpdate:modelValue":d[4]||(d[4]=t=>L.value=t)},null,512),[[O,L.value]])])],64)):l.value=="helm_application_install"||l.value=="helm_application_uninstall"?(o(),a($,{key:1},[e("div",Gt,[zt,l.value=="helm_application_install"?(o(),a("p",Pt,"Select the namespace where the application will be installed")):l.value=="helm_application_uninstall"?(o(),a("p",Wt,"Select the namespace where the application will be uninstalled")):N("",!0),m.value.length>0?k((o(),a("select",{key:2,class:"form-select",id:"namesapce","onUpdate:modelValue":d[5]||(d[5]=t=>c.value=t),onChange:K},[(o(!0),a($,null,D(m.value,t=>(o(),a("option",{value:t.name,key:t.name},_(t.name),9,Kt))),128))],544)),[[j,c.value]]):k((o(),a("select",{key:3,class:"form-select",id:"namesapce","onUpdate:modelValue":d[6]||(d[6]=t=>c.value=t),onChange:z},[e("option",Yt,_(c.value),1)],544)),[[j,c.value]])]),e("div",qt,[Jt,l.value=="helm_application_install"?(o(),a("p",Qt,"Select the name of the cluster where the application will be deployed")):l.value=="helm_application_uninstall"?(o(),a("p",Xt,"Remove the application and associated resources from the multi-cloud infrastructure")):N("",!0),k(e("select",{class:"form-select",id:"mci-name",disabled:c.value=="","onUpdate:modelValue":d[7]||(d[7]=t=>E.value=t)},[(o(!0),a($,null,D(R.value,t=>(o(),a("option",{value:t.id,key:t.name},_(t.name),9,ea))),128))],8,Zt),[[j,E.value]])]),e("div",ta,[aa,oa,k(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"nginx, tomcat ...","onUpdate:modelValue":d[8]||(d[8]=t=>L.value=t)},null,512),[[O,L.value]])])],64)):N("",!0)]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:b}," Cancel "),e("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:Q}," RUN ")])])])]))}}),la=ne(sa,[["__scopeId","data-v-5454572a"]]);/*!
* Tabler v1.0.0-beta19 (https://tabler.io)
* @version 1.0.0-beta19
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
*/(function(p){typeof define=="function"&&define.amd?define(p):p()})(function(){var p,T="tablerTheme",r=new Proxy(new URLSearchParams(window.location.search),{get:function(h,C){return h.get(C)}});if(r.theme)localStorage.setItem(T,r.theme),p=r.theme;else{var i=localStorage.getItem(T);p=i||"light"}p==="dark"?document.body.setAttribute("data-bs-theme",p):document.body.removeAttribute("data-bs-theme")});const na={class:"page",ref:"sofwareCatalog"},ia={class:"page-wrapper"},ca=e("div",{class:"col"},[e("h2",{class:"page-title"},"Software catalog")],-1),da=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1),ra={class:"page-body"},ua={class:"container-xl"},pa={class:"row"},ma={class:"col-lg-8"},_a={class:"card"},ha={class:"list-group card-list-group",id:"sc-list-group"},va={class:"row g-2 align-items-center"},ga={class:"col-auto fs-3"},fa={class:"col-auto"},ba=["src"],wa=["onClick"],ya={class:"text-muted"},ka={class:"col-auto text-muted"},$a={class:"col-auto lh-1"},Ca={class:"dropdown"},xa=W('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),Ia={class:"dropdown-menu dropdown-menu-end"},Sa=["onClick"],Va=["id"],Ma={class:"accordion-body pt-0"},Ua=e("br",null,null,-1),Da=e("br",null,null,-1),Ta=["onClick"],Aa=["onClick"],Na=e("br",null,null,-1),La=e("br",null,null,-1),Ha=e("strong",null,"관련 정보",-1),Ra=["id"],Ea=["onClick"],Ba=e("strong",null,"TAGS",-1),ja=["id"],Fa={class:"col-lg-4"},Oa=e("div",null,[e("br")],-1),Ga=e("h3",{class:"mb-3"},"dockerHub search",-1),za={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},Pa={class:"row row-cards",id:"resultDockerHubSearch"},Wa={class:"card"},Ka={class:"row row-0"},Ya={class:"col-auto"},qa=["src"],Ja={class:"col"},Qa={class:"card-body"},Xa={href:"",target:"_blank"},Za={class:"text-muted"},eo=W('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),to=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),ao=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),oo=e("div",{style:{"margin-bottom":"20px"}}," ",-1),so=e("h3",{class:"mb-3"},"artifactHub search",-1),lo={key:1,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},no={class:"row row-cards",id:"resultArtifactHubSearch"},io={class:"card"},co={class:"row row-0"},ro=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1),uo={class:"col"},po={class:"card-body"},mo={href:"",target:"_blank"},_o={class:"text-muted"},ho=W('<a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a>',1),vo=e("a",{class:"dropdown-item",href:"#"}," softwareCatalog로 내용 입력 ",-1),go=e("a",{class:"dropdown-item",href:"#"}," file/image를 nexus로 복제 ",-1),yo=Y({__name:"SoftwareCatalogList",setup(p){const T=q(),r=u([]),i=u(""),h=window.location.host.split(":"),C=window.location.protocol+"//"+h[0]+":18084",I=u([]),l=u([]),c=u(0),m=u(""),S=u("new"),g=u(""),V=u("");ae(async()=>{i.value="",window.addEventListener("message",async function(t){const s=t.data;s.projectInfo&&(g.value=s.projectInfo.ns_id)}),await y()});const y=async()=>{try{const t=await U.get(C+"/catalog/software/?title="+i.value);Z.forEach(t.data,function(s){s.catalogIcon=C+s.catalogIcon,s.refData=R(s.catalogRefData),s.isShow=!1}),r.value=t.data}catch(t){console.log(t),T.error("데이터를 가져올 수 없습니다.")}},R=t=>t.reduce((s,n)=>(s[n.referenceType]||(s[n.referenceType]=[]),s[n.referenceType].push(n),s),{}),E=async t=>{t.keyCode==13&&(await y(),await L(),await f())},L=async()=>{try{const t=await U.get(C+"/search/dockerhub/"+i.value);for(let s=0;s<3;s++)I.value.push(t.data.data.results[s])}catch(t){console.log(t),T.error("데이터를 가져올 수 없습니다.")}},f=async()=>{try{const t=await U.get(C+"/search/artifacthub/"+i.value);for(let s=0;s<3;s++)l.value.push(t.data.data.packages[s])}catch(t){console.log(t),T.error("데이터를 가져올 수 없습니다.")}},b=async t=>{r.value[t].isShow=!r.value[t].isShow},w=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),F=t=>{window.open(t)},A=t=>{S.value="update",c.value=t},G=()=>{S.value="new",c.value=0},z=()=>{let t=`https://hub.docker.com/search?q=${i.value}`;window.open(t,"_blank")},J=()=>{let t=`https://artifacthub.io/packages/search?ts_query_web=${i.value}&sort=relevance&page=1`;window.open(t,"_blank")},K=(t,s)=>s.includes(t),Q=t=>t.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),v=t=>{m.value=t},d=t=>{V.value=t};return(t,s)=>(o(),a("div",na,[e("div",ia,[e("div",{class:"page-header d-print-none"},[e("div",{class:"container-xl"},[e("div",{class:"row g-2 align-items-center"},[ca,e("div",{class:"col-auto ms-auto"},[e("div",{class:"btn-list"},[e("a",{class:"btn btn-primary d-none d-sm-inline-block",onClick:G,"data-bs-toggle":"modal","data-bs-target":"#modal-form"},[da,P(" New ")])])])])])]),e("div",ra,[e("div",ua,[e("div",pa,[e("div",ma,[e("div",_a,[e("div",ha,[(o(!0),a($,null,D(r.value,(n,B)=>(o(),a("div",{class:"list-group-item",key:B},[e("div",va,[e("div",ga,_(B+1),1),e("div",fa,[e("img",{src:n.catalogIcon,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,ba)]),e("div",{class:"col",onClick:M=>b(B)},[P(_(n.catalogTitle)+" ",1),e("div",ya,_(n.catalogSummary),1)],8,wa),e("div",ka,_(n.catalogCategory),1),e("div",$a,[e("div",Ca,[xa,e("div",Ia,[e("a",{class:"dropdown-item",onClick:M=>A(n.catalogIdx),"data-bs-toggle":"modal","data-bs-target":"#modal-form"},"Update",8,Sa)])])]),e("div",{id:"accordion_"+n.catalogIdx,class:"accordion-collapse collapse",style:ie([n.isShow?{display:"block"}:{display:"none"}])},[e("div",Ma,[Ua,P(" "+_(n.catalogDescription)+" ",1),e("div",null,[Da,(o(!0),a($,null,D(n.refData.workflow,M=>(o(),a("div",{class:"btn-list",style:{width:"70%"},key:M.catalogRefIdx},[e("a",{class:ce(["btn",{"btn-outline-primary":K("install",M.referenceValue),"btn-outline-danger":K("uninstall",M.referenceValue)}]),style:{"margin-bottom":"10px"},onClick:oe=>d(M.referenceValue),"data-bs-toggle":"modal","data-bs-target":"#install-form"},_(Q(M.referenceValue)),11,Ta),e("button",{class:"btn btn-primary",style:{"text-align":"center !important","margin-bottom":"10px"},onClick:oe=>v(M.referenceValue),id:"log-btn","data-bs-toggle":"modal","data-bs-target":"#softwareCatalogLog"},"  LOG  ",8,Aa)]))),128)),Na,La,Ha,e("ul",{id:`${B}-entity-ul`},[w(n.refData,"HOMEPAGE")?(o(!0),a($,{key:0},D(n.refData.HOMEPAGE,M=>(o(),a("li",null,[e("a",{onClick:oe=>F(M.referenceValue),class:"btn"},_(M.referenceValue),9,Ea)]))),256)):N("",!0)],8,Ra),Ba,e("ul",{id:`${B}-tag-ul`},[w(n.refData,"TAG")?(o(!0),a($,{key:0},D(n.refData.TAG,M=>(o(),a("span",null,"#"+_(M.referenceValue)+"  ",1))),256)):N("",!0)],8,ja)])])],12,Va)])]))),128))])])]),e("div",Fa,[k(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:E,"onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),id:"inputCatalogSearch"},null,544),[[O,i.value]]),Oa,Ga,I.value.length==0?(o(),a("div",za,"검색된 관련 ContainerImage가 없습니다.")):N("",!0),e("div",Pa,[(o(!0),a($,null,D(I.value,(n,B)=>(o(),a("div",{class:"col-md-6 col-lg-12",key:B},[e("div",Wa,[e("div",Ka,[e("div",Ya,[e("img",{src:n.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,qa)]),e("div",Ja,[e("div",Qa,[e("a",Xa,_(n.name),1),e("div",Za,_(n.short_description.length>30?n.short_description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[eo,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:z}," 해당 페이지로 이동 "),to,ao])])])])])]))),128))]),oo,so,l.value.length==0?(o(),a("div",lo,"검색된 관련 HelmChart가 없습니다.")):N("",!0),e("div",no,[(o(!0),a($,null,D(l.value,(n,B)=>(o(),a("div",{class:"col-md-6 col-lg-12",key:B},[e("div",io,[e("div",co,[ro,e("div",uo,[e("div",po,[e("a",mo,_(n.name),1),e("div",_o,_(n.description.length>30?n.description.substring(0,30)+"...":""),1)])]),e("div",{class:"col-auto lh-1"},[e("div",{class:"dropdown"},[ho,e("div",{class:"dropdown-menu dropdown-menu-end"},[e("a",{class:"dropdown-item",onClick:J}," 해당 페이지로 이동 "),vo,go])])])])])]))),128))])])])])])]),X(Xe,{mode:S.value,"catalog-idx":c.value,onGetList:y},null,8,["mode","catalog-idx"]),X(vt,{"job-name":m.value},null,8,["job-name"]),X(la,{"ns-id":g.value,title:V.value},null,8,["ns-id","title"])],512))}});export{yo as default};
