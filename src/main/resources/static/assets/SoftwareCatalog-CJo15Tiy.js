import{c as W}from"./IconPlus-BULbZADL.js";import{g as Ce,s as $e,a as Me,b as Ie,c as xe,d as Se,u as Te,e as De,f as Re,h as Ue,i as Ae,j as Le,k as Ee,l as Pe,I as Ve,m as Ne,n as Be,o as He,p as Fe,A as Oe}from"./softwareCatalogForm.vue_vue_type_style_index_0_scoped_c6733d12_lang-0nfdFzu5.js";import{_ as Ke}from"./Tabulator.vue_vue_type_style_index_0_lang-D15F3QJS.js";import{d as J,u as X,c as de,r as g,a as r,b as e,l as K,j as P,t as i,e as $,v as Q,F as E,f as N,g as R,h as d,m as me,k as _e,n as O,o as re,i as A,p as G,q as ke,w as ue,s as ce,x as ge,y as be,z as fe,A as ze,B as qe,C as he}from"./index-DVNI8o7Y.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as we}from"./lodash-BTYbs7QX.js";import{_ as Ge}from"./RepositoryList.vue_vue_type_script_setup_true_lang-Do284A7j.js";import{_ as je}from"./RepositoryDetail.vue_vue_type_script_setup_true_lang-DJdu5D5x.js";import"./request-pIm3tC8o.js";import"./bootstrap.esm-BpKsRgoI.js";import"./repository-B2DZS8AV.js";/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ye=W("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var We=W("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Je=W("outline","cloud-download","IconCloudDownload",[["path",{d:"M19 18a3.5 3.5 0 0 0 0 -7h-1a5 4.5 0 0 0 -11 -2a4.6 4.4 0 0 0 -2.1 8.4",key:"svg-0"}],["path",{d:"M12 13l0 9",key:"svg-1"}],["path",{d:"M9 19l3 3l3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=W("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qe=W("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xe=W("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ze=W("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var et=W("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tt=W("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var at=W("filled","star-filled","IconStarFilled",[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]]);const ot={class:"modal",id:"action-confirm",tabindex:"-1"},lt={class:"modal-dialog modal-lg",role:"document"},st={class:"modal-content"},nt={class:"modal-header"},it={class:"modal-title"},dt={key:0},rt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},ct={class:"mb-3"},ut=["value"],mt={class:"mb-3"},pt={class:"modal-footer d-flex justify-content-between"},vt=J({__name:"applicationActionConfirm",props:{title:{},applicationStatusId:{},type:{},applicationName:{}},emits:["getApplicationsStatusList"],setup(F,{expose:L,emit:D}){const I=X(),x=F,h=D,o=de(()=>x.title),k=de(()=>x.applicationStatusId),U=de(()=>x.type),T=g(""),_=g(""),f=()=>{T.value="",_.value=""},b=g([]),v=async t=>{const{data:l}=await Ce(t);b.value=l},C=async()=>{const t={operation:o.value,applicationStatusId:k.value,reason:T.value,detailReason:_.value};console.log(t),h("getApplicationsStatusList"),I.error(`${o.value} Action FAIL`)};return L({setInit:f,_getReasonList:v}),(t,l)=>(d(),r("div",ot,[e("div",lt,[e("div",st,[e("div",nt,[e("h5",it,[K(i(t.applicationName)+" "+i(o.value)+" ",1),U.value?(d(),r("span",dt,"("+i(U.value)+")",1)):P("",!0)]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:f})]),e("div",rt,[e("div",ct,[l[3]||(l[3]=e("label",{class:"form-label"},"Reason",-1)),$(e("select",{class:"form-select","onUpdate:modelValue":l[0]||(l[0]=s=>T.value=s)},[l[2]||(l[2]=e("option",{value:""},"Select Reason",-1)),(d(!0),r(E,null,N(b.value,s=>(d(),r("option",{value:s.label,key:s.label},i(s.label),9,ut))),128))],512),[[Q,T.value]])]),e("div",mt,[l[4]||(l[4]=e("label",{class:"form-label"},"Detail Reason",-1)),l[5]||(l[5]=e("p",{class:"text-muted"}," Please enter a detail reason ",-1)),$(e("textarea",{class:"form-control",rows:"10",placeholder:"Detail Reason","onUpdate:modelValue":l[1]||(l[1]=s=>_.value=s)},null,512),[[R,_.value]])])]),e("div",pt,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:f}," Cancel "),e("div",null,[e("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:C},i(o.value),1)])])])])]))}}),gt={class:"modal modal-blur fade",id:"rating-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"},bt={class:"modal-dialog modal-dialog-centered",role:"document"},ft={class:"modal-content"},ht={class:"modal-body"},yt={class:"mb-3"},_t={class:"rating-stars"},kt=["onClick"],wt={class:"mb-3"},Ct={class:"mb-3"},$t={class:"mb-3"},Mt={class:"mb-3"},It={class:"modal-footer"},xt=["disabled"],St=J({__name:"applicationRatingModal",props:{catalogId:{},applicationName:{}},emits:["ratingSubmitted"],setup(F,{emit:L}){const D=F,I=L,x=X(),h=g({rating:0,category:"",detailedComments:"",name:"",email:""}),o=f=>{h.value.rating=f},k=de(()=>h.value.rating>0&&h.value.category&&h.value.detailedComments&&h.value.name&&h.value.email),U=()=>{h.value={rating:0,category:"",detailedComments:"",name:"",email:""}},T=()=>{const f=document.getElementById("rating-modal");if(f)try{if(window.bootstrap&&window.bootstrap.Modal){const b=window.bootstrap.Modal.getInstance(f);b?b.hide():new window.bootstrap.Modal(f).hide()}else f.style.display="none",f.classList.remove("show"),f.setAttribute("aria-hidden","true"),f.removeAttribute("aria-modal"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(v=>v.remove()),document.body.style.overflow="",document.body.style.paddingRight=""}catch(b){console.error("Error closing modal:",b),f.style.display="none",f.classList.remove("show"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(C=>C.remove())}},_=async()=>{if(!k.value){x.error("Please fill in all fields");return}try{const f={catalogId:D.catalogId,rating:h.value.rating,category:h.value.category,detailedComments:h.value.detailedComments,name:h.value.name,email:h.value.email,metadata:JSON.stringify({version:"1.0.0",environment:"production",applicationName:D.applicationName})};await $e(f)&&(x.success("Rating submitted successfully"),U(),I("ratingSubmitted"),T())}catch(f){console.error("Rating submission error:",f),x.error("Failed to submit rating")}};return(f,b)=>(d(),r("div",gt,[e("div",bt,[e("div",ft,[b[11]||(b[11]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Application Rating"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",ht,[e("form",{onSubmit:me(_,["prevent"])},[e("div",yt,[b[4]||(b[4]=e("label",{class:"form-label"},"Overall Rating",-1)),e("div",_t,[(d(),r(E,null,N(5,v=>e("span",{key:v,class:O(["star",{active:v<=h.value.rating}]),onClick:C=>o(v)}," â˜… ",10,kt)),64))])]),e("div",wt,[b[6]||(b[6]=e("label",{class:"form-label"},"Category",-1)),$(e("select",{"onUpdate:modelValue":b[0]||(b[0]=v=>h.value.category=v),class:"form-select",required:""},b[5]||(b[5]=[_e('<option value="" data-v-714cdadf>Select Category</option><option value="Performance" data-v-714cdadf>Performance</option><option value="Usability" data-v-714cdadf>Usability</option><option value="Reliability" data-v-714cdadf>Reliability</option><option value="Security" data-v-714cdadf>Security</option><option value="Support" data-v-714cdadf>Support</option>',6)]),512),[[Q,h.value.category]])]),e("div",Ct,[b[7]||(b[7]=e("label",{class:"form-label"},"Detailed Comments",-1)),$(e("textarea",{"onUpdate:modelValue":b[1]||(b[1]=v=>h.value.detailedComments=v),class:"form-control",rows:"4",placeholder:"Enter detailed comments",required:""},null,512),[[R,h.value.detailedComments]])]),e("div",$t,[b[8]||(b[8]=e("label",{class:"form-label"},"Name",-1)),$(e("input",{"onUpdate:modelValue":b[2]||(b[2]=v=>h.value.name=v),type:"text",class:"form-control",placeholder:"Enter your name",required:""},null,512),[[R,h.value.name]])]),e("div",Mt,[b[9]||(b[9]=e("label",{class:"form-label"},"Email",-1)),$(e("input",{"onUpdate:modelValue":b[3]||(b[3]=v=>h.value.email=v),type:"email",class:"form-control",placeholder:"Enter your email",required:""},null,512),[[R,h.value.email]])])],32)]),e("div",It,[b[10]||(b[10]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:_,disabled:!k.value},"Submit",8,xt)])])])]))}}),Tt=pe(St,[["__scopeId","data-v-714cdadf"]]),Dt={class:"modal modal-blur fade",id:"application-detail-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"},Rt={class:"modal-dialog modal-xl modal-dialog-centered",role:"document"},Ut={class:"modal-content"},At={class:"modal-body",style:{"max-height":"80vh","overflow-y":"auto"}},Lt={key:0,class:"text-center"},Et={key:1},Pt={class:"mb-4"},Vt={class:"row"},Nt={class:"col-md-2 text-center"},Bt=["src","alt"],Ht={class:"col-md-10"},Ft={class:"text-muted"},Ot={class:"row"},Kt={class:"col-md-3"},zt={class:"col-md-3"},qt={class:"col-md-3"},Gt={class:"col-md-3"},jt={class:"mb-4"},Yt={class:"row"},Wt={class:"col-md-3"},Jt={class:"card text-center"},Qt={class:"card-body"},Xt={class:"card-title"},Zt={class:"col-md-3"},ea={class:"card text-center"},ta={class:"card-body"},aa={class:"card-title"},oa={class:"col-md-3"},la={class:"card text-center"},sa={class:"card-body"},na={class:"card-title"},ia={class:"col-md-3"},da={class:"card text-center"},ra={class:"card-body"},ca={class:"card-title"},ua={class:"mb-4"},ma={class:"table-responsive"},pa={class:"table table-sm"},va={key:0},ga={class:"mb-4"},ba={class:"table-responsive"},fa={class:"table table-sm"},ha={key:1},ya={class:"mb-4"},_a={class:"mb-3"},ka={class:"table-responsive"},wa={class:"table table-sm"},Ca={class:"mb-3"},$a={class:"table-responsive"},Ma={class:"table table-sm"},Ia={class:"mb-3"},xa={class:"table-responsive"},Sa={class:"table table-sm"},Ta={key:0,class:"mb-3"},Da={class:"table-responsive"},Ra={class:"table table-sm"},Ua={key:0,class:"mb-4"},Aa={class:"table-responsive"},La={class:"table table-sm"},Ea={key:2,class:"text-center text-muted"},Pa=J({__name:"applicationDetailModal",props:{deploymentId:{}},emits:["close"],setup(F,{expose:L,emit:D}){const I=D,x=X(),h=g(!1),o=g(null),k=g(0);L({refreshData:t=>{k.value=t,k&&T()}});const T=async()=>{if(k){h.value=!0;try{const{data:t}=await Me(k.value);t&&(o.value=t.integratedInfo)}catch(t){console.error("Failed to load application detail:",t),x.error("Failed to load application detail")}finally{h.value=!1}}},_=t=>{switch(t==null?void 0:t.toLowerCase()){case"success":case"completed":case"running":return"badge bg-success";case"failed":case"error":case"not_found":return"badge bg-danger";case"in_progress":case"pending":case"restart":return"badge bg-warning";default:return"badge bg-secondary"}},f=t=>{switch(t==null?void 0:t.toLowerCase()){case"critical":return"badge bg-danger";case"warning":return"badge bg-warning";case"error":return"badge bg-danger";default:return"badge bg-info"}},b=t=>{switch(t==null?void 0:t.toLowerCase()){case"info":return"badge bg-info";case"warning":return"badge bg-warning";case"error":return"badge bg-danger";case"debug":return"badge bg-secondary";default:return"badge bg-primary"}},v=t=>{if(t===0)return"0 Bytes";if(!t)return"N/A";const l=1024,s=["Bytes","KB","MB","GB","TB"],u=Math.floor(Math.log(t)/Math.log(l));return parseFloat((t/Math.pow(l,u)).toFixed(2))+" "+s[u]},C=()=>{const t=document.getElementById("application-detail-modal");if(t)try{if(window.bootstrap&&window.bootstrap.Modal){const l=window.bootstrap.Modal.getInstance(t);l?l.hide():new window.bootstrap.Modal(t).hide()}else t.style.display="none",t.classList.remove("show"),t.setAttribute("aria-hidden","true"),t.removeAttribute("aria-modal"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(s=>s.remove()),document.body.style.overflow="",document.body.style.paddingRight=""}catch(l){console.error("Error closing modal:",l),t.style.display="none",t.classList.remove("show"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(u=>u.remove())}o.value=null,I("close")};return(t,l)=>(d(),r("div",Dt,[e("div",Rt,[e("div",Ut,[e("div",{class:"modal-header"},[l[0]||(l[0]=e("h5",{class:"modal-title"},"Application Detail",-1)),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:C})]),e("div",At,[h.value?(d(),r("div",Lt,l[1]||(l[1]=[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):o.value?(d(),r("div",Et,[e("div",Pt,[l[6]||(l[6]=e("h6",{class:"text-primary"},"Application Overview",-1)),e("div",Vt,[e("div",Nt,[o.value.logoUrlLarge?(d(),r("img",{key:0,src:o.value.logoUrlLarge,alt:o.value.catalogName,class:"img-fluid",style:{"max-height":"80px"}},null,8,Bt)):P("",!0)]),e("div",Ht,[e("h5",null,i(o.value.catalogName),1),e("p",Ft,i(o.value.catalogDescription),1),e("div",Ot,[e("div",Kt,[l[2]||(l[2]=e("strong",null,"Category:",-1)),K(" "+i(o.value.catalogCategory),1)]),e("div",zt,[l[3]||(l[3]=e("strong",null,"Default Port:",-1)),K(" "+i(o.value.defaultPort),1)]),e("div",qt,[l[4]||(l[4]=e("strong",{class:"me-2"},"Status:",-1)),e("span",{class:O(_(o.value.applicationStatus))},i(o.value.applicationStatus),3)]),e("div",Gt,[l[5]||(l[5]=e("strong",{class:"me-2"},"Health Check:",-1)),e("span",{class:O(o.value.healthCheck?"text-success":"text-danger")},i(o.value.healthCheck?"Healthy":"Unhealthy"),3)])])])])]),e("div",jt,[l[11]||(l[11]=e("h6",{class:"text-primary"},"Performance Metrics",-1)),e("div",Yt,[e("div",Wt,[e("div",Jt,[e("div",Qt,[e("h5",Xt,i(o.value.cpuUsage)+"%",1),l[7]||(l[7]=e("p",{class:"card-text"},"CPU Usage",-1))])])]),e("div",Zt,[e("div",ea,[e("div",ta,[e("h5",aa,i(o.value.memoryUsage)+"%",1),l[8]||(l[8]=e("p",{class:"card-text"},"Memory Usage",-1))])])]),e("div",oa,[e("div",la,[e("div",sa,[e("h5",na,i(v(o.value.networkIn)),1),l[9]||(l[9]=e("p",{class:"card-text"},"Network In",-1))])])]),e("div",ia,[e("div",da,[e("div",ra,[e("h5",ca,i(v(o.value.networkOut)),1),l[10]||(l[10]=e("p",{class:"card-text"},"Network Out",-1))])])])])]),e("div",ua,[l[14]||(l[14]=e("h6",{class:"text-primary"},"Action History",-1)),e("div",ma,[e("table",pa,[l[13]||(l[13]=e("thead",null,[e("tr",null,[e("th",null,"Action"),e("th",null,"Timestamp"),e("th",null,"User"),e("th",null,"Status"),e("th",null,"Description")])],-1)),e("tbody",null,[o.value.operationHistories.length===0?(d(),r("tr",va,l[12]||(l[12]=[e("td",{colspan:"5",class:"text-center text-muted"},"No action history available",-1)]))):P("",!0),(d(!0),r(E,null,N(o.value.operationHistories,s=>(d(),r("tr",{key:s.id},[e("td",null,i(s.operationType),1),e("td",null,i(s.executedAt),1),e("td",null,i(s.executedBy||"system"),1),e("td",null,[e("span",{class:O(_(s.status))},i(s.status),3)]),e("td",null,i(s.detailReason||s.reason),1)]))),128))])])])]),e("div",ga,[l[17]||(l[17]=e("h6",{class:"text-primary"},"Error Logs",-1)),e("div",ba,[e("table",fa,[l[16]||(l[16]=e("thead",null,[e("tr",null,[e("th",null,"Timestamp"),e("th",null,"Error Code"),e("th",null,"Severity"),e("th",null,"Module"),e("th",null,"Description")])],-1)),e("tbody",null,[o.value.errorLogs.length>0?(d(!0),r(E,{key:0},N(o.value.errorLogs,s=>(d(),r("tr",{key:s.errorCode},[e("td",null,i(s.loggedAt),1),e("td",null,i(s.errorCode),1),e("td",null,[e("span",{class:O(f(s.severity))},i(s.severity),3)]),e("td",null,i(s.module),1),e("td",null,i(s.logMessage),1)]))),128)):(d(),r("tr",ha,l[15]||(l[15]=[e("td",{colspan:"5",class:"text-center text-muted"},"No error logs available",-1)])))])])])]),e("div",ya,[l[26]||(l[26]=e("h6",{class:"text-primary"},"Deployment History",-1)),e("div",_a,[l[19]||(l[19]=e("h6",null,"Basic Deployment Information",-1)),e("div",ka,[e("table",wa,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Action Type"),e("th",null,"Executed At"),e("th",null,"Executed By"),e("th",null,"Status")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,i(o.value.deploymentId),1),e("td",null,i(o.value.actionType),1),e("td",null,i(o.value.executedAt),1),e("td",null,i(o.value.executedBy||"system"),1),e("td",null,[e("span",{class:O(_(o.value.status))},i(o.value.status),3)])])])])])]),e("div",Ca,[l[21]||(l[21]=e("h6",null,"Cloud & Cluster Information",-1)),e("div",$a,[e("table",Ma,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"Cloud Provider"),e("th",null,"Cloud Region"),e("th",null,"Cluster Name"),e("th",null,"Deployment Type"),e("th",null,"MCI ID"),e("th",null,"UID")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,i(o.value.cloudProvider),1),e("td",null,i(o.value.cloudRegion),1),e("td",null,i(o.value.clusterName||"N/A"),1),e("td",null,i(o.value.deploymentType),1),e("td",null,i(o.value.mciId),1),e("td",null,i(o.value.vmId),1)])])])])]),e("div",Ia,[l[23]||(l[23]=e("h6",null,"Network & Service Information",-1)),e("div",xa,[e("table",Sa,[l[22]||(l[22]=e("thead",null,[e("tr",null,[e("th",null,"Namespace"),e("th",null,"Pod Status"),e("th",null,"Public IP"),e("th",null,"Service Port"),e("th",null,"VM ID"),e("th",null,"Catalog ID")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,i(o.value.namespace),1),e("td",null,i(o.value.podStatus||o.value.applicationStatus),1),e("td",null,i(o.value.publicIp),1),e("td",null,i(o.value.servicePort||o.value.defaultPort),1),e("td",null,i(o.value.vmId),1),e("td",null,i(o.value.catalogName),1)])])])])]),o.value.ingressEnabled?(d(),r("div",Ta,[l[25]||(l[25]=e("h6",null,"Ingress Information",-1)),e("div",Da,[e("table",Ra,[l[24]||(l[24]=e("thead",null,[e("tr",null,[e("th",null,"Enabled"),e("th",null,"Host"),e("th",null,"Path"),e("th",null,"Class"),e("th",null,"TLS Enabled"),e("th",null,"TLS Secret")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,[e("span",{class:O(o.value.ingressEnabled?"text-success":"text-danger")},i(o.value.ingressEnabled?"Yes":"No"),3)]),e("td",null,i(o.value.ingressHost||"N/A"),1),e("td",null,i(o.value.ingressPath||"N/A"),1),e("td",null,i(o.value.ingressClass||"N/A"),1),e("td",null,[e("span",{class:O(o.value.ingressTlsEnabled?"text-success":"text-danger")},i(o.value.ingressTlsEnabled?"Yes":"No"),3)]),e("td",null,i(o.value.ingressTlsSecret||"N/A"),1)])])])])])):P("",!0)]),o.value.deploymentLogs&&o.value.deploymentLogs.length>0?(d(),r("div",Ua,[l[28]||(l[28]=e("h6",{class:"text-primary"},"Deployment Logs",-1)),e("div",Aa,[e("table",La,[l[27]||(l[27]=e("thead",null,[e("tr",null,[e("th",null,"Timestamp"),e("th",null,"Type"),e("th",null,"Message")])],-1)),e("tbody",null,[(d(!0),r(E,null,N(o.value.deploymentLogs,s=>(d(),r("tr",{key:s.id},[e("td",null,i(s.loggedAt),1),e("td",null,[e("span",{class:O(["me-4 mt-2",b(s.logType)])},i(s.logType),3)]),e("td",null,i(s.logMessage),1)]))),128))])])])])):P("",!0)])):(d(),r("div",Ea," No data available "))]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:C},"Close")])])])]))}}),Va=pe(Pa,[["__scopeId","data-v-f89820b6"]]),Na={class:"card card-flush w-100"},Ba={class:"page-header page-wrapper"},Ha={class:"row align-items-center"},Fa={class:"card-header d-flex",style:{"justify-content":"space-between"}},Oa={class:"btn-list"},Ka={class:"me-2"},za=J({__name:"applicationStatusList",setup(F){const L=X(),D=g([]),I=g([]),x=g(""),h=g(""),o=g(0),k=g(""),U=g(""),T=g(0);g(!1);const _=g(0),f=g(),b=g();re(async()=>{t(),await v()});const v=async()=>{try{C();const{data:w}=await Ie();w?D.value=w:D.value=[]}catch(w){console.log(w),L.error("Unable to retrieve data")}},C=()=>{D.value=[];const w=new Date,S={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};x.value=w.toLocaleDateString("ko-KR",S)},t=()=>{I.value=[{title:"Infra",width:"25%",formatter:u,cellClick:function(w,S){s(S)}},{title:"Application",field:"applicationName",width:"15%",cellClick:function(w,S){s(S)},formatter:function(w){return`<div style="cursor: pointer; color:">${w.getValue()}</div>`}},{title:"Status",width:"13%",formatter:M,cellClick:function(w,S){s(S)}},{title:"CheckedAt",field:"checkedAt",width:"17%",cellClick:function(w,S){s(S)},formatter:function(w){return`<div style="cursor: pointer;">${w.getValue()}</div>`}},{title:"Action",width:"30%",formatter:V,cellClick:async function(w,S){const B=w.target,j=B==null?void 0:B.getAttribute("id"),oe=S.getRow().getData().id,Z=S.getRow().getData().deploymentType,le=S.getRow().getData().applicationName,H={operation:"",applicationStatusId:oe,deploymentType:Z,applicationName:le};j==="restart-btn"?(H.operation="RESTART",await l(H)):j==="stop-btn"?(H.operation="STOP",await l(H)):j==="uninstall-btn"?(H.operation="UNINSTALL",await l(H)):j==="rating-btn"&&(H.operation="RATING",T.value=S.getRow().getData().catalogId||1,await l(H))}}]},l=async w=>{h.value=w.operation,o.value=w.applicationStatusId,k.value=w.deploymentType,U.value=w.applicationName,b.value&&(b.value.setInit(),b.value._getReasonList(w.operation))},s=w=>{const S=w.getRow().getData();_.value=S.deploymentId||S.id;const B=document.getElementById("application-detail-modal");if(B)try{window.bootstrap&&window.bootstrap.Modal?(new window.bootstrap.Modal(B).show(),setTimeout(()=>{f.value&&f.value.refreshData(_.value)},100)):(B.style.display="block",B.classList.add("show"),document.body.classList.add("modal-open"),f.value&&f.value.refreshData(_.value))}catch(j){console.error("Error opening detail modal:",j)}},u=w=>{const S=w.getRow().getData().deploymentType,B=w.getRow().getData().vmId?w.getRow().getData().vmId:w.getRow().getData().clusterName?w.getRow().getData().clusterName:"-";return`
    <div style="cursor: pointer;">
      <p style="margin: 0;">
        ${S} (${B})
      </p>
    </div>
  `},M=w=>{const S=w.getRow().getData().status;return S==="RUNNING"?`
      <div style="cursor: pointer;">
        <span class="status status-green">  
          <span class="status-dot"></span>
            ${S}
        </span>
      </div>`:S==="RESTART"||S==="IN_PROGRESS"?`
    <div style="cursor: pointer;">
      <span class="status status-primary">  
        <span class="status-dot"></span>
          ${S}
      </span>
    </div>`:S==="NOT_FOUND"?`
    <div style="cursor: pointer;">
      <span class="status status-yellow">  
        <span class="status-dot"></span>
          ${S}
      </span>
    </div>`:`
  <div style="cursor: pointer;">
    <span class="status status-red">  
      <span class="status-dot"></span>
        ${S}
    </span>
  </div>`},V=()=>`
  <div>
    <button
      class='btn btn-ghost-primary d-none d-sm-inline-block'
      id='restart-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Restart
    </button>
    <button
      class='btn btn-ghost-warning d-none d-sm-inline-block'
      id='stop-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Stop
    </button>
    <button
      class='btn btn-ghost-danger d-none d-sm-inline-block'
      id='uninstall-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Uninstall
    </button>
    <button
      class='btn btn-ghost-info d-none d-sm-inline-block'
      id='rating-btn'
      data-bs-toggle='modal' 
      data-bs-target='#rating-modal'>
      Rating
    </button>
  </div>`;return(w,S)=>(d(),r(E,null,[e("div",Na,[e("div",Ba,[e("div",Ha,[e("div",Fa,[S[1]||(S[1]=e("h3",{class:"card-title"},[e("strong",null,"Apps Status")],-1)),e("div",Oa,[e("span",Ka,i(x.value),1),e("a",{class:"btn btn-outline-primary d-none d-sm-inline-block",onClick:v},[A(G(Ze),{class:"icon icon-tabler",size:20,"stroke-width":"1"}),S[0]||(S[0]=K(" Refresh "))])])])])]),A(Ke,{columns:I.value,"table-data":D.value},null,8,["columns","table-data"])]),A(vt,{ref_key:"applicationActionConfirmModalRef",ref:b,title:h.value,applicationStatusId:o.value,type:k.value,applicationName:U.value,onGetApplicationsStatusList:v},null,8,["title","applicationStatusId","type","applicationName"]),A(Tt,{catalogId:T.value,applicationName:U.value,onRatingSubmitted:v},null,8,["catalogId","applicationName"]),A(Va,{ref_key:"applicationDetailModalRef",ref:f,deploymentId:_.value},null,8,["deploymentId"])],64))}}),qa={class:"modal-dialog modal-lg",role:"document"},Ga={class:"modal-content"},ja={class:"modal-header"},Ya={class:"modal-title"},Wa={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},Ja={class:"nav nav-tabs mb-3"},Qa={class:"nav-item"},Xa={class:"nav-item"},Za={class:"nav-item"},eo={class:"nav-item"},to={class:"mb-3"},ao={class:"d-flex align-items-center"},oo={class:"form-check me-3"},lo=["disabled"],so={class:"form-check"},no=["disabled"],io={class:"mb-3"},ro=["disabled"],co=["value"],uo={class:"w-100 d-flex justify-content-between"},mo={class:"mb-3 w-50",style:{"margin-right":"10px"}},po=["disabled"],vo=["value"],go={class:"mb-3 w-50"},bo=["disabled"],fo=["value"],ho={class:"mb-3"},yo={class:"mb-3"},_o={class:"mb-3"},ko={class:"mb-3"},wo={class:"col-5"},Co=["onUpdate:modelValue"],$o={class:"col-6"},Mo=["onUpdate:modelValue"],Io={class:"col-1 d-flex gap-2"},xo=["onClick","disabled"],So={class:"row"},To={class:"col-md-6"},Do={class:"row"},Ro={class:"col-6"},Uo={class:"input-group"},Ao={class:"col-6"},Lo={class:"input-group"},Eo={class:"row mt-3"},Po={class:"col-md-6"},Vo={class:"row"},No={class:"col-6"},Bo={class:"input-group"},Ho={class:"col-6"},Fo={class:"input-group"},Oo={class:"row mt-3"},Ko={class:"col-md-6"},zo={class:"row"},qo={class:"col-6"},Go={class:"input-group"},jo={class:"col-6"},Yo={class:"input-group"},Wo={key:0,class:"card mt-3"},Jo={class:"card-body"},Qo={class:"d-flex align-items-center mb-2"},Xo={class:"form-check form-switch"},Zo={class:"row"},el={class:"col-md-3"},tl=["disabled"],al={class:"col-md-3"},ol=["disabled"],ll={class:"col-md-3"},sl=["disabled"],nl={class:"col-md-3"},il=["disabled"],dl={key:0},rl={class:"card"},cl={class:"card-body"},ul={class:"mb-3"},ml={key:1},pl={class:"card"},vl={class:"card-body"},gl={class:"mb-3"},bl={class:"col-4"},fl=["onUpdate:modelValue"],hl={class:"col-3"},yl=["onUpdate:modelValue"],_l={class:"col-4"},kl=["onUpdate:modelValue"],wl={class:"col-1 d-flex align-items-end gap-2"},Cl=["onClick","disabled"],$l={class:"card mt-3"},Ml={class:"card-body"},Il={class:"d-flex align-items-center mb-3"},xl={class:"form-check form-switch"},Sl={key:0},Tl={class:"mb-3"},Dl={class:"modal-footer"},Rl={class:"ms-auto d-flex gap-2"},Ul=["disabled"],Al=["disabled"],Ll=["disabled"],El=J({__name:"softwareCatalogWizard",props:{show:{type:Boolean},mode:{}},emits:["created","updated"],setup(F,{expose:L,emit:D}){const I=F,x=D,h=X(),o=g(1),k=g(!1),U=g(!1),T=g(0),_=g({}),f=g(null),b=g(!1);re(()=>{f.value&&(f.value.addEventListener("show.bs.modal",v),f.value.addEventListener("hide.bs.modal",C)),ne()}),ke(()=>{f.value&&(f.value.removeEventListener("show.bs.modal",v),f.value.removeEventListener("hide.bs.modal",C))});const v=()=>{U.value=!0,I.mode==="new"&&w()},C=()=>{U.value=!1,b.value=!1},t=g({id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null}),l=g([{refId:0,refValue:"",refDesc:"",refType:"URL"}]),s=g([{targetPort:80,hostPort:8080,protocol:"TCP"}]),u=de(()=>o.value===1?t.value.target&&t.value.category&&t.value.packageName&&t.value.version:o.value===2?t.value.name.trim().length>0&&t.value.summary.trim().length>0&&t.value.description.trim().length>0:o.value===3?t.value.minCpu>0&&t.value.minMemory>0&&t.value.minDisk>0&&t.value.recommendedCpu>0&&t.value.recommendedMemory>0&&t.value.recommendedDisk>0:o.value===3&&t.value.hpaEnabled?t.value.minReplicas>0&&t.value.maxReplicas>0&&t.value.cpuThreshold>0&&t.value.memoryThreshold>0:(console.log(s.value),o.value===3&&t.value.target==="VM"?t.value.defaultPort>0:o.value===4&&t.value.target==="K8S"?(console.log(s.value.length),s.value.length>0?s.value.every(p=>p.targetPort>0&&p.hostPort>0&&p.protocol):!1):o.value===4&&t.value.ingressEnabled?t.value.ingressUrl.trim().length>0:!0)),M=()=>{u.value&&o.value<4&&(o.value+=1)},V=()=>{o.value>1&&(o.value-=1)},w=()=>{o.value=1,t.value={id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null},l.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],s.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}]},S=()=>{l.value.push({refId:0,refValue:"",refDesc:"",refType:"URL"})},B=p=>{l.value.length>1&&l.value.splice(p,1)},j=()=>{s.value.push({targetPort:80,hostPort:8080,protocol:"TCP"})},oe=p=>{s.value.length>1&&s.value.splice(p,1)},Z=()=>{if(f.value){U.value=!1;const p=f.value.querySelector('[data-bs-dismiss="modal"]');if(p)p.click();else try{const a=window.bootstrap;if(a!=null&&a.Modal)(a.Modal.getInstance(f.value)||new a.Modal(f.value)).hide();else{f.value.classList.remove("show"),f.value.style.display="none",document.body.classList.remove("modal-open");const n=document.querySelector(".modal-backdrop");n==null||n.remove()}}catch(a){console.warn("Modal close failed:",a)}}},le=async()=>{try{t.value.catalogRefs=l.value.filter(p=>p.refValue.trim()),t.value.target==="K8S"&&(t.value.ports=s.value.filter(p=>p.targetPort&&p.hostPort)),t.value.target==="VM"?t.value.sourceType="DOCKERHUB":t.value.target==="K8S"&&(t.value.sourceType="ARTIFACTHUB"),await Se(t.value),h.success("Registration Success"),Z(),x("created")}catch{h.error("Registration Failed")}},H=async()=>{try{t.value.catalogRefs=l.value.filter(p=>p.refValue.trim()),t.value.target==="K8S"&&(t.value.ports=s.value.filter(p=>p.targetPort&&p.hostPort)),t.value.target==="VM"?t.value.sourceType="DOCKERHUB":t.value.target==="K8S"&&(t.value.sourceType="ARTIFACTHUB"),await Te(t.value),h.success("Update Success"),Z(),x("updated")}catch{h.error("Update Failed")}},se=async()=>{try{if(!T.value)return;_.value&&_.value.category&&(k.value=!0,t.value.target=_.value.packageInfo!==null?"VM":"K8S",t.value.category=_.value.category,_.value.packageInfo!==null?(t.value.packageName=_.value.packageInfo.packageName,t.value.version=_.value.packageInfo.packageVersion):_.value.helmChart!==null&&(t.value.packageName=_.value.helmChart.chartName,t.value.version=_.value.helmChart.chartVersion),k.value=!1),await ve()}catch{h.error("Failed to load catalog data"),k.value=!1}},ve=async()=>{try{if(!T.value)return;const{data:p}=await De(T.value);k.value=!0,t.value={...t.value,...p,target:p.packageInfo!==null?"VM":"K8S"},p.packageInfo!==null&&(t.value.packageName=p.packageInfo.packageName,t.value.version=p.packageInfo.packageVersion),p.helmChart!==null&&(t.value.packageName=p.helmChart.chartName,t.value.version=p.helmChart.chartVersion),p.catalogRefs&&p.catalogRefs.length>0?l.value=p.catalogRefs.map(a=>({refId:a.id||0,refValue:a.refValue||"",refDesc:a.refDesc||"",refType:a.refType||"URL"})):l.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],p.ports&&p.ports.length>0?s.value=p.ports.map(a=>({targetPort:a.targetPort||80,hostPort:a.hostPort||8080,protocol:a.protocol||"TCP"})):s.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}],await ne(),t.value.category&&(await c(),t.value.packageName&&await m()),k.value=!1}catch{h.error("Failed to load catalog data"),k.value=!1}},ee=p=>{u.value&&(o.value=p)};ue(()=>t.value.target,p=>{p&&(I.mode==="new"&&(t.value.category="",t.value.packageName="",t.value.version=""),ne())});const te=g([]),ne=async()=>{if(I.mode==="new"&&(te.value=[],ae.value=[],y.value=[],t.value.category="",t.value.packageName="",t.value.version=""),t.value.target){const p={target:t.value.target==="VM"?"DOCKER":"HELM"},{data:a}=await xe(p);te.value=a}};ue(()=>t.value.category,p=>{p&&(I.mode==="new"&&(t.value.packageName="",t.value.version=""),c())});const ae=g([]),c=async()=>{I.mode==="new"&&(ae.value=[],y.value=[],t.value.packageName="",t.value.version="");const p={target:t.value.target==="VM"?"DOCKER":"HELM",category:t.value.category||""},{data:a}=await Re(p);ae.value=a};ue(()=>t.value.packageName,p=>{p&&(I.mode==="new"&&(t.value.version=""),m())});const y=g([]),m=async()=>{I.mode==="new"&&(y.value=[],t.value.version="");const p={target:t.value.target==="VM"?"DOCKER":"HELM",packageName:t.value.packageName||""},{data:a}=await Ue(p);I.mode==="new"?a.forEach(n=>{n.isUsed||y.value.push(n)}):y.value=a};return L({loadCatalogDataWithCategoryInit:se,initForCreate:()=>{w(),o.value=1},initForUpdate:(p,a)=>{T.value=p,_.value=a,o.value=1,se()}}),(p,a)=>(d(),r("div",{class:"modal fade",id:"modal-wizard",tabindex:"-1",ref_key:"wizardModal",ref:f},[e("div",qa,[e("div",Ga,[e("div",ja,[e("h5",Ya,i(I.mode==="update"?"Application Update":"Application Registration"),1),a[27]||(a[27]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Wa,[e("ul",Ja,[e("li",Qa,[e("a",{class:O(["nav-link",{active:o.value===1}]),href:"javascript:void(0);",onClick:a[0]||(a[0]=n=>ee(1))},"1. Package",2)]),e("li",Xa,[e("a",{class:O(["nav-link",{active:o.value===2}]),href:"javascript:void(0);",onClick:a[1]||(a[1]=n=>ee(2))},"2. General",2)]),e("li",Za,[e("a",{class:O(["nav-link",{active:o.value===3}]),href:"javascript:void(0);",onClick:a[2]||(a[2]=n=>ee(3))},"3. Resource Requirements",2)]),e("li",eo,[e("a",{class:O(["nav-link",{active:o.value===4}]),href:"javascript:void(0);",onClick:a[3]||(a[3]=n=>ee(4))},"4. Network",2)])]),$(e("div",null,[e("div",to,[a[30]||(a[30]=e("label",{class:"form-label required"},"Target",-1)),e("div",ao,[e("div",oo,[$(e("input",{class:"form-check-input",type:"radio",name:"target",value:"VM","onUpdate:modelValue":a[4]||(a[4]=n=>t.value.target=n),id:"targetVM",disabled:I.mode==="update"},null,8,lo),[[ge,t.value.target]]),a[28]||(a[28]=e("label",{class:"form-check-label",for:"targetVM"},"VM",-1))]),e("div",so,[$(e("input",{class:"form-check-input",type:"radio",name:"target",value:"K8S","onUpdate:modelValue":a[5]||(a[5]=n=>t.value.target=n),id:"targetK8S",disabled:I.mode==="update"},null,8,no),[[ge,t.value.target]]),a[29]||(a[29]=e("label",{class:"form-check-label",for:"targetK8S"},"K8S",-1))])])]),e("div",io,[a[32]||(a[32]=e("label",{class:"form-label required"},"Category",-1)),$(e("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=n=>t.value.category=n),disabled:I.mode==="update"},[a[31]||(a[31]=e("option",{value:""},"Select Category",-1)),(d(!0),r(E,null,N(te.value,n=>(d(),r("option",{value:n.value,key:n.key},i(n.value),9,co))),128))],8,ro),[[Q,t.value.category]])]),e("div",uo,[e("div",mo,[a[34]||(a[34]=e("label",{class:"form-label required"},"Package",-1)),$(e("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=n=>t.value.packageName=n),disabled:I.mode==="update"},[a[33]||(a[33]=e("option",{value:""},"Select Package",-1)),(d(!0),r(E,null,N(ae.value,n=>(d(),r("option",{value:n.value,key:n.key},i(n.value),9,vo))),128))],8,po),[[Q,t.value.packageName]])]),e("div",go,[a[36]||(a[36]=e("label",{class:"form-label required"},"Version",-1)),$(e("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=n=>t.value.version=n),disabled:I.mode==="update"},[a[35]||(a[35]=e("option",{value:""},"Select Version",-1)),(d(!0),r(E,null,N(y.value,n=>(d(),r("option",{value:n.value,key:n.key},i(n.value),9,fo))),128))],8,bo),[[Q,t.value.version]])])])],512),[[ce,o.value===1]]),$(e("div",null,[e("div",ho,[a[37]||(a[37]=e("label",{class:"form-label required"},"Application Name",-1)),$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=n=>t.value.name=n),placeholder:"Application name"},null,512),[[R,t.value.name]])]),e("div",yo,[a[38]||(a[38]=e("label",{class:"form-label required"},"Summary",-1)),$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=n=>t.value.summary=n),placeholder:"Application summary"},null,512),[[R,t.value.summary]])]),e("div",_o,[a[39]||(a[39]=e("label",{class:"form-label required"},"Description",-1)),$(e("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":a[11]||(a[11]=n=>t.value.description=n),placeholder:"Application description"},null,512),[[R,t.value.description]])]),e("div",ko,[a[41]||(a[41]=e("label",{class:"form-label"},"Reference",-1)),(d(!0),r(E,null,N(l.value,(n,ie)=>(d(),r("div",{class:"row g-2 mb-2",key:ie},[e("div",wo,[$(e("select",{class:"form-select","onUpdate:modelValue":Y=>n.refType=Y},a[40]||(a[40]=[_e('<option value="URL" data-v-aafeb7db>URL</option><option value="IMAGE" data-v-aafeb7db>IMAGE</option><option value="HOMEPAGE" data-v-aafeb7db>HOMEPAGE</option><option value="TAG" data-v-aafeb7db>TAG</option><option value="ETC" data-v-aafeb7db>ETC</option>',5)]),8,Co),[[Q,n.refType]])]),e("div",$o,[$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":Y=>n.refValue=Y,placeholder:"Ref Value"},null,8,Mo),[[R,n.refValue]])]),e("div",Io,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:Y=>B(ie),disabled:l.value.length<=1},"-",8,xo)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:S,style:{color:"gray"}},"+ Add Reference")])],512),[[ce,o.value===2]]),$(e("div",null,[e("div",So,[e("div",To,[a[46]||(a[46]=e("label",{class:"form-label"},"CPU",-1)),e("div",Do,[e("div",Ro,[a[43]||(a[43]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",Uo,[$(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=n=>t.value.minCpu=n),placeholder:"1"},null,512),[[R,t.value.minCpu,void 0,{number:!0}]]),a[42]||(a[42]=e("span",{class:"input-group-text"},"Cores",-1))])]),e("div",Ao,[a[45]||(a[45]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",Lo,[$(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=n=>t.value.recommendedCpu=n),placeholder:"2"},null,512),[[R,t.value.recommendedCpu,void 0,{number:!0}]]),a[44]||(a[44]=e("span",{class:"input-group-text"},"Cores",-1))])])])])]),e("div",Eo,[e("div",Po,[a[51]||(a[51]=e("label",{class:"form-label"},"Memory",-1)),e("div",Vo,[e("div",No,[a[48]||(a[48]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",Bo,[$(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=n=>t.value.minMemory=n),placeholder:"4"},null,512),[[R,t.value.minMemory,void 0,{number:!0}]]),a[47]||(a[47]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",Ho,[a[50]||(a[50]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",Fo,[$(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":a[15]||(a[15]=n=>t.value.recommendedMemory=n),placeholder:"8"},null,512),[[R,t.value.recommendedMemory,void 0,{number:!0}]]),a[49]||(a[49]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),e("div",Oo,[e("div",Ko,[a[56]||(a[56]=e("label",{class:"form-label"},"Storage",-1)),e("div",zo,[e("div",qo,[a[53]||(a[53]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",Go,[$(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":a[16]||(a[16]=n=>t.value.minDisk=n),placeholder:"10"},null,512),[[R,t.value.minDisk,void 0,{number:!0}]]),a[52]||(a[52]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",jo,[a[55]||(a[55]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",Yo,[$(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":a[17]||(a[17]=n=>t.value.recommendedDisk=n),placeholder:"20"},null,512),[[R,t.value.recommendedDisk,void 0,{number:!0}]]),a[54]||(a[54]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),t.value.target==="K8S"?(d(),r("div",Wo,[e("div",Jo,[e("div",Qo,[a[57]||(a[57]=e("label",{class:"form-check-label me-2"},"K8S HPA",-1)),e("div",Xo,[$(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[18]||(a[18]=n=>t.value.hpaEnabled=n)},null,512),[[be,t.value.hpaEnabled]])])]),e("div",Zo,[e("div",el,[a[58]||(a[58]=e("label",{class:"form-label"},"minReplicas",-1)),$(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=n=>t.value.minReplicas=n),disabled:!t.value.hpaEnabled,placeholder:"1"},null,8,tl),[[R,t.value.minReplicas,void 0,{number:!0}]])]),e("div",al,[a[59]||(a[59]=e("label",{class:"form-label"},"maxReplicas",-1)),$(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":a[20]||(a[20]=n=>t.value.maxReplicas=n),disabled:!t.value.hpaEnabled,placeholder:"10"},null,8,ol),[[R,t.value.maxReplicas,void 0,{number:!0}]])]),e("div",ll,[a[60]||(a[60]=e("label",{class:"form-label"},"CPU (%)",-1)),$(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":a[21]||(a[21]=n=>t.value.cpuThreshold=n),disabled:!t.value.hpaEnabled,placeholder:"80"},null,8,sl),[[R,t.value.cpuThreshold,void 0,{number:!0}]])]),e("div",nl,[a[61]||(a[61]=e("label",{class:"form-label"},"Memory (%)",-1)),$(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":a[22]||(a[22]=n=>t.value.memoryThreshold=n),disabled:!t.value.hpaEnabled,placeholder:"80"},null,8,il),[[R,t.value.memoryThreshold,void 0,{number:!0}]])])])])])):P("",!0)],512),[[ce,o.value===3]]),$(e("div",null,[t.value.target==="VM"?(d(),r("div",dl,[e("div",rl,[a[63]||(a[63]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",cl,[e("div",ul,[a[62]||(a[62]=e("label",{class:"form-label"},"Port",-1)),$(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":a[23]||(a[23]=n=>t.value.defaultPort=n),placeholder:"80"},null,512),[[R,t.value.defaultPort,void 0,{number:!0}]])])])])])):P("",!0),t.value.target==="K8S"?(d(),r("div",ml,[e("div",pl,[a[69]||(a[69]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",vl,[e("div",gl,[a[68]||(a[68]=e("label",{class:"form-label"},"Port",-1)),(d(!0),r(E,null,N(s.value,(n,ie)=>(d(),r("div",{class:"row g-2 mb-2",key:ie},[e("div",bl,[a[64]||(a[64]=e("label",{class:"form-label small"},"Target Port",-1)),$(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":Y=>n.targetPort=Y,placeholder:"80"},null,8,fl),[[R,n.targetPort,void 0,{number:!0}]])]),e("div",hl,[a[66]||(a[66]=e("label",{class:"form-label small"},"Protocol",-1)),$(e("select",{class:"form-select","onUpdate:modelValue":Y=>n.protocol=Y},a[65]||(a[65]=[e("option",{value:"TCP"},"TCP",-1),e("option",{value:"UDP"},"UDP",-1),e("option",{value:"SCTP"},"SCTP",-1)]),8,yl),[[Q,n.protocol]])]),e("div",_l,[a[67]||(a[67]=e("label",{class:"form-label small"},"Host Port",-1)),$(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":Y=>n.hostPort=Y,placeholder:"8080"},null,8,kl),[[R,n.hostPort,void 0,{number:!0}]])]),e("div",wl,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:Y=>oe(ie),disabled:s.value.length<=1},"-",8,Cl)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:j,style:{color:"gray"}},"+ Add Port Mapping")])])]),e("div",$l,[e("div",Ml,[e("div",Il,[a[70]||(a[70]=e("label",{class:"form-check-label me-2"},"Ingress Configuration",-1)),e("div",xl,[$(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[24]||(a[24]=n=>t.value.ingressEnabled=n)},null,512),[[be,t.value.ingressEnabled]])])]),t.value.ingressEnabled?(d(),r("div",Sl,[e("div",Tl,[a[71]||(a[71]=e("label",{class:"form-label"},"Ingress Path",-1)),$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[25]||(a[25]=n=>t.value.ingressUrl=n),placeholder:"/"},null,512),[[R,t.value.ingressUrl]])])])):P("",!0)])])])):P("",!0)],512),[[ce,o.value===4]])]),e("div",Dl,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:w}," Cancel "),e("div",Rl,[e("button",{class:"btn btn-outline-secondary",disabled:o.value===1,onClick:V},"Prev",8,Ul),o.value<4?(d(),r("button",{key:0,class:"btn btn-primary",disabled:!u.value,onClick:M},"Next",8,Al)):(d(),r("button",{key:1,class:"btn btn-primary",disabled:!u.value,onClick:a[26]||(a[26]=n=>I.mode==="update"?H():le())},i(I.mode==="update"?"Update":"Create"),9,Ll))])])])])],512))}}),Pl=pe(El,[["__scopeId","data-v-aafeb7db"]]),Vl={class:"modal-dialog",role:"document"},Nl={class:"modal-content"},Bl={class:"modal-body"},Hl={class:"modal-footer"},Fl=["disabled"],Ol={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Kl=J({__name:"DeleteConfirmModal",props:{targetCatalog:{}},emits:["deleted","close"],setup(F,{expose:L,emit:D}){const I=F,x=D,h=X(),o=g(!1),k=g(null),U=()=>{if(k.value)try{const v=window.bootstrap;if(v&&v.Modal)new v.Modal(k.value).show();else{k.value.classList.add("show"),k.value.style.display="block",document.body.classList.add("modal-open");const C=document.createElement("div");C.className="modal-backdrop fade show",C.id="delete-modal-backdrop",document.body.appendChild(C)}}catch(v){console.warn("Failed to show modal with Bootstrap, using fallback:",v),k.value.classList.add("show"),k.value.style.display="block",document.body.classList.add("modal-open")}},T=()=>{if(k.value)try{const v=window.bootstrap;if(v&&v.Modal){const C=v.Modal.getInstance(k.value);C?C.hide():_()}else _()}catch(v){console.warn("Failed to hide modal with Bootstrap, using fallback:",v),_()}},_=()=>{if(k.value){k.value.classList.remove("show"),k.value.style.display="none",document.body.classList.remove("modal-open");const v=document.getElementById("delete-modal-backdrop");v&&v.remove(),x("close")}},f=async()=>{var v;if((v=I.targetCatalog)!=null&&v.id){o.value=!0;try{await Ae(I.targetCatalog.id),h.success(`${I.targetCatalog.name} catalog has been successfully deleted.`),T(),x("deleted",I.targetCatalog.id)}catch(C){console.error("Delete failed:",C),h.error("Failed to delete catalog.")}finally{o.value=!1}}},b=()=>{x("close")};return re(()=>{k.value&&k.value.addEventListener("hidden.bs.modal",b)}),ke(()=>{k.value&&k.value.removeEventListener("hidden.bs.modal",b)}),L({show:U,hide:T}),(v,C)=>(d(),r("div",{class:"modal fade",id:"deleteConfirmModal",tabindex:"-1",ref_key:"deleteModal",ref:k,onClick:me(T,["self"])},[e("div",Vl,[e("div",Nl,[e("div",{class:"modal-header"},[C[0]||(C[0]=e("h5",{class:"modal-title"},"Confirm Catalog Deletion",-1)),e("button",{type:"button",class:"btn-close",onClick:T,"aria-label":"Close"})]),e("div",Bl,[e("p",null,[C[1]||(C[1]=K("Are you sure you want to delete ")),e("strong",null,i(v.targetCatalog.name),1),K(" ("+i(v.targetCatalog.category)+") catalog?",1)]),C[2]||(C[2]=e("p",{class:"text-muted"},"This action cannot be undone.",-1))]),e("div",Hl,[e("button",{type:"button",class:"btn btn-secondary",onClick:T},"Cancel"),e("button",{type:"button",class:"btn btn-danger",onClick:f,disabled:o.value},[o.value?(d(),r("span",Ol)):P("",!0),K(" "+i(o.value?"Deleting...":"Delete"),1)],8,Fl)])])])],512))}}),zl={class:"modal-content"},ql={class:"modal-body"},Gl={class:"row"},jl={class:"col-lg-12"},Yl={class:"mb-3"},Wl={class:"row"},Jl={class:"col-lg-12"},Ql={class:"mb-3"},Xl={class:"row"},Zl={class:"col-lg-12"},es={class:"mb-3"},ts=["value"],as={class:"modal-footer"},os=J({__name:"uploadForm",props:{sourceData:{}},emits:["uploaded","close"],setup(F,{expose:L,emit:D}){const I=X(),x=F,h=D,o=g({path:"",sourceType:"",name:"",tag:""});ue(()=>{var s,u;return[(s=x.sourceData)==null?void 0:s.sourceType,(u=x.sourceData)==null?void 0:u.name]},()=>{var s,u,M,V,w;(s=x.sourceData)!=null&&s.sourceType&&(o.value.sourceType=(u=x.sourceData)==null?void 0:u.sourceType),(M=x.sourceData)!=null&&M.name&&(o.value.name=(V=x.sourceData)==null?void 0:V.name,console.log(o.value.sourceType),o.value.sourceType.toUpperCase()=="DOCKERHUB"?T((w=x.sourceData)==null?void 0:w.name):o.value.sourceType.toUpperCase()=="ARTIFACTHUB"&&_(x.sourceData))},{immediate:!0});const k=g([]);fe(()=>{U()});const U=()=>{o.value={path:"",sourceType:"",name:"",tag:""},k.value=[]},T=async s=>{var V;const u={path:((V=x.sourceData)==null?void 0:V.id)||""},{data:M}=await Le(u);k.value=[],M.length>0&&M.forEach(w=>{k.value.push({key:w.name,value:w.name})})},_=async s=>{console.log("sourceData",s);const u={kind:"helm",repository:s.repository.name,packageName:s.name},{data:M}=await Ee(u);k.value=[],M.length>0&&M.forEach(V=>{k.value.push({key:V.version,value:V.version})})},f=()=>{if(!o.value.tag.trim()){I.error("Tag is required.");return}const s=we.cloneDeep(x.sourceData);s.tag=o.value.tag,s.sourceType=o.value.sourceType,s.name=o.value.name,h("uploaded",s),U(),t()},b=()=>{t()},v=()=>{U();const s=document.getElementById("upload-form-modal");if(s)try{const u=window.bootstrap;u&&u.Modal?new u.Modal(s).show():C()}catch(u){console.warn("Failed to show modal with Bootstrap, using fallback:",u),C()}},C=()=>{const s=document.getElementById("upload-form-modal");if(s){document.querySelectorAll(".modal-backdrop").forEach(V=>V.remove()),s.classList.add("show"),s.style.display="block",s.style.opacity="1",s.setAttribute("aria-hidden","false"),document.body.classList.add("modal-open");const M=document.createElement("div");M.className="modal-backdrop fade show",M.id="upload-modal-backdrop",document.body.appendChild(M)}},t=()=>{const s=document.getElementById("upload-form-modal");if(s)try{const u=window.bootstrap;if(u&&u.Modal){const M=u.Modal.getInstance(s);M?M.hide():l()}else l()}catch(u){console.warn("Failed to hide modal with Bootstrap, using fallback:",u),l()}},l=()=>{const s=document.getElementById("upload-form-modal");s&&(s.classList.remove("show","fade","in"),s.style.display="none",s.style.opacity="0",s.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.querySelectorAll(".modal-backdrop, #upload-modal-backdrop").forEach(M=>M.remove()),h("close"))};return fe(()=>{U()}),L({show:v,hide:t}),(s,u)=>(d(),r("div",{class:"modal modal-blur fade",id:"upload-form-modal",tabindex:"-1",role:"dialog","aria-hidden":"true",onClick:b},[e("div",{class:"modal-dialog modal-lg modal-dialog-centered",role:"document",onClick:u[3]||(u[3]=me(()=>{},["stop"]))},[e("div",zl,[e("div",{class:"modal-header"},[u[4]||(u[4]=e("h5",{class:"modal-title"},"Upload Application",-1)),e("button",{type:"button",class:"btn-close",onClick:t,"aria-label":"Close"})]),e("div",ql,[e("form",{onSubmit:me(f,["prevent"])},[e("div",Gl,[e("div",jl,[e("div",Yl,[u[5]||(u[5]=e("label",{class:"form-label"},"Source Type",-1)),$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[0]||(u[0]=M=>o.value.sourceType=M),disabled:""},null,512),[[R,o.value.sourceType]])])])]),e("div",Wl,[e("div",Jl,[e("div",Ql,[u[6]||(u[6]=e("label",{class:"form-label"},"Name",-1)),$(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[1]||(u[1]=M=>o.value.name=M),disabled:""},null,512),[[R,o.value.name]])])])]),e("div",Xl,[e("div",Zl,[e("div",es,[u[8]||(u[8]=e("label",{class:"form-label"},[K("Tag "),e("span",{class:"text-red"},"*")],-1)),$(e("select",{class:"form-select","onUpdate:modelValue":u[2]||(u[2]=M=>o.value.tag=M)},[u[7]||(u[7]=e("option",{value:""},"Select Tag",-1)),(d(!0),r(E,null,N(k.value,M=>(d(),r("option",{value:M.value,key:M.key},i(M.value),9,ts))),128))],512),[[Q,o.value.tag]]),u[9]||(u[9]=e("small",{class:"form-hint"},"Please enter the tag for this catalog.",-1))])])])],32)]),e("div",as,[e("button",{type:"button",class:"btn btn-link link-secondary",onClick:t}," Cancel "),e("button",{type:"submit",class:"btn btn-primary ms-auto",onClick:f},[A(G(tt),{class:"icon"}),u[10]||(u[10]=K(" Upload "))])])])])]))}}),ls=pe(os,[["__scopeId","data-v-3e6265d5"]]),ss={ref:"sofwareCatalog"},ns={class:"row"},is={class:"col-lg-9"},ds={class:"card"},rs={class:"list-group card-list-group",id:"sc-list-group"},cs={class:"row g-2 align-items-center"},us={class:"col-auto me-3"},ms=["src"],ps={key:1,src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},vs=["onClick"],gs={class:"text-muted"},bs=["onClick"],fs={class:"text-muted",style:{width:"auto","text-align":"right"}},hs={style:{color:"#e5b942"}},ys={style:{color:"#e5b942"}},_s={class:"text-muted",style:{width:"80px","text-align":"right"}},ks={style:{color:"gray"}},ws={class:"col-3 text-muted"},Cs={class:"d-flex justify-content-end"},$s={class:"mouse-hover"},Ms=["onClick"],Is={class:"text-muted"},xs=["id"],Ss={class:"accordion-body pt-0"},Ts=["innerHTML"],Ds=["id"],Rs=["onClick"],Us=["id"],As=["id"],Ls={class:"btn btn-sm",style:{"margin-right":"5px"}},Es={class:"btn btn-sm",style:{"margin-right":"5px"}},Ps={class:"btn btn-sm",style:{"margin-right":"5px"}},Vs={class:"col-lg-3"},Ns={class:"input-icon mb-3"},Bs={class:"input-icon-addon"},Hs={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},Fs={key:1,class:"row row-cards",id:"resultDockerHubSearch"},Os={class:"card"},Ks={class:"row row-0"},zs={class:"col-auto"},qs=["src"],Gs={class:"col"},js={class:"card-body"},Ys=["href"],Ws={class:"text-muted"},Js={class:"col-auto lh-1"},Qs={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},Xs={class:"mt-5"},Zs={key:0,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},en={key:1,class:"row row-cards",id:"resultArtifactHubSearch"},tn={class:"card"},an={class:"row row-0"},on={class:"col"},ln={class:"card-body"},sn=["href"],nn={class:"text-muted"},dn={class:"col-auto lh-1"},rn={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},cn=J({__name:"softwareCatalogList",setup(F){const L=X(),D=g([]),I=g(null),x=g(null),h=g({}),o=g("new"),k=g({}),U=g(""),T=g({}),_=g(null),f=g(null),b=g({}),v=g(null),C=g(""),t=g([]),l=g([]),s=g("");re(async()=>{C.value="",M(),document.addEventListener("click",c=>{c.target.closest(".dropdown")||(s.value="")})});const u=()=>{M(),o.value="new",x.value=null,h.value={},I.value=0,k.value={},U.value="",setTimeout(()=>{v.value&&typeof v.value.initForCreate=="function"&&v.value.initForCreate()},100)},M=async()=>{try{await Pe(C.value).then(({data:c})=>{we.forEach(c,function(y){y.refData=V(y.catalogRefs),y.isShow=!1}),D.value=c})}catch(c){console.log(c),L.error("Unable to retrieve data.")}},V=c=>c.reduce((y,m)=>(y[m.refType]||(y[m.refType]=[]),y[m.refType].push(m),y),{}),w=async c=>{c.keyCode==13&&(await S(),await B())},S=async()=>{t.value=[];try{const{data:c}=await Ne(C.value);if(c.results.length>0)for(let y=0;y<3;y++)t.value.push(c.results[y])}catch(c){console.log(c),L.error("Unable to retrieve data.")}},B=async()=>{l.value=[];try{const{data:c}=await Be(C.value);if(c.packages.length>0)for(let y=0;y<3;y++)l.value.push(c.packages[y])}catch(c){console.log(c),L.error("Unable to retrieve data.")}},j=c=>{const y=D.value.find(m=>m.id===c);x.value=c,h.value=y||{},o.value="update",setTimeout(()=>{v.value&&typeof v.value.initForUpdate=="function"&&v.value.initForUpdate(c,y)},100)},oe=c=>{T.value=c,_.value&&_.value.show()},Z=async c=>{await M()},le=()=>{T.value={}},H=async c=>{D.value[c].isShow=!D.value[c].isShow},se=(c,y)=>Object.prototype.hasOwnProperty.call(c,y),ve=c=>{window.open(c)},ee=c=>c.replace(/\\n|\n/g,"<br/>"),te=(c,y)=>{b.value=c,b.value.sourceType=y,f.value&&f.value.show()},ne=async c=>{if(c.sourceType=="DockerHub"){c.createdAt=c.created_at,c.updatedAt=c.updated_at,c.shortDescription=c.short_description,c.starCount=c.star_count,c.ratePlans=c.rate_plans,delete c.created_at,delete c.updated_at,delete c.short_description,delete c.star_count,delete c.rate_plans;const{data:y}=await He(c)}else if(c.sourceType=="ArtifactHub"){const{data:y}=await Fe(c)}L.success("Software catalog uploaded successfully!")},ae=()=>{b.value={sourceType:"",name:"",sourceData:{}}};return(c,y)=>(d(),r(E,null,[e("div",ss,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[y[1]||(y[1]=e("h2",{class:"mb-0"},"Catalog",-1)),e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block",style:{"margin-right":"315px"},"data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:u}," Regist ")]),e("div",ns,[e("div",is,[e("div",ds,[e("div",rs,[(d(!0),r(E,null,N(D.value,(m,z)=>(d(),r("div",{class:"list-group-item pe-1",key:z},[e("div",cs,[e("div",us,[m.logoUrlLarge?(d(),r("img",{key:0,src:m.logoUrlLarge,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,ms)):(d(),r("img",ps))]),e("div",{class:"col-5",onClick:q=>H(z)},[K(i(m.name)+" ",1),e("div",gs,i(m.summary),1)],8,vs),e("div",{class:"col-3 d-flex justify-content-end",onClick:q=>H(z)},[e("span",fs,[A(G(at),{class:"icon me-1",width:"12",height:"12","stroke-width":"1",color:"#e5b942"}),e("span",hs,i(m.averageRating||0),1),e("span",ys," ("+i(m.ratingCount||0)+") ",1)]),e("span",_s,[A(G(Je),{class:"icon me-1",width:"12",height:"12","stroke-width":"1",color:"gray"}),e("span",ks,i(m.downloadCount||0),1)])],8,bs),e("div",ws,[e("div",Cs,[e("div",$s,[A(G(Qe),{class:"me-2 cursor-pointer",size:"15","stroke-width":"2","data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:q=>j(m.id)},null,8,["onClick"]),A(G(et),{class:"cursor-pointer",size:"15","stroke-width":"2",onClick:q=>oe(m)},null,8,["onClick"])])]),e("div",{class:"d-flex justify-content-end",onClick:q=>H(z)},[e("span",Is,i(m.category.length>25?m.category.substring(0,25)+"...":m.category),1)],8,Ms)]),e("div",{id:"accordion_"+m.id,class:"accordion-collapse collapse",style:ze([m.isShow?{display:"block"}:{display:"none"}])},[e("div",Ss,[e("div",{class:"mt-3 mb-5",innerHTML:ee(m.description)},null,8,Ts),e("div",null,[y[2]||(y[2]=e("strong",null,"Ref Information",-1)),e("ul",{id:`${z}-entity-ul`},[se(m.refData,"HOMEPAGE")?(d(!0),r(E,{key:0},N(m.refData.HOMEPAGE,(q,p)=>(d(),r("li",{key:p},[e("a",{class:"btn",onClick:a=>ve(q.refValue)},i(q.refValue),9,Rs)]))),128)):P("",!0)],8,Ds),y[3]||(y[3]=e("strong",null,"TAGS",-1)),e("ul",{id:`${z}-tag-ul`},[se(m.refData,"TAG")?(d(!0),r(E,{key:0},N(m.refData.TAG,(q,p)=>(d(),r("span",{key:p},"#"+i(q.refValue)+" Â ",1))),128)):P("",!0)],8,Us),y[4]||(y[4]=e("strong",null,"Recommended Spec",-1)),e("ul",{id:`${z}-tag-ul`},[m.recommendedCpu&&m.recommendedMemory&&m.recommendedDisk?(d(),r(E,{key:0},[e("button",Ls," CPU : "+i(m.recommendedCpu)+" Core ",1),e("button",Es," MEMORY : "+i(m.recommendedMemory)+" GB ",1),e("button",Ps," DISK : "+i(m.recommendedDisk)+" GB ",1)],64)):P("",!0)],8,As)])])],12,xs)])]))),128))])])]),e("div",Vs,[e("div",Ns,[e("span",Bs,[A(G(Ve),{class:"icon",width:"24",height:"24","stroke-width":"2"})]),$(e("input",{type:"text",class:"form-control",placeholder:"Searchâ€¦",onKeypress:w,"onUpdate:modelValue":y[0]||(y[0]=m=>C.value=m),id:"inputCatalogSearch"},null,544),[[R,C.value]])]),y[7]||(y[7]=e("h3",{class:"mb-3"}," DOCKERHUB ",-1)),t.value.length<=0?(d(),r("div",Hs," There are no related Container Images found. ")):P("",!0),t.value.length>0?(d(),r("div",Fs,[(d(!0),r(E,null,N(t.value,(m,z)=>(d(),r("div",{class:"col-md-6 col-lg-12",key:z},[e("div",Os,[e("div",Ks,[e("div",zs,[e("img",{src:m.logo_url.large,class:"rounded-start ms-2",alt:"Shape of You",width:"80",height:"80"},null,8,qs)]),e("div",Gs,[e("div",js,[e("a",{href:"https://hub.docker.com/search?q="+C.value,target:"_blank"},i(m==null?void 0:m.name),9,Ys),e("div",Ws,i((m==null?void 0:m.short_description.length)>30?(m==null?void 0:m.short_description.substring(0,30))+"...":""),1)])]),e("div",Js,[e("div",Qs,[A(G(ye),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:q=>te(m,"DockerHub")},null,8,["onClick"])])])])])]))),128))])):P("",!0),e("div",Xs,[y[6]||(y[6]=e("h3",{class:"mb-3"}," ARTIFACTHUB ",-1)),l.value.length<=0?(d(),r("div",Zs," There are no related Helm Charts found. ")):P("",!0),l.value.length>0?(d(),r("div",en,[(d(!0),r(E,null,N(l.value,(m,z)=>(d(),r("div",{class:"col-md-6 col-lg-12",key:z},[e("div",tn,[e("div",an,[y[5]||(y[5]=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1)),e("div",on,[e("div",ln,[e("a",{href:"https://artifacthub.io/packages/search?ts_query_web="+C.value+"&sort=relevance&page=1",target:"_blank"},i(m==null?void 0:m.name),9,sn),e("div",nn,i((m==null?void 0:m.description.length)>30?(m==null?void 0:m.description.substring(0,30))+"...":""),1)])]),e("div",dn,[e("div",rn,[A(G(ye),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:q=>te(m,"ArtifactHub")},null,8,["onClick"])])])])])]))),128))])):P("",!0)])])])],512),A(Kl,{ref_key:"deleteConfirmModal",ref:_,"target-catalog":T.value,onDeleted:Z,onClose:le},null,8,["target-catalog"]),A(Pl,{ref_key:"wizardModal",ref:v,mode:o.value,onCreated:M,onUpdated:M},null,8,["mode"]),A(ls,{ref_key:"uploadFormModal",ref:f,"source-data":b.value,onUploaded:ne,onClose:ae},null,8,["source-data"])],64))}}),un={class:"page",ref:"sofwareCatalog"},mn={class:"page-wrapper"},pn={class:"page-header d-print-none"},vn={class:"container-xxl"},gn={class:"row g-2 align-items-center"},bn={class:"col-auto ms-auto"},fn={class:"page-body"},hn={class:"container-xxl"},yn={class:"row"},_n={class:"col-lg-12"},kn={class:"card"},wn={class:"card-header"},Cn={class:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs"},$n={class:"nav-item"},Mn={href:"#tabs-catalog",class:"nav-link active","data-bs-toggle":"tab"},In={class:"nav-item"},xn={href:"#tabs-status",class:"nav-link","data-bs-toggle":"tab"},Sn={class:"nav-item"},Tn={href:"#tabs-repository",class:"nav-link","data-bs-toggle":"tab"},Dn={class:"card-body"},Rn={class:"tab-content"},Un={class:"tab-pane active show",id:"tabs-catalog"},An={class:"tab-pane",id:"tabs-status"},Ln={class:"tab-pane",id:"tabs-repository"},Gn=J({__name:"SoftwareCatalog",setup(F){const L=qe(),D=g(""),I=g(""),x=g(!1),h=g("");re(async()=>{D.value=L.getNsId()});const o=T=>{I.value=T},k=T=>{h.value=T,x.value=!0},U=()=>{x.value=!1,h.value=""};return(T,_)=>(d(),r(E,null,[e("div",un,[e("div",mn,[e("div",pn,[e("div",vn,[e("div",gn,[_[1]||(_[1]=e("div",{class:"col d-flex"},[e("h2",{class:"page-title"},"Software Catalog")],-1)),e("div",bn,[e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:_[0]||(_[0]=f=>o("Application Installation"))}," DEPLOY ")])])])]),e("div",fn,[e("div",hn,[e("div",yn,[e("div",_n,[e("div",kn,[e("div",wn,[e("ul",Cn,[e("li",$n,[e("a",Mn,[A(G(We),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),_[2]||(_[2]=K(" Catalog "))])]),e("li",In,[e("a",xn,[A(G(Ye),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),_[3]||(_[3]=K(" Apps Status "))])]),e("li",Sn,[e("a",Tn,[A(G(Xe),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),_[4]||(_[4]=K(" Repository "))])])])]),e("div",Dn,[e("div",Rn,[e("div",Un,[e("div",null,[A(cn,{nsId:D.value},null,8,["nsId"])])]),e("div",An,[e("div",null,[A(za)])]),e("div",Ln,[e("div",null,[x.value?(d(),he(je,{key:1,embedded:!0,"repository-name":h.value,onBackToList:U},null,8,["repository-name"])):(d(),he(Ge,{key:0,embedded:!0,onOpenDetail:k}))])])])])])])])])])])],512),A(Oe,{"ns-id":D.value,title:I.value},null,8,["ns-id","title"])],64))}});export{Gn as default};
