import{c as G}from"./IconPlus-rWGugxnk.js";import{g as j,a as K,b as Y,S as q,s as J,c as Q,I as R,A as W}from"./softwareCatalogForm-CMYyEJme.js";import{_ as X}from"./Tabulator.vue_vue_type_style_index_0_lang-B87vqQPH.js";import{d as P,u as z,r as l,o as F,h as i,a as c,b as t,t as r,i as p,s as A,F as w,f as I,e as Z,g as tt,j as T,x as V,A as st,B as at,l as et}from"./index-Dv7ZO9TR.js";import{_ as ot}from"./lodash-Cd2Ljc83.js";import"./request-rXGHRcEj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license @tabler/icons-vue v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nt=G("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var it=G("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ct=G("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);const lt={class:"d-flex justify-content-between"},dt=t("h2",null,"Apps Status",-1),rt={class:"me-1"},ut={class:"card card-flush w-100"},ht=P({__name:"applicationStatusList",setup(O){const y=z(),d=l([]),u=l([]),v=l([]),g=l([]),f=l("");F(async()=>{N(),await k()});const h=new Date,S={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},k=async()=>{try{D(),await H(),u.value.length>0&&[...u.value].forEach(o=>{const _={id:o.id,type:o.deploymentType,appName:o.applicationName,infraInfo:o.vmId,status:o.status,checkedAt:o.checkedAt};d.value.push(_)}),v.value.length>0&&[...v.value].forEach(o=>{const _={};d.value.push(_)})}catch(n){console.log(n),y.error("Unable to retrieve data")}},D=()=>{d.value=[],u.value=[],v.value=[],f.value=h.toLocaleDateString("ko-KR",S)},H=async()=>{await M()},M=async()=>{const{data:n}=await j();n?u.value=n:u.value=[]},N=()=>{g.value=[{title:"Type",field:"type",width:"10%"},{title:"Application",field:"appName",width:"20%"},{title:"Infra",field:"infraInfo",width:"15%"},{title:"Status",width:"15%",formatter:x},{title:"CheckedAt",field:"checkedAt",width:"20%"},{title:"Action",width:"20%",formatter:U,cellClick:async function(n,o){const _=n.target,C=_==null?void 0:_.getAttribute("id"),L=o.getRow().getData().id;C==="restart-btn"?await $("RESTART",L):C==="stop-btn"?await $("STOP",L):C==="uninstall-btn"&&await $("UNINSTALL",L)}}]},$=async(n,o)=>{confirm(`Are you sure you want to take ${n}?`)&&await K({operation:n,applicationStatusId:o})},x=n=>{const o=n.getRow().getData().status;return o==="RUNNING"?`
      <div>
        <span class="status status-green">  
          <span class="status-dot"></span>
            ${o}
        </span>
      </div>`:o==="RESTART"?`
    <div>
      <span class="status status-primary">  
        <span class="status-dot"></span>
          ${o}
      </span>
    </div>`:o==="NOT_FOUND"?`
    <div>
      <span class="status status-yellow">  
        <span class="status-dot"></span>
          ${o}
      </span>
    </div>`:`
  <div>
    <span class="status status-red">  
      <span class="status-dot"></span>
        ${o}
    </span>
  </div>`},U=()=>`
  <div>
    <button
      class='btn btn-ghost-primary d-none d-sm-inline-block'
      id='restart-btn'
      data-bs-toggle='modal'
      data-bs-target='#restartApplication'>
      Restart
    </button>
    <button
      class='btn btn-ghost-warning d-none d-sm-inline-block'
      id='stop-btn'
      data-bs-toggle='modal'
      data-bs-target='#stopApplication'>
      Stop
    </button>
    <button
      class='btn btn-ghost-danger d-none d-sm-inline-block'
      id='uninstall-btn'
      data-bs-toggle='modal'
      data-bs-target='#uninstallApplication'>
      Uninstall
    </button>
  </div>`;return(n,o)=>(i(),c("div",null,[t("div",lt,[dt,t("div",null,[t("span",rt,r(f.value),1),p(A(ct),{class:"cursor-pointer",onClick:k})])]),t("div",ut,[p(X,{columns:g.value,"table-data":d.value},null,8,["columns","table-data"])])]))}}),pt={ref:"sofwareCatalog"},_t=t("h2",null,"Catalog",-1),vt={class:"row"},mt={class:"col-lg-9"},gt={class:"card"},ft={class:"list-group card-list-group",id:"sc-list-group"},bt={class:"row g-2 align-items-center"},wt={class:"col-auto me-3"},yt=["src"],kt=["onClick"],Ct={class:"text-muted"},St={class:"col-auto text-muted"},At={class:"col-auto lh-1"},$t={class:"dropdown"},Lt={href:"#",class:"link-secondary","data-bs-toggle":"dropdown"},It={class:"dropdown-menu dropdown-menu-end"},Tt=["onClick"],Dt=["id"],xt={class:"accordion-body pt-0"},Ht=["innerHTML"],Mt=t("strong",null,"Ref Information",-1),Nt=["id"],Ut=["onClick"],Et=t("strong",null,"TAGS",-1),Rt=["id"],Vt=t("strong",null,"Recommended Spec",-1),Gt=["id"],Pt={class:"btn btn-sm",style:{"margin-right":"5px"}},Ft={class:"btn btn-sm",style:{"margin-right":"5px"}},Ot={class:"btn btn-sm",style:{"margin-right":"5px"}},zt={class:"col-lg-3"},Bt=t("h3",{class:"mb-3"}," dockerHub search ",-1),jt={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},Kt={class:"row row-cards",id:"resultDockerHubSearch"},Yt={class:"card"},qt={class:"row row-0"},Jt={class:"col-auto"},Qt=["src"],Wt={class:"col"},Xt={class:"card-body"},Zt={href:"",target:"_blank"},ts={class:"text-muted"},ss={class:"col-auto lh-1"},as={class:"dropdown"},es={href:"#",class:"link-secondary","data-bs-toggle":"dropdown"},os={class:"dropdown-menu dropdown-menu-end"},ns=["onClick"],is=t("a",{class:"dropdown-item",href:"#"}," Copy file/image to repository ",-1),cs={class:"mt-5"},ls=t("h3",{class:"mb-3"}," artifactHub search ",-1),ds={key:0,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},rs={class:"row row-cards",id:"resultArtifactHubSearch"},us={class:"card"},hs={class:"row row-0"},ps=t("div",{class:"col-auto"},[t("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1),_s={class:"col"},vs={class:"card-body"},ms={href:"",target:"_blank"},gs={class:"text-muted"},fs={class:"col-auto lh-1"},bs={class:"dropdown"},ws={href:"#",class:"link-secondary","data-bs-toggle":"dropdown"},ys={class:"dropdown-menu dropdown-menu-end"},ks=["onClick"],Cs=t("a",{class:"dropdown-item",href:"#"}," Copy file/image to repository ",-1),Ss=P({__name:"softwareCatalogList",setup(O){const y=z(),d=l([]),u=l(null),v=l("new"),g=l({}),f=l(""),h=l(""),S=l([]),k=l([]);F(async()=>{h.value="",D()});const D=async()=>{try{await Y(h.value).then(({data:a})=>{ot.forEach(a,function(e){e.refData=H(e.catalogRefs),e.isShow=!1}),d.value=a})}catch(a){console.log(a),y.error("Unable to retrieve data.")}},H=a=>a.reduce((e,s)=>(e[s.refType]||(e[s.refType]=[]),e[s.refType].push(s),e),{}),M=async a=>{a.keyCode==13&&(await N(),await $())},N=async()=>{S.value=[];try{const{data:a}=await J(h.value);for(let e=0;e<3;e++)S.value.push(a.results[e])}catch(a){console.log(a),y.error("Unable to retrieve data.")}},$=async()=>{k.value=[];try{const{data:a}=await Q(h.value);for(let e=0;e<3;e++)k.value.push(a.packages[e])}catch(a){console.log(a),y.error("Unable to retrieve data.")}},x=(a,e)=>{v.value="new",u.value=0,g.value=e,f.value=a},U=a=>{v.value="update",u.value=a},n=()=>{let a=`https://hub.docker.com/search?q=${h.value}`;window.open(a,"_blank")},o=()=>{let a=`https://artifacthub.io/packages/search?ts_query_web=${h.value}&sort=relevance&page=1`;window.open(a,"_blank")},_=async a=>{d.value[a].isShow=!d.value[a].isShow},C=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),L=a=>{window.open(a)},B=a=>a.replace(/\\n|\n/g,"<br/>");return(a,e)=>(i(),c(w,null,[t("div",pt,[_t,t("div",vt,[t("div",mt,[t("div",gt,[t("div",ft,[(i(!0),c(w,null,I(d.value,(s,m)=>(i(),c("div",{class:"list-group-item",key:m},[t("div",bt,[t("div",wt,[t("img",{src:s.logoUrlLarge,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,yt)]),t("div",{class:"col",onClick:b=>_(m)},[V(r(s.title)+" ",1),t("div",Ct,r(s.summary),1)],8,kt),t("div",St,r(s.category),1),t("div",At,[t("div",$t,[t("a",Lt,[p(A(R),{class:"icon",width:"24",height:"24","stroke-width":"2"})]),t("div",It,[t("a",{class:"dropdown-item",onClick:b=>U(s.id),"data-bs-toggle":"modal","data-bs-target":"#modal-form"}," Update ",8,Tt)])])]),t("div",{id:"accordion_"+s.id,class:"accordion-collapse collapse",style:st([s.isShow?{display:"block"}:{display:"none"}])},[t("div",xt,[t("div",{class:"mt-3 mb-5",innerHTML:B(s.description)},null,8,Ht),t("div",null,[Mt,t("ul",{id:`${m}-entity-ul`},[C(s.refData,"HOMEPAGE")?(i(!0),c(w,{key:0},I(s.refData.HOMEPAGE,(b,E)=>(i(),c("li",{key:E},[t("a",{class:"btn",onClick:js=>L(b.refValue)},r(b.refValue),9,Ut)]))),128)):T("",!0)],8,Nt),Et,t("ul",{id:`${m}-tag-ul`},[C(s.refData,"TAG")?(i(!0),c(w,{key:0},I(s.refData.TAG,(b,E)=>(i(),c("span",{key:E},"#"+r(b.refValue)+"  ",1))),128)):T("",!0)],8,Rt),Vt,t("ul",{id:`${m}-tag-ul`},[s.recommendedCpu&&s.recommendedMemory&&s.recommendedDisk?(i(),c(w,{key:0},[t("button",Pt," CPU : "+r(s.recommendedCpu),1),t("button",Ft," MEMORY : "+r(s.recommendedMemory),1),t("button",Ot," DISK : "+r(s.recommendedDisk),1)],64)):T("",!0)],8,Gt)])])],12,Dt)])]))),128))])])]),t("div",zt,[Z(t("input",{type:"text",class:"form-control mb-3",placeholder:"Search…",onKeypress:M,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),id:"inputCatalogSearch"},null,544),[[tt,h.value]]),Bt,S.value.length==0?(i(),c("div",jt," There are no related Container Images found. ")):T("",!0),t("div",Kt,[(i(!0),c(w,null,I(S.value,(s,m)=>(i(),c("div",{class:"col-md-6 col-lg-12",key:m},[t("div",Yt,[t("div",qt,[t("div",Jt,[t("img",{src:s.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,Qt)]),t("div",Wt,[t("div",Xt,[t("a",Zt,r(s.name),1),t("div",ts,r(s.short_description.length>30?s.short_description.substring(0,30)+"...":""),1)])]),t("div",ss,[t("div",as,[t("a",es,[p(A(R),{class:"icon",size:"24","stroke-width":"2"})]),t("div",os,[t("a",{class:"dropdown-item",onClick:n}," Go to the page "),t("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-form",onClick:b=>x("dockerhub",s)}," Enter content into softwareCatalog ",8,ns),is])])])])])]))),128))]),t("div",cs,[ls,k.value.length==0?(i(),c("div",ds," There are no related Helm Charts found. ")):T("",!0),t("div",rs,[(i(!0),c(w,null,I(k.value,(s,m)=>(i(),c("div",{class:"col-md-6 col-lg-12",key:m},[t("div",us,[t("div",hs,[ps,t("div",_s,[t("div",vs,[t("a",ms,r(s.name),1),t("div",gs,r(s.description.length>30?s.description.substring(0,30)+"...":""),1)])]),t("div",fs,[t("div",bs,[t("a",ws,[p(A(R),{class:"icon",width:"24",height:"24","stroke-width":"2"})]),t("div",ys,[t("a",{class:"dropdown-item",onClick:o}," Go to the page "),t("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-form",onClick:b=>x("artifacthub",s)}," Enter content into softwareCatalog ",8,ks),Cs])])])])])]))),128))])])])])],512),p(q,{mode:v.value,"catalog-idx":u.value,"repository-application-info":g.value,"repository-name":f.value,onGetList:D},null,8,["mode","catalog-idx","repository-application-info","repository-name"])],64))}}),As={class:"page",ref:"sofwareCatalog"},$s={class:"page-wrapper"},Ls=et('<div class="page-header d-print-none"><div class="container-xxl"><div class="row g-2 align-items-center"><div class="col d-flex"><h2 class="page-title">Software catalog</h2></div></div></div></div>',1),Is={class:"page-body"},Ts={class:"container-xxl"},Ds={class:"row"},xs={class:"col-lg-12"},Hs={class:"col-auto me-auto fs-3"},Ms={class:"d-flex justify-content-end"},Ns={class:"card"},Us={class:"card-header"},Es={class:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs"},Rs={class:"nav-item"},Vs={href:"#tabs-catalog",class:"nav-link active","data-bs-toggle":"tab"},Gs={class:"nav-item"},Ps={href:"#tabs-status",class:"nav-link","data-bs-toggle":"tab"},Fs={class:"card-body"},Os={class:"tab-content"},zs={class:"tab-pane active show",id:"tabs-catalog"},Bs={class:"tab-pane",id:"tabs-status"},Zs=P({__name:"SoftwareCatalog",setup(O){const y=at(),d=l(""),u=l("");F(async()=>{d.value=y.getNsId()});const v=g=>{u.value=g};return(g,f)=>(i(),c(w,null,[t("div",As,[t("div",$s,[Ls,t("div",Is,[t("div",Ts,[t("div",Ds,[t("div",xs,[t("div",Hs,[t("div",Ms,[t("button",{class:"btn btn-primary me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:f[0]||(f[0]=h=>v("Application Installation"))},"INSTALL")])]),t("div",Ns,[t("div",Us,[t("ul",Es,[t("li",Rs,[t("a",Vs,[p(A(it),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),V(" Catalog ")])]),t("li",Gs,[t("a",Ps,[p(A(nt),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),V(" Apps Status ")])])])]),t("div",Fs,[t("div",Os,[t("div",zs,[t("div",null,[p(Ss,{nsId:d.value},null,8,["nsId"])])]),t("div",Bs,[t("div",null,[p(ht)])])])])])])])])])])],512),p(W,{"ns-id":d.value,title:u.value},null,8,["ns-id","title"])],64))}});export{Zs as default};
