import{c as K}from"./IconPlus-BsoFqKh6.js";import{r as be,a as he,g as ye,b as _e,c as ke,u as we,d as Ce,e as $e,f as Me,h as Te,i as Se,j as Ue,I as Ie,s as Re,k as xe,l as De,m as Ae,A as Ve}from"./softwareCatalogForm.vue_vue_type_style_index_0_scoped_c6733d12_lang-BpPPznja.js";import{_ as Ee}from"./Tabulator.vue_vue_type_style_index_0_lang-Dmr8Hli8.js";import{d as O,u as F,c as le,r as p,a as v,b as e,l as P,j as V,t as C,e as y,g as $,h as m,o as Z,F as x,i as I,m as B,p as ve,w as X,n as oe,q as se,s as ce,f as E,v as j,x as ue,k as Pe,y as re,z as Le,A as Ne,B as me}from"./index-cGYgHUXR.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as fe}from"./lodash-DmtNlwZV.js";import{_ as He}from"./RepositoryList.vue_vue_type_script_setup_true_lang-DsKul2Dm.js";import{_ as Be}from"./RepositoryDetail.vue_vue_type_script_setup_true_lang-B5B6By_8.js";import"./request-D5zYu6ie.js";import"./bootstrap.esm-DS9x8dJb.js";import"./repository-DtsFt9mK.js";/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ke=K("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oe=K("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=K("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ge=K("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ze=K("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qe=K("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var je=K("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=K("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);const Ye={class:"modal",id:"action-confirm",tabindex:"-1"},We={class:"modal-dialog modal-lg",role:"document"},Je={class:"modal-content"},Qe={class:"modal-header"},Xe={class:"modal-title"},Ze={key:0},et={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},tt={class:"mb-3"},at={class:"modal-footer d-flex justify-content-between"},ot=O({__name:"applicationActionConfirm",props:{title:{},applicationStatusId:{},type:{},applicationName:{}},emits:["getApplicationsStatusList"],setup(L,{emit:R}){const d=F(),M=L,_=R,c=le(()=>M.title),b=le(()=>M.applicationStatusId),h=le(()=>M.type),T=p(""),g=()=>{T.value=""},w=async()=>{g();let U;const k={operation:c.value,applicationStatusId:b.value,reason:T.value};if(h.value==="VM"){const{data:a}=await be(k);U=a}else if(h.value==="K8S"){const{data:a}=await he(k);U=a}_("getApplicationsStatusList"),U?d.success(`${c.value} Action SUCCESS`):d.error(`${c.value} Action FAIL`)};return(U,k)=>(m(),v("div",Ye,[e("div",We,[e("div",Je,[e("div",Qe,[e("h5",Xe,[P(C(U.applicationName)+" "+C(c.value)+" ",1),h.value?(m(),v("span",Ze,"("+C(h.value)+")",1)):V("",!0)]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:g})]),e("div",et,[e("div",tt,[k[1]||(k[1]=e("label",{class:"form-label"},"Reason",-1)),k[2]||(k[2]=e("p",{class:"text-muted"}," Please enter a reason ",-1)),y(e("textarea",{class:"form-control",rows:"10",placeholder:"Reason","onUpdate:modelValue":k[0]||(k[0]=a=>T.value=a)},null,512),[[$,T.value]])])]),e("div",at,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:g}," Cancel "),e("div",null,[e("button",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:w},C(c.value),1)])])])])]))}}),st={class:"card card-flush w-100"},lt={class:"page-header page-wrapper"},nt={class:"row align-items-center"},it={class:"card-header d-flex",style:{"justify-content":"space-between"}},dt={class:"btn-list"},rt={class:"me-2"},ct=O({__name:"applicationStatusList",setup(L){const R=F(),d=p([]),M=p([]),_=p(""),c=p(""),b=p(0),h=p(""),T=p("");Z(async()=>{U(),await g()});const g=async()=>{try{w();const{data:l}=await ye();l?d.value=l:d.value=[]}catch(l){console.log(l),R.error("Unable to retrieve data")}},w=()=>{d.value=[];const l=new Date,r={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};_.value=l.toLocaleDateString("ko-KR",r)},U=()=>{M.value=[{title:"Infra",width:"25%",formatter:a},{title:"Application",field:"applicationName",width:"15%"},{title:"Status",width:"15%",formatter:f},{title:"CheckedAt",field:"checkedAt",width:"20%"},{title:"Action",width:"25%",formatter:i,cellClick:async function(l,r){const S=l.target,D=S==null?void 0:S.getAttribute("id"),Y=r.getRow().getData().id,W=r.getRow().getData().deploymentType,J=r.getRow().getData().applicationName,N={operation:"",applicationStatusId:Y,deploymentType:W,applicationName:J};D==="restart-btn"?(N.operation="RESTART",await k(N)):D==="stop-btn"?(N.operation="STOP",await k(N)):D==="uninstall-btn"&&(N.operation="UNINSTALL",await k(N))}}]},k=async l=>{c.value=l.operation,b.value=l.applicationStatusId,h.value=l.deploymentType,T.value=l.applicationName},a=l=>{const r=l.getRow().getData().deploymentType,S=l.getRow().getData().vmId?l.getRow().getData().vmId:l.getRow().getData().clusterName?l.getRow().getData().clusterName:"-";return`
    <div>
      <p>
        ${r} (${S})
      <p>
    </div>
  `},f=l=>{const r=l.getRow().getData().status;return r==="RUNNING"?`
      <div>
        <span class="status status-green">  
          <span class="status-dot"></span>
            ${r}
        </span>
      </div>`:r==="RESTART"||r==="IN_PROGRESS"?`
    <div>
      <span class="status status-primary">  
        <span class="status-dot"></span>
          ${r}
      </span>
    </div>`:r==="NOT_FOUND"?`
    <div>
      <span class="status status-yellow">  
        <span class="status-dot"></span>
          ${r}
      </span>
    </div>`:`
  <div>
    <span class="status status-red">  
      <span class="status-dot"></span>
        ${r}
    </span>
  </div>`},i=()=>`
  <div>
    <button
      class='btn btn-ghost-primary d-none d-sm-inline-block'
      id='restart-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Restart
    </button>
    <button
      class='btn btn-ghost-warning d-none d-sm-inline-block'
      id='stop-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Stop
    </button>
    <button
      class='btn btn-ghost-danger d-none d-sm-inline-block'
      id='uninstall-btn'
      data-bs-toggle='modal' 
      data-bs-target='#action-confirm'>
      Uninstall
    </button>
  </div>`;return(l,r)=>(m(),v(x,null,[e("div",st,[e("div",lt,[e("div",nt,[e("div",it,[r[1]||(r[1]=e("h3",{class:"card-title"},[e("strong",null,"Apps Status")],-1)),e("div",dt,[e("span",rt,C(_.value),1),e("a",{class:"btn btn-outline-primary d-none d-sm-inline-block",onClick:g},[I(B(qe),{class:"icon icon-tabler",size:20,"stroke-width":"1"}),r[0]||(r[0]=P(" Refresh "))])])])])]),I(Ee,{columns:M.value,"table-data":d.value},null,8,["columns","table-data"])]),I(ot,{title:c.value,applicationStatusId:b.value,type:h.value,applicationName:T.value,onGetApplicationsStatusList:g},null,8,["title","applicationStatusId","type","applicationName"])],64))}}),ut={class:"modal-dialog modal-lg",role:"document"},mt={class:"modal-content"},pt={class:"modal-header"},vt={class:"modal-title"},gt={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},ft={class:"nav nav-tabs mb-3"},bt={class:"nav-item"},ht={class:"nav-item"},yt={class:"nav-item"},_t={class:"nav-item"},kt={class:"mb-3"},wt={class:"d-flex align-items-center"},Ct={class:"form-check me-3"},$t=["disabled"],Mt={class:"form-check"},Tt=["disabled"],St={class:"mb-3"},Ut=["disabled"],It=["value"],Rt={class:"w-100 d-flex justify-content-between"},xt={class:"mb-3 w-50",style:{"margin-right":"10px"}},Dt=["disabled"],At=["value"],Vt={class:"mb-3 w-50"},Et=["disabled"],Pt=["value"],Lt={class:"mb-3"},Nt={class:"mb-3"},Ht={class:"mb-3"},Bt={class:"mb-3"},Kt={class:"col-5"},Ot=["onUpdate:modelValue"],Gt={class:"col-6"},zt=["onUpdate:modelValue"],qt={class:"col-1 d-flex gap-2"},jt=["onClick","disabled"],Ft={class:"row"},Yt={class:"col-md-6"},Wt={class:"row"},Jt={class:"col-6"},Qt={class:"input-group"},Xt={class:"col-6"},Zt={class:"input-group"},ea={class:"row mt-3"},ta={class:"col-md-6"},aa={class:"row"},oa={class:"col-6"},sa={class:"input-group"},la={class:"col-6"},na={class:"input-group"},ia={class:"row mt-3"},da={class:"col-md-6"},ra={class:"row"},ca={class:"col-6"},ua={class:"input-group"},ma={class:"col-6"},pa={class:"input-group"},va={key:0,class:"card mt-3"},ga={class:"card-body"},fa={class:"d-flex align-items-center mb-2"},ba={class:"form-check form-switch"},ha={class:"row"},ya={class:"col-md-3"},_a=["disabled"],ka={class:"col-md-3"},wa=["disabled"],Ca={class:"col-md-3"},$a=["disabled"],Ma={class:"col-md-3"},Ta=["disabled"],Sa={key:0},Ua={class:"card"},Ia={class:"card-body"},Ra={class:"mb-3"},xa={key:1},Da={class:"card"},Aa={class:"card-body"},Va={class:"mb-3"},Ea={class:"col-4"},Pa=["onUpdate:modelValue"],La={class:"col-3"},Na=["onUpdate:modelValue"],Ha={class:"col-4"},Ba=["onUpdate:modelValue"],Ka={class:"col-1 d-flex align-items-end gap-2"},Oa=["onClick","disabled"],Ga={class:"card mt-3"},za={class:"card-body"},qa={class:"d-flex align-items-center mb-3"},ja={class:"form-check form-switch"},Fa={key:0},Ya={class:"mb-3"},Wa={class:"modal-footer"},Ja={class:"ms-auto d-flex gap-2"},Qa=["disabled"],Xa=["disabled"],Za=["disabled"],eo=O({__name:"softwareCatalogWizard",props:{show:{type:Boolean},mode:{},catalogId:{},catalogInfo:{}},emits:["created","updated"],setup(L,{emit:R}){const d=L,M=R,_=F(),c=p(1),b=p(!1),h=p(!1),T=p(0),g=p(null),w=p(!1);Z(()=>{T.value=d.catalogId,g.value&&(g.value.addEventListener("show.bs.modal",U),g.value.addEventListener("hide.bs.modal",k)),z()}),ve(()=>{g.value&&(g.value.removeEventListener("show.bs.modal",U),g.value.removeEventListener("hide.bs.modal",k))}),X(()=>[d.mode,d.catalogId],([o,t],[s,H])=>{t&&o==="update"&&(c.value=1,T.value=t,de())});const U=()=>{h.value=!0,d.mode==="new"&&D()},k=()=>{h.value=!1,w.value=!1},a=p({id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null}),f=p([{refId:0,refValue:"",refDesc:"",refType:"URL"}]),i=p([{targetPort:80,hostPort:8080,protocol:"TCP"}]),l=le(()=>c.value===1?a.value.target&&a.value.category&&a.value.packageName&&a.value.version:c.value===2?a.value.name.trim().length>0&&a.value.summary.trim().length>0&&a.value.description.trim().length>0:c.value===3?a.value.minCpu>0&&a.value.minMemory>0&&a.value.minDisk>0&&a.value.recommendedCpu>0&&a.value.recommendedMemory>0&&a.value.recommendedDisk>0:c.value===3&&a.value.hpaEnabled?a.value.minReplicas>0&&a.value.maxReplicas>0&&a.value.cpuThreshold>0&&a.value.memoryThreshold>0:(console.log(i.value),c.value===3&&a.value.target==="VM"?a.value.defaultPort>0:c.value===4&&a.value.target==="K8S"?(console.log(i.value.length),i.value.length>0?i.value.every(o=>o.targetPort>0&&o.hostPort>0&&o.protocol):!1):c.value===4&&a.value.ingressEnabled?a.value.ingressUrl.trim().length>0:!0)),r=()=>{l.value&&c.value<4&&(c.value+=1)},S=()=>{c.value>1&&(c.value-=1)},D=()=>{c.value=1,a.value={id:null,target:"VM",sourceType:"DOCKERHUB",category:"",packageName:"",version:"",packageInfo:null,helmChart:null,name:"",summary:"",description:"",logoUrlLarge:"",logoUrlSmall:"",catalogRefs:[],minCpu:0,recommendedCpu:0,minMemory:0,recommendedMemory:0,minDisk:0,recommendedDisk:0,hpaEnabled:!1,minReplicas:1,maxReplicas:10,cpuThreshold:80,memoryThreshold:80,ports:[],ingressEnabled:!1,ingressUrl:"",defaultPort:80,registeredById:null,createdAt:null,updatedAt:null},f.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],i.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}]},Y=()=>{f.value.push({refId:0,refValue:"",refDesc:"",refType:"URL"})},W=o=>{f.value.length>1&&f.value.splice(o,1)},J=()=>{i.value.push({targetPort:80,hostPort:8080,protocol:"TCP"})},N=o=>{i.value.length>1&&i.value.splice(o,1)},ee=()=>{if(g.value){h.value=!1;const o=g.value.querySelector('[data-bs-dismiss="modal"]');if(o)o.click();else try{const t=window.bootstrap;if(t!=null&&t.Modal)(t.Modal.getInstance(g.value)||new t.Modal(g.value)).hide();else{g.value.classList.remove("show"),g.value.style.display="none",document.body.classList.remove("modal-open");const s=document.querySelector(".modal-backdrop");s==null||s.remove()}}catch(t){console.warn("Modal close failed:",t)}}},ne=async()=>{try{a.value.catalogRefs=f.value.filter(o=>o.refValue.trim()),a.value.target==="K8S"&&(a.value.ports=i.value.filter(o=>o.targetPort&&o.hostPort)),a.value.target==="VM"?a.value.sourceType="DOCKERHUB":a.value.target==="K8S"&&(a.value.sourceType="ARTIFACTHUB"),await ke(a.value),_.success("Registration Success"),ee(),M("created")}catch{_.error("Registration Failed")}},ie=async()=>{try{a.value.catalogRefs=f.value.filter(o=>o.refValue.trim()),a.value.target==="K8S"&&(a.value.ports=i.value.filter(o=>o.targetPort&&o.hostPort)),a.value.target==="VM"?a.value.sourceType="DOCKERHUB":a.value.target==="K8S"&&(a.value.sourceType="ARTIFACTHUB"),await we(a.value),_.success("Update Success"),ee(),M("updated")}catch{_.error("Update Failed")}},de=async()=>{try{if(!T.value)return;d.catalogInfo&&d.catalogInfo.category&&(b.value=!0,a.value.target=d.catalogInfo.sourceType==="DOCKERHUB"?"VM":"K8S",a.value.category=d.catalogInfo.category,d.catalogInfo.sourceType==="DOCKERHUB"?(a.value.packageName=d.catalogInfo.packageInfo.packageName,a.value.version=d.catalogInfo.packageInfo.packageVersion):d.catalogInfo.sourceType==="ARTIFACTHUB"&&(a.value.packageName=d.catalogInfo.helmChart.chartName,a.value.version=d.catalogInfo.helmChart.chartVersion),b.value=!1),await te()}catch{_.error("Failed to load catalog data"),b.value=!1}},te=async()=>{try{if(!T.value)return;const{data:o}=await Ce(T.value);b.value=!0,a.value={...a.value,...o,target:o.sourceType==="DOCKERHUB"?"VM":"K8S"},o.sourceType==="DOCKERHUB"&&(a.value.packageName=o.packageInfo.packageName,a.value.version=o.packageInfo.packageVersion),o.sourceType==="ARTIFACTHUB"&&(a.value.packageName=o.helmChart.chartName,a.value.version=o.helmChart.chartVersion),o.catalogRefs&&o.catalogRefs.length>0?f.value=o.catalogRefs.map(t=>({refId:t.id||0,refValue:t.refValue||"",refDesc:t.refDesc||"",refType:t.refType||"URL"})):f.value=[{refId:0,refValue:"",refDesc:"",refType:"URL"}],o.ports&&o.ports.length>0?i.value=o.ports.map(t=>({targetPort:t.targetPort||80,hostPort:t.hostPort||8080,protocol:t.protocol||"TCP"})):i.value=[{targetPort:80,hostPort:8080,protocol:"TCP"}],await z(),a.value.category&&(await ae(),a.value.packageName&&await u()),b.value=!1}catch{_.error("Failed to load catalog data"),b.value=!1}},G=o=>{l.value&&(c.value=o)};X(()=>a.value.target,o=>{o&&(d.mode==="new"&&(a.value.category="",a.value.packageName="",a.value.version=""),z())});const Q=p([]),z=async()=>{if(d.mode==="new"&&(Q.value=[],q.value=[],n.value=[],a.value.category="",a.value.packageName="",a.value.version=""),a.value.target){const o={target:a.value.target==="VM"?"DOCKER":"HELM"},{data:t}=await _e(o);Q.value=t}};X(()=>a.value.category,o=>{o&&(d.mode==="new"&&(a.value.packageName="",a.value.version=""),ae())});const q=p([]),ae=async()=>{d.mode==="new"&&(q.value=[],n.value=[],a.value.packageName="",a.value.version="");const o={target:a.value.target==="VM"?"DOCKER":"HELM",category:a.value.category||""},{data:t}=await $e(o);q.value=t};X(()=>a.value.packageName,o=>{o&&(d.mode==="new"&&(a.value.version=""),u())});const n=p([]),u=async()=>{d.mode==="new"&&(n.value=[],a.value.version="");const o={target:a.value.target==="VM"?"DOCKER":"HELM",packageName:a.value.packageName||""},{data:t}=await Me(o);d.mode==="new"?t.forEach(s=>{s.isUsed||n.value.push(s)}):n.value=t};return(o,t)=>(m(),v("div",{class:"modal fade",id:"modal-wizard",tabindex:"-1",ref_key:"wizardModal",ref:g},[e("div",ut,[e("div",mt,[e("div",pt,[e("h5",vt,C(d.mode==="update"?"Application Update":"Application Registration"),1),t[27]||(t[27]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",gt,[e("ul",ft,[e("li",bt,[e("a",{class:oe(["nav-link",{active:c.value===1}]),href:"javascript:void(0);",onClick:t[0]||(t[0]=s=>G(1))},"1. Package",2)]),e("li",ht,[e("a",{class:oe(["nav-link",{active:c.value===2}]),href:"javascript:void(0);",onClick:t[1]||(t[1]=s=>G(2))},"2. General",2)]),e("li",yt,[e("a",{class:oe(["nav-link",{active:c.value===3}]),href:"javascript:void(0);",onClick:t[2]||(t[2]=s=>G(3))},"3. Resource Requirements",2)]),e("li",_t,[e("a",{class:oe(["nav-link",{active:c.value===4}]),href:"javascript:void(0);",onClick:t[3]||(t[3]=s=>G(4))},"4. Network",2)])]),y(e("div",null,[e("div",kt,[t[30]||(t[30]=e("label",{class:"form-label required"},"Target",-1)),e("div",wt,[e("div",Ct,[y(e("input",{class:"form-check-input",type:"radio",name:"target",value:"VM","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.target=s),id:"targetVM",disabled:d.mode==="update"},null,8,$t),[[ce,a.value.target]]),t[28]||(t[28]=e("label",{class:"form-check-label",for:"targetVM"},"VM",-1))]),e("div",Mt,[y(e("input",{class:"form-check-input",type:"radio",name:"target",value:"K8S","onUpdate:modelValue":t[5]||(t[5]=s=>a.value.target=s),id:"targetK8S",disabled:d.mode==="update"},null,8,Tt),[[ce,a.value.target]]),t[29]||(t[29]=e("label",{class:"form-check-label",for:"targetK8S"},"K8S",-1))])])]),e("div",St,[t[32]||(t[32]=e("label",{class:"form-label required"},"Category",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.category=s),disabled:d.mode==="update"},[t[31]||(t[31]=e("option",{value:""},"Select Category",-1)),(m(!0),v(x,null,E(Q.value,s=>(m(),v("option",{value:s.value,key:s.key},C(s.value),9,It))),128))],8,Ut),[[j,a.value.category]])]),e("div",Rt,[e("div",xt,[t[34]||(t[34]=e("label",{class:"form-label required"},"Package",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[7]||(t[7]=s=>a.value.packageName=s),disabled:d.mode==="update"},[t[33]||(t[33]=e("option",{value:""},"Select Package",-1)),(m(!0),v(x,null,E(q.value,s=>(m(),v("option",{value:s.value,key:s.key},C(s.value),9,At))),128))],8,Dt),[[j,a.value.packageName]])]),e("div",Vt,[t[36]||(t[36]=e("label",{class:"form-label required"},"Version",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.version=s),disabled:d.mode==="update"},[t[35]||(t[35]=e("option",{value:""},"Select Version",-1)),(m(!0),v(x,null,E(n.value,s=>(m(),v("option",{value:s.value,key:s.key},C(s.value),9,Pt))),128))],8,Et),[[j,a.value.version]])])])],512),[[se,c.value===1]]),y(e("div",null,[e("div",Lt,[t[37]||(t[37]=e("label",{class:"form-label required"},"Application Name",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=s=>a.value.name=s),placeholder:"Application name"},null,512),[[$,a.value.name]])]),e("div",Nt,[t[38]||(t[38]=e("label",{class:"form-label required"},"Summary",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=s=>a.value.summary=s),placeholder:"Application summary"},null,512),[[$,a.value.summary]])]),e("div",Ht,[t[39]||(t[39]=e("label",{class:"form-label required"},"Description",-1)),y(e("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":t[11]||(t[11]=s=>a.value.description=s),placeholder:"Application description"},null,512),[[$,a.value.description]])]),e("div",Bt,[t[41]||(t[41]=e("label",{class:"form-label"},"Reference",-1)),(m(!0),v(x,null,E(f.value,(s,H)=>(m(),v("div",{class:"row g-2 mb-2",key:H},[e("div",Kt,[y(e("select",{class:"form-select","onUpdate:modelValue":A=>s.refType=A},t[40]||(t[40]=[Pe('<option value="URL" data-v-42b8d677>URL</option><option value="IMAGE" data-v-42b8d677>IMAGE</option><option value="HOMEPAGE" data-v-42b8d677>HOMEPAGE</option><option value="TAG" data-v-42b8d677>TAG</option><option value="ETC" data-v-42b8d677>ETC</option>',5)]),8,Ot),[[j,s.refType]])]),e("div",Gt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":A=>s.refValue=A,placeholder:"Ref Value"},null,8,zt),[[$,s.refValue]])]),e("div",qt,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:A=>W(H),disabled:f.value.length<=1},"-",8,jt)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:Y,style:{color:"gray"}},"+ Add Reference")])],512),[[se,c.value===2]]),y(e("div",null,[e("div",Ft,[e("div",Yt,[t[46]||(t[46]=e("label",{class:"form-label"},"CPU",-1)),e("div",Wt,[e("div",Jt,[t[43]||(t[43]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",Qt,[y(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=s=>a.value.minCpu=s),placeholder:"1"},null,512),[[$,a.value.minCpu,void 0,{number:!0}]]),t[42]||(t[42]=e("span",{class:"input-group-text"},"Cores",-1))])]),e("div",Xt,[t[45]||(t[45]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",Zt,[y(e("input",{type:"number",min:"0",step:"0.1",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>a.value.recommendedCpu=s),placeholder:"2"},null,512),[[$,a.value.recommendedCpu,void 0,{number:!0}]]),t[44]||(t[44]=e("span",{class:"input-group-text"},"Cores",-1))])])])])]),e("div",ea,[e("div",ta,[t[51]||(t[51]=e("label",{class:"form-label"},"Memory",-1)),e("div",aa,[e("div",oa,[t[48]||(t[48]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",sa,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=s=>a.value.minMemory=s),placeholder:"4"},null,512),[[$,a.value.minMemory,void 0,{number:!0}]]),t[47]||(t[47]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",la,[t[50]||(t[50]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",na,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=s=>a.value.recommendedMemory=s),placeholder:"8"},null,512),[[$,a.value.recommendedMemory,void 0,{number:!0}]]),t[49]||(t[49]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),e("div",ia,[e("div",da,[t[56]||(t[56]=e("label",{class:"form-label"},"Storage",-1)),e("div",ra,[e("div",ca,[t[53]||(t[53]=e("label",{class:"form-label text-muted small"},"Minimum",-1)),e("div",ua,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[16]||(t[16]=s=>a.value.minDisk=s),placeholder:"10"},null,512),[[$,a.value.minDisk,void 0,{number:!0}]]),t[52]||(t[52]=e("span",{class:"input-group-text"},"GB",-1))])]),e("div",ma,[t[55]||(t[55]=e("label",{class:"form-label text-muted small"},"Recommended",-1)),e("div",pa,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[17]||(t[17]=s=>a.value.recommendedDisk=s),placeholder:"20"},null,512),[[$,a.value.recommendedDisk,void 0,{number:!0}]]),t[54]||(t[54]=e("span",{class:"input-group-text"},"GB",-1))])])])])]),a.value.target==="K8S"?(m(),v("div",va,[e("div",ga,[e("div",fa,[t[57]||(t[57]=e("label",{class:"form-check-label me-2"},"K8S HPA",-1)),e("div",ba,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=s=>a.value.hpaEnabled=s)},null,512),[[ue,a.value.hpaEnabled]])])]),e("div",ha,[e("div",ya,[t[58]||(t[58]=e("label",{class:"form-label"},"minReplicas",-1)),y(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=s=>a.value.minReplicas=s),disabled:!a.value.hpaEnabled,placeholder:"1"},null,8,_a),[[$,a.value.minReplicas,void 0,{number:!0}]])]),e("div",ka,[t[59]||(t[59]=e("label",{class:"form-label"},"maxReplicas",-1)),y(e("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=s=>a.value.maxReplicas=s),disabled:!a.value.hpaEnabled,placeholder:"10"},null,8,wa),[[$,a.value.maxReplicas,void 0,{number:!0}]])]),e("div",Ca,[t[60]||(t[60]=e("label",{class:"form-label"},"CPU (%)",-1)),y(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":t[21]||(t[21]=s=>a.value.cpuThreshold=s),disabled:!a.value.hpaEnabled,placeholder:"80"},null,8,$a),[[$,a.value.cpuThreshold,void 0,{number:!0}]])]),e("div",Ma,[t[61]||(t[61]=e("label",{class:"form-label"},"Memory (%)",-1)),y(e("input",{type:"number",min:"1",max:"100",class:"form-control","onUpdate:modelValue":t[22]||(t[22]=s=>a.value.memoryThreshold=s),disabled:!a.value.hpaEnabled,placeholder:"80"},null,8,Ta),[[$,a.value.memoryThreshold,void 0,{number:!0}]])])])])])):V("",!0)],512),[[se,c.value===3]]),y(e("div",null,[a.value.target==="VM"?(m(),v("div",Sa,[e("div",Ua,[t[63]||(t[63]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",Ia,[e("div",Ra,[t[62]||(t[62]=e("label",{class:"form-label"},"Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":t[23]||(t[23]=s=>a.value.defaultPort=s),placeholder:"80"},null,512),[[$,a.value.defaultPort,void 0,{number:!0}]])])])])])):V("",!0),a.value.target==="K8S"?(m(),v("div",xa,[e("div",Da,[t[69]||(t[69]=e("div",{class:"card-header"},[e("h6",{class:"card-title"},"Port Mapping")],-1)),e("div",Aa,[e("div",Va,[t[68]||(t[68]=e("label",{class:"form-label"},"Port",-1)),(m(!0),v(x,null,E(i.value,(s,H)=>(m(),v("div",{class:"row g-2 mb-2",key:H},[e("div",Ea,[t[64]||(t[64]=e("label",{class:"form-label small"},"Target Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":A=>s.targetPort=A,placeholder:"80"},null,8,Pa),[[$,s.targetPort,void 0,{number:!0}]])]),e("div",La,[t[66]||(t[66]=e("label",{class:"form-label small"},"Protocol",-1)),y(e("select",{class:"form-select","onUpdate:modelValue":A=>s.protocol=A},t[65]||(t[65]=[e("option",{value:"TCP"},"TCP",-1),e("option",{value:"UDP"},"UDP",-1),e("option",{value:"SCTP"},"SCTP",-1)]),8,Na),[[j,s.protocol]])]),e("div",Ha,[t[67]||(t[67]=e("label",{class:"form-label small"},"Host Port",-1)),y(e("input",{type:"number",min:"1",max:"65535",class:"form-control","onUpdate:modelValue":A=>s.hostPort=A,placeholder:"8080"},null,8,Ba),[[$,s.hostPort,void 0,{number:!0}]])]),e("div",Ka,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 cursor-pointer",onClick:A=>N(H),disabled:i.value.length<=1},"-",8,Oa)])]))),128)),e("div",{class:"form-text cursor-pointer",onClick:J,style:{color:"gray"}},"+ Add Port Mapping")])])]),e("div",Ga,[e("div",za,[e("div",qa,[t[70]||(t[70]=e("label",{class:"form-check-label me-2"},"Ingress Configuration",-1)),e("div",ja,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=s=>a.value.ingressEnabled=s)},null,512),[[ue,a.value.ingressEnabled]])])]),a.value.ingressEnabled?(m(),v("div",Fa,[e("div",Ya,[t[71]||(t[71]=e("label",{class:"form-label"},"Ingress Path",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[25]||(t[25]=s=>a.value.ingressUrl=s),placeholder:"/"},null,512),[[$,a.value.ingressUrl]])])])):V("",!0)])])])):V("",!0)],512),[[se,c.value===4]])]),e("div",Wa,[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:D}," Cancel "),e("div",Ja,[e("button",{class:"btn btn-outline-secondary",disabled:c.value===1,onClick:S},"Prev",8,Qa),c.value<4?(m(),v("button",{key:0,class:"btn btn-primary",disabled:!l.value,onClick:r},"Next",8,Xa)):(m(),v("button",{key:1,class:"btn btn-primary",disabled:!l.value,onClick:t[26]||(t[26]=s=>d.mode==="update"?ie():ne())},C(d.mode==="update"?"Update":"Create"),9,Za))])])])])],512))}}),to=ge(eo,[["__scopeId","data-v-42b8d677"]]),ao={class:"modal-dialog",role:"document"},oo={class:"modal-content"},so={class:"modal-body"},lo={class:"modal-footer"},no=["disabled"],io={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},ro=O({__name:"DeleteConfirmModal",props:{targetCatalog:{}},emits:["deleted","close"],setup(L,{expose:R,emit:d}){const M=L,_=d,c=F(),b=p(!1),h=p(null),T=()=>{if(h.value)try{const a=window.bootstrap;if(a&&a.Modal)new a.Modal(h.value).show();else{h.value.classList.add("show"),h.value.style.display="block",document.body.classList.add("modal-open");const f=document.createElement("div");f.className="modal-backdrop fade show",f.id="delete-modal-backdrop",document.body.appendChild(f)}}catch(a){console.warn("Failed to show modal with Bootstrap, using fallback:",a),h.value.classList.add("show"),h.value.style.display="block",document.body.classList.add("modal-open")}},g=()=>{if(h.value)try{const a=window.bootstrap;if(a&&a.Modal){const f=a.Modal.getInstance(h.value);f?f.hide():w()}else w()}catch(a){console.warn("Failed to hide modal with Bootstrap, using fallback:",a),w()}},w=()=>{if(h.value){h.value.classList.remove("show"),h.value.style.display="none",document.body.classList.remove("modal-open");const a=document.getElementById("delete-modal-backdrop");a&&a.remove(),_("close")}},U=async()=>{var a;if((a=M.targetCatalog)!=null&&a.id){b.value=!0;try{await Te(M.targetCatalog.id),c.success(`${M.targetCatalog.name} catalog has been successfully deleted.`),g(),_("deleted",M.targetCatalog.id)}catch(f){console.error("Delete failed:",f),c.error("Failed to delete catalog.")}finally{b.value=!1}}},k=()=>{_("close")};return Z(()=>{h.value&&h.value.addEventListener("hidden.bs.modal",k)}),ve(()=>{h.value&&h.value.removeEventListener("hidden.bs.modal",k)}),R({show:T,hide:g}),(a,f)=>(m(),v("div",{class:"modal fade",id:"deleteConfirmModal",tabindex:"-1",ref_key:"deleteModal",ref:h,onClick:re(g,["self"])},[e("div",ao,[e("div",oo,[e("div",{class:"modal-header"},[f[0]||(f[0]=e("h5",{class:"modal-title"},"Confirm Catalog Deletion",-1)),e("button",{type:"button",class:"btn-close",onClick:g,"aria-label":"Close"})]),e("div",so,[e("p",null,[f[1]||(f[1]=P("Are you sure you want to delete ")),e("strong",null,C(a.targetCatalog.name),1),P(" ("+C(a.targetCatalog.category)+") catalog?",1)]),f[2]||(f[2]=e("p",{class:"text-muted"},"This action cannot be undone.",-1))]),e("div",lo,[e("button",{type:"button",class:"btn btn-secondary",onClick:g},"Cancel"),e("button",{type:"button",class:"btn btn-danger",onClick:U,disabled:b.value},[b.value?(m(),v("span",io)):V("",!0),P(" "+C(b.value?"Deleting...":"Delete"),1)],8,no)])])])],512))}}),co={class:"modal-content"},uo={class:"modal-body"},mo={class:"row"},po={class:"col-lg-12"},vo={class:"mb-3"},go={class:"row"},fo={class:"col-lg-12"},bo={class:"mb-3"},ho={class:"row"},yo={class:"col-lg-12"},_o={class:"mb-3"},ko=["value"],wo={class:"modal-footer"},Co=O({__name:"uploadForm",props:{sourceData:{}},emits:["uploaded","close"],setup(L,{expose:R,emit:d}){const M=F(),_=L,c=d,b=p({path:"",sourceType:"",name:"",tag:""});X(()=>{var i,l;return[(i=_.sourceData)==null?void 0:i.sourceType,(l=_.sourceData)==null?void 0:l.name]},()=>{var i,l,r,S,D;console.log(_.sourceData),(i=_.sourceData)!=null&&i.sourceType&&(b.value.sourceType=(l=_.sourceData)==null?void 0:l.sourceType),(r=_.sourceData)!=null&&r.name&&(b.value.name=(S=_.sourceData)==null?void 0:S.name,T((D=_.sourceData)==null?void 0:D.name))},{immediate:!0});const h=p([]),T=async i=>{var S;const l={path:((S=_.sourceData)==null?void 0:S.id)||""},{data:r}=await Se(l);h.value=[],r.length>0&&r.forEach(D=>{h.value.push({key:D.name,value:D.name})})},g=()=>{if(!b.value.tag.trim()){M.error("Tag is required.");return}const i=fe.cloneDeep(_.sourceData);i.tag=b.value.tag,i.sourceType=b.value.sourceType,i.name=b.value.name,c("uploaded",i),b.value.tag="",a()},w=()=>{a()},U=()=>{const i=document.getElementById("upload-form-modal");if(i)try{const l=window.bootstrap;l&&l.Modal?new l.Modal(i).show():k()}catch(l){console.warn("Failed to show modal with Bootstrap, using fallback:",l),k()}},k=()=>{const i=document.getElementById("upload-form-modal");if(i){document.querySelectorAll(".modal-backdrop").forEach(S=>S.remove()),i.classList.add("show"),i.style.display="block",i.style.opacity="1",i.setAttribute("aria-hidden","false"),document.body.classList.add("modal-open");const r=document.createElement("div");r.className="modal-backdrop fade show",r.id="upload-modal-backdrop",document.body.appendChild(r)}},a=()=>{const i=document.getElementById("upload-form-modal");if(i)try{const l=window.bootstrap;if(l&&l.Modal){const r=l.Modal.getInstance(i);r?r.hide():f()}else f()}catch(l){console.warn("Failed to hide modal with Bootstrap, using fallback:",l),f()}},f=()=>{const i=document.getElementById("upload-form-modal");i&&(i.classList.remove("show","fade","in"),i.style.display="none",i.style.opacity="0",i.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.querySelectorAll(".modal-backdrop, #upload-modal-backdrop").forEach(r=>r.remove()),c("close"))};return R({show:U,hide:a}),(i,l)=>(m(),v("div",{class:"modal modal-blur fade",id:"upload-form-modal",tabindex:"-1",role:"dialog","aria-hidden":"true",onClick:w},[e("div",{class:"modal-dialog modal-lg modal-dialog-centered",role:"document",onClick:l[3]||(l[3]=re(()=>{},["stop"]))},[e("div",co,[e("div",{class:"modal-header"},[l[4]||(l[4]=e("h5",{class:"modal-title"},"Upload Application",-1)),e("button",{type:"button",class:"btn-close",onClick:a,"aria-label":"Close"})]),e("div",uo,[e("form",{onSubmit:re(g,["prevent"])},[e("div",mo,[e("div",po,[e("div",vo,[l[5]||(l[5]=e("label",{class:"form-label"},"Source Type",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=r=>b.value.sourceType=r),disabled:""},null,512),[[$,b.value.sourceType]])])])]),e("div",go,[e("div",fo,[e("div",bo,[l[6]||(l[6]=e("label",{class:"form-label"},"Name",-1)),y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=r=>b.value.name=r),disabled:""},null,512),[[$,b.value.name]])])])]),e("div",ho,[e("div",yo,[e("div",_o,[l[8]||(l[8]=e("label",{class:"form-label"},[P("Tag "),e("span",{class:"text-red"},"*")],-1)),y(e("select",{class:"form-select","onUpdate:modelValue":l[2]||(l[2]=r=>b.value.tag=r)},[l[7]||(l[7]=e("option",{value:""},"Select Tag",-1)),(m(!0),v(x,null,E(h.value,r=>(m(),v("option",{value:r.value,key:r.key},C(r.value),9,ko))),128))],512),[[j,b.value.tag]]),l[9]||(l[9]=e("small",{class:"form-hint"},"Please enter the tag for this catalog.",-1))])])])],32)]),e("div",wo,[e("button",{type:"button",class:"btn btn-link link-secondary",onClick:a}," Cancel "),e("button",{type:"submit",class:"btn btn-primary ms-auto",onClick:g},[I(B(Fe),{class:"icon"}),l[10]||(l[10]=P(" Upload "))])])])])]))}}),$o=ge(Co,[["__scopeId","data-v-aa3822e5"]]),Mo={ref:"sofwareCatalog"},To={class:"row"},So={class:"col-lg-9"},Uo={class:"card"},Io={class:"list-group card-list-group",id:"sc-list-group"},Ro={class:"row g-2 align-items-center"},xo={class:"col-auto me-3"},Do=["src"],Ao={key:1,src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},Vo=["onClick"],Eo={class:"text-muted"},Po={class:"col-auto text-muted"},Lo={class:"d-flex justify-content-end"},No={class:"mouse-hover"},Ho={class:"d-flex justify-content-end"},Bo=["id"],Ko={class:"accordion-body pt-0"},Oo=["innerHTML"],Go=["id"],zo=["onClick"],qo=["id"],jo=["id"],Fo={class:"btn btn-sm",style:{"margin-right":"5px"}},Yo={class:"btn btn-sm",style:{"margin-right":"5px"}},Wo={class:"btn btn-sm",style:{"margin-right":"5px"}},Jo={class:"col-lg-3"},Qo={class:"input-icon mb-3"},Xo={class:"input-icon-addon"},Zo={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},es={class:"row row-cards",id:"resultDockerHubSearch"},ts={class:"card"},as={class:"row row-0"},os={class:"col-auto"},ss=["src"],ls={class:"col"},ns={class:"card-body"},is=["href"],ds={class:"text-muted"},rs={class:"col-auto lh-1"},cs={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},us={class:"mt-5"},ms={key:0,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},ps={class:"row row-cards",id:"resultArtifactHubSearch"},vs={class:"card"},gs={class:"row row-0"},fs={class:"col"},bs={class:"card-body"},hs=["href"],ys={class:"text-muted"},_s={class:"col-auto lh-1"},ks={class:"d-flex justify-content-end me-2 mt-4 mouse-hover"},ws=O({__name:"softwareCatalogList",setup(L){const R=F(),d=p([]),M=p(null),_=p(null),c=p({}),b=p("new"),h=p({}),T=p(""),g=p({}),w=p(null),U=p(null),k=p({}),a=p(""),f=p([]),i=p([]),l=p("");Z(async()=>{a.value="",S(),document.addEventListener("click",n=>{n.target.closest(".dropdown")||(l.value="")})});const r=()=>{b.value="new",_.value=null,c.value={},M.value=0,h.value={},T.value=""},S=async()=>{try{await Ue(a.value).then(({data:n})=>{fe.forEach(n,function(u){u.refData=D(u.catalogRefs),u.isShow=!1}),d.value=n})}catch(n){console.log(n),R.error("Unable to retrieve data.")}},D=n=>n.reduce((u,o)=>(u[o.refType]||(u[o.refType]=[]),u[o.refType].push(o),u),{}),Y=async n=>{n.keyCode==13&&(await W(),await J())},W=async()=>{f.value=[];try{const{data:n}=await Re(a.value);for(let u=0;u<3;u++)f.value.push(n.results[u])}catch(n){console.log(n),R.error("Unable to retrieve data.")}},J=async()=>{i.value=[];try{const{data:n}=await xe(a.value);for(let u=0;u<3;u++)i.value.push(n.packages[u])}catch(n){console.log(n),R.error("Unable to retrieve data.")}},N=n=>{const u=d.value.find(o=>o.id===n);_.value=n,c.value=u||{},b.value="update"},ee=n=>{console.log("Delete catalog:",n),g.value=n,w.value&&w.value.show()},ne=async n=>{console.log("Catalog deleted:",n),await S()},ie=()=>{g.value={}},de=async n=>{d.value[n].isShow=!d.value[n].isShow},te=(n,u)=>Object.prototype.hasOwnProperty.call(n,u),G=n=>{window.open(n)},Q=n=>n.replace(/\\n|\n/g,"<br/>"),z=(n,u)=>{console.log("sourceData",n),k.value=n,k.value.sourceType=u,console.log("uploadData",k.value),U.value&&U.value.show()},q=async n=>{if(console.log("Upload completed:",n),n.sourceType=="DockerHub"){n.createdAt=n.created_at,n.updatedAt=n.updated_at,n.short_description=n.short_description,n.starCount=n.star_count,n.ratePlans=n.rate_plans,delete n.created_at,delete n.updated_at,delete n.short_description,delete n.star_count,delete n.rate_plans;const{data:u}=await De(n)}else if(n.sourceType=="ArtifactHub"){const u={name:n.name,tag:n.tag},{data:o}=await Ae(u)}R.success("Software catalog uploaded successfully!")},ae=()=>{k.value={sourceType:"",name:"",sourceData:{}}};return(n,u)=>(m(),v(x,null,[e("div",Mo,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[u[1]||(u[1]=e("h2",{class:"mb-0"},"Catalog",-1)),e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block",style:{"margin-right":"315px"},"data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:r}," Regist ")]),e("div",To,[e("div",So,[e("div",Uo,[e("div",Io,[(m(!0),v(x,null,E(d.value,(o,t)=>(m(),v("div",{class:"list-group-item",key:t},[e("div",Ro,[e("div",xo,[o.logoUrlLarge?(m(),v("img",{key:0,src:o.logoUrlLarge,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,Do)):(m(),v("img",Ao))]),e("div",{class:"col",onClick:s=>de(t)},[P(C(o.name)+" ",1),e("div",Eo,C(o.summary),1)],8,Vo),e("div",Po,[e("div",Lo,[e("div",No,[I(B(Ge),{class:"me-2 cursor-pointer",size:"15","stroke-width":"2","data-bs-toggle":"modal","data-bs-target":"#modal-wizard",onClick:s=>N(o.id)},null,8,["onClick"]),I(B(je),{class:"cursor-pointer",size:"15","stroke-width":"2",onClick:s=>ee(o)},null,8,["onClick"])])]),e("div",Ho,C(o.category),1)]),e("div",{id:"accordion_"+o.id,class:"accordion-collapse collapse",style:Le([o.isShow?{display:"block"}:{display:"none"}])},[e("div",Ko,[e("div",{class:"mt-3 mb-5",innerHTML:Q(o.description)},null,8,Oo),e("div",null,[u[2]||(u[2]=e("strong",null,"Ref Information",-1)),e("ul",{id:`${t}-entity-ul`},[te(o.refData,"HOMEPAGE")?(m(!0),v(x,{key:0},E(o.refData.HOMEPAGE,(s,H)=>(m(),v("li",{key:H},[e("a",{class:"btn",onClick:A=>G(s.refValue)},C(s.refValue),9,zo)]))),128)):V("",!0)],8,Go),u[3]||(u[3]=e("strong",null,"TAGS",-1)),e("ul",{id:`${t}-tag-ul`},[te(o.refData,"TAG")?(m(!0),v(x,{key:0},E(o.refData.TAG,(s,H)=>(m(),v("span",{key:H},"#"+C(s.refValue)+"  ",1))),128)):V("",!0)],8,qo),u[4]||(u[4]=e("strong",null,"Recommended Spec",-1)),e("ul",{id:`${t}-tag-ul`},[o.recommendedCpu&&o.recommendedMemory&&o.recommendedDisk?(m(),v(x,{key:0},[e("button",Fo," CPU : "+C(o.recommendedCpu)+" Core ",1),e("button",Yo," MEMORY : "+C(o.recommendedMemory)+" GB ",1),e("button",Wo," DISK : "+C(o.recommendedDisk)+" GB ",1)],64)):V("",!0)],8,jo)])])],12,Bo)])]))),128))])])]),e("div",Jo,[e("div",Qo,[e("span",Xo,[I(B(Ie),{class:"icon",width:"24",height:"24","stroke-width":"2"})]),y(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:Y,"onUpdate:modelValue":u[0]||(u[0]=o=>a.value=o),id:"inputCatalogSearch"},null,544),[[$,a.value]])]),u[7]||(u[7]=e("h3",{class:"mb-3"}," DOCKERHUB ",-1)),f.value.length==0?(m(),v("div",Zo," There are no related Container Images found. ")):V("",!0),e("div",es,[(m(!0),v(x,null,E(f.value,(o,t)=>(m(),v("div",{class:"col-md-6 col-lg-12",key:t},[e("div",ts,[e("div",as,[e("div",os,[e("img",{src:o.logo_url.large,class:"rounded-start ms-2",alt:"Shape of You",width:"80",height:"80"},null,8,ss)]),e("div",ls,[e("div",ns,[e("a",{href:"https://hub.docker.com/search?q="+a.value,target:"_blank"},C(o.name),9,is),e("div",ds,C(o.short_description.length>30?o.short_description.substring(0,30)+"...":""),1)])]),e("div",rs,[e("div",cs,[I(B(pe),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:s=>z(o,"DockerHub")},null,8,["onClick"])])])])])]))),128))]),e("div",us,[u[6]||(u[6]=e("h3",{class:"mb-3"}," ARTIFACTHUB ",-1)),i.value.length==0?(m(),v("div",ms," There are no related Helm Charts found. ")):V("",!0),e("div",ps,[(m(!0),v(x,null,E(i.value,(o,t)=>(m(),v("div",{class:"col-md-6 col-lg-12",key:t},[e("div",vs,[e("div",gs,[u[5]||(u[5]=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1)),e("div",fs,[e("div",bs,[e("a",{href:"https://artifacthub.io/packages/search?ts_query_web="+a.value+"&sort=relevance&page=1",target:"_blank"},C(o.name),9,hs),e("div",ys,C(o.description.length>30?o.description.substring(0,30)+"...":""),1)])]),e("div",_s,[e("div",ks,[I(B(pe),{class:"cursor-pointer",size:"20","stroke-width":"2",onClick:s=>z(o,"ArtifactHub")},null,8,["onClick"])])])])])]))),128))])])])])],512),I(ro,{ref_key:"deleteConfirmModal",ref:w,"target-catalog":g.value,onDeleted:ne,onClose:ie},null,8,["target-catalog"]),I(to,{mode:b.value,"catalog-id":_.value,"catalog-info":c.value,onCreated:S,onUpdated:S},null,8,["mode","catalog-id","catalog-info"]),I($o,{ref_key:"uploadFormModal",ref:U,"source-data":k.value,onUploaded:q,onClose:ae},null,8,["source-data"])],64))}}),Cs={class:"page",ref:"sofwareCatalog"},$s={class:"page-wrapper"},Ms={class:"page-header d-print-none"},Ts={class:"container-xxl"},Ss={class:"row g-2 align-items-center"},Us={class:"col-auto ms-auto"},Is={class:"page-body"},Rs={class:"container-xxl"},xs={class:"row"},Ds={class:"col-lg-12"},As={class:"card"},Vs={class:"card-header"},Es={class:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs"},Ps={class:"nav-item"},Ls={href:"#tabs-catalog",class:"nav-link active","data-bs-toggle":"tab"},Ns={class:"nav-item"},Hs={href:"#tabs-status",class:"nav-link","data-bs-toggle":"tab"},Bs={class:"nav-item"},Ks={href:"#tabs-repository",class:"nav-link","data-bs-toggle":"tab"},Os={class:"card-body"},Gs={class:"tab-content"},zs={class:"tab-pane active show",id:"tabs-catalog"},qs={class:"tab-pane",id:"tabs-status"},js={class:"tab-pane",id:"tabs-repository"},sl=O({__name:"SoftwareCatalog",setup(L){const R=Ne(),d=p(""),M=p(""),_=p(!1),c=p("");Z(async()=>{d.value=R.getNsId()});const b=g=>{M.value=g},h=g=>{c.value=g,_.value=!0},T=()=>{_.value=!1,c.value=""};return(g,w)=>(m(),v(x,null,[e("div",Cs,[e("div",$s,[e("div",Ms,[e("div",Ts,[e("div",Ss,[w[1]||(w[1]=e("div",{class:"col d-flex"},[e("h2",{class:"page-title"},"Software Catalog")],-1)),e("div",Us,[e("button",{class:"btn btn-outline-primary d-none d-sm-inline-block","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:w[0]||(w[0]=U=>b("Application Installation"))}," DEPLOY ")])])])]),e("div",Is,[e("div",Rs,[e("div",xs,[e("div",Ds,[e("div",As,[e("div",Vs,[e("ul",Es,[e("li",Ps,[e("a",Ls,[I(B(Oe),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),w[2]||(w[2]=P(" Catalog "))])]),e("li",Ns,[e("a",Hs,[I(B(Ke),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),w[3]||(w[3]=P(" Apps Status "))])]),e("li",Bs,[e("a",Ks,[I(B(ze),{class:"icon me-2",width:"24",height:"24","stroke-width":"2"}),w[4]||(w[4]=P(" Repository "))])])])]),e("div",Os,[e("div",Gs,[e("div",zs,[e("div",null,[I(ws,{nsId:d.value},null,8,["nsId"])])]),e("div",qs,[e("div",null,[I(ct)])]),e("div",js,[e("div",null,[_.value?(m(),me(Be,{key:1,embedded:!0,"repository-name":c.value,onBackToList:T},null,8,["repository-name"])):(m(),me(He,{key:0,embedded:!0,onOpenDetail:h}))])])])])])])])])])])],512),I(Ve,{"ns-id":d.value,title:M.value},null,8,["ns-id","title"])],64))}});export{sl as default};
