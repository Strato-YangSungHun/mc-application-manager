import{d as L,u as B,r as $,o as E,h as a,a as l,b as e,e as g,g as S,v as U,F as y,f as k,s as A,p as F,k as j,l as x,z as R,j as V,i as z,t as u,A as O}from"./index-BRaYQilg.js";import{s as N}from"./request-CyFmJdGV.js";import{_ as P}from"./lodash-BWWYib51.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W=i=>N.post("/catalog/software",i),r=i=>(F("data-v-de7f359c"),i=i(),j(),i),K={class:"modal",id:"modal-form",tabindex:"-1"},Y={class:"modal-dialog modal-lg",role:"document"},q={class:"modal-content"},J=r(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Create New Software catalog"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Q={class:"modal-body"},X={class:"mb-3"},Z=r(()=>e("label",{class:"form-label"},"Title",-1)),ee={class:"mb-3"},te=r(()=>e("label",{class:"form-label"},"Summary",-1)),oe={class:"mb-3"},se=r(()=>e("label",{class:"form-label"},"Icon",-1)),ae={class:"mb-3"},le=r(()=>e("label",{class:"form-label"},"Category",-1)),ne=x('<option value="server" selected data-v-de7f359c>SERVER</option><option value="was" data-v-de7f359c>WAS</option><option value="db" data-v-de7f359c>DB</option><option value="util" data-v-de7f359c>UTIL</option><option value="observability" data-v-de7f359c>OBSERVABILITY</option>',5),ce=[ne],ie={class:"mb-3"},re=r(()=>e("label",{class:"form-label"},"Description",-1)),de={class:"col-lg-6"},he={class:"mb-3"},ue=r(()=>e("label",{class:"form-label"},"Reference",-1)),pe=["onUpdate:modelValue"],_e=x('<option value="url" selected data-v-de7f359c>URL</option><option value="manifest" data-v-de7f359c>manifest</option><option value="workflow" data-v-de7f359c>workflow</option><option value="image" data-v-de7f359c>image</option><option value="etc" data-v-de7f359c>etc</option>',5),ve=[_e],me={class:"col-lg-6"},fe={class:"mb-3"},ge=r(()=>e("label",{class:"form-label"}," ",-1)),we=["onUpdate:modelValue"],be={class:"mb-3"},ye={class:"input-form"},ke=["onUpdate:modelValue"],$e={class:"btn-list"},Ce={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-plus",style:{margin:"0 !important"}},Se=r(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),xe=r(()=>e("path",{d:"M12 5l0 14"},null,-1)),De=r(()=>e("path",{d:"M5 12l14 0"},null,-1)),Me=[Se,xe,De],Ve=["onClick"],Ie={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-minus",style:{margin:"0 !important"}},He=r(()=>e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Te=r(()=>e("path",{d:"M5 12l14 0"},null,-1)),Re=[He,Te],Ae=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 5l0 14"}),e("path",{d:"M5 12l14 0"})],-1)),Ue=L({__name:"softwareCatalogForm",emits:["get-list"],setup(i,{emit:f}){const d=B(),n=$({}),p=$([]),m=$([]),C=f;E(async()=>{await w()});const w=async()=>{console.log("setInit"),n.value={catalogIdx:null,catalogTitle:"",catalogDescription:"",catalogSummary:"",catalogCategory:"",catalogRefData:[]},p.value=[],p.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:null,referenceValue:"",referenceDescription:"",referenceType:"url"})},D=()=>{console.log("addRef"),p.value.push({catalogRefIdx:null,catalogIdx:null,referncetIdx:null,referenceValue:"",referenceDescription:"",referenceType:"url"})},I=_=>{p.value.length!==1&&p.value.splice(_,1)},H=_=>{m.value=_.target.files[0]},T=async()=>{const _=new FormData;_.append("iconFile",m.value),_.append("catalogDto",n.value);const{data:h}=await W(_);h?d.success("등록되었습니다."):d.error("등록 할 수 없습니다."),C("get-list")};return(_,h)=>(a(),l("div",K,[e("div",Y,[e("div",q,[J,e("div",Q,[e("div",X,[Z,g(e("input",{type:"text",class:"form-control",id:"sc-title",name:"title",placeholder:"Application name","onUpdate:modelValue":h[0]||(h[0]=c=>n.value.catalogTitle=c)},null,512),[[S,n.value.catalogTitle]])]),e("div",ee,[te,g(e("input",{type:"text",class:"form-control",id:"sc-summary",name:"summary",placeholder:"Application summary","onUpdate:modelValue":h[1]||(h[1]=c=>n.value.catalogSummary=c)},null,512),[[S,n.value.catalogSummary]])]),e("div",oe,[se,e("input",{type:"file",class:"form-control",id:"sc-icon",name:"icon",placeholder:"Icon File",onChange:H},null,32)]),e("div",ae,[le,g(e("select",{class:"form-select",id:"sc-category","onUpdate:modelValue":h[2]||(h[2]=c=>n.value.catalogCategory=c)},ce,512),[[U,n.value.catalogCategory]])]),e("div",ie,[re,g(e("textarea",{class:"form-control",rows:"5",id:"sc-desc","onUpdate:modelValue":h[3]||(h[3]=c=>n.value.catalogDescription=c)},null,512),[[S,n.value.catalogDescription]])]),(a(!0),l(y,null,k(p.value,(c,M)=>(a(),l("div",{class:"row",id:"sc-ref",key:M},[e("div",de,[e("div",he,[ue,g(e("select",{class:"form-select",id:"sc-reference-1","onUpdate:modelValue":t=>c.referenceType=t},ve,8,pe),[[U,c.referenceType]])])]),e("div",me,[e("div",fe,[ge,g(e("input",{type:"text",class:"form-control",id:"sc-ref-value-1",name:"refValue",placeholder:"Ref value","onUpdate:modelValue":t=>c.referenceValue=t},null,8,we),[[S,c.referenceValue]])])]),e("div",be,[e("div",ye,[g(e("input",{type:"text",class:"form-control",style:{width:"80% !important"},id:"sc-ref-desc-1",name:"refDescription",placeholder:"Ref Description","onUpdate:modelValue":t=>c.referenceDescription=t},null,8,ke),[[S,c.referenceDescription]]),e("div",$e,[e("button",{class:"btn btn-primary",onClick:D,style:{"text-align":"center !important"}},[(a(),l("svg",Ce,Me))]),e("button",{class:"btn btn-primary",onClick:t=>I(M)},[(a(),l("svg",Ie,Re))],8,Ve)])])])]))),128))]),e("div",{class:"modal-footer"},[e("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:w}," Cancel "),e("a",{class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:T},[Ae,A(" Create New Software catalog ")])])])])]))}}),Le=G(Ue,[["__scopeId","data-v-de7f359c"]]);/*!
* Tabler v1.0.0-beta19 (https://tabler.io)
* @version 1.0.0-beta19
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
*/(function(i){typeof define=="function"&&define.amd?define(i):i()})(function(){var i,f="tablerTheme",d=new Proxy(new URLSearchParams(window.location.search),{get:function(p,m){return p.get(m)}});if(d.theme)localStorage.setItem(f,d.theme),i=d.theme;else{var n=localStorage.getItem(f);i=n||"light"}i==="dark"?document.body.setAttribute("data-bs-theme",i):document.body.removeAttribute("data-bs-theme")});const Be={class:"page",ref:"sofwareCatalog"},Ee={class:"page-wrapper"},Fe=x('<div class="page-header d-print-none"><div class="container-xl"><div class="row g-2 align-items-center"><div class="col"><h2 class="page-title">Software catalog</h2></div><div class="col-auto ms-auto"><div class="btn-list"><a class="btn btn-primary d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-form"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 5l0 14"></path><path d="M5 12l14 0"></path></svg> New </a></div></div></div></div></div>',1),je={class:"page-body"},ze={class:"container-xl"},Oe={class:"row"},Ne={class:"col-lg-8"},Pe={class:"card"},Ge={class:"list-group card-list-group",id:"sc-list-group"},We={class:"row g-2 align-items-center"},Ke={class:"col-auto fs-3"},Ye={class:"col-auto"},qe=["src"],Je=["onClick"],Qe={class:"text-muted"},Xe={class:"col-auto text-muted"},Ze=x('<div class="col-auto lh-1"><div class="dropdown"><a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a><div class="dropdown-menu dropdown-menu-end"><a class="dropdown-item" href="#">temp action - 1</a><a class="dropdown-item" href="#">temp action - 2</a></div></div></div>',1),et=["id"],tt={class:"accordion-body pt-0"},ot=e("br",null,null,-1),st=e("br",null,null,-1),at=e("strong",null,"연동 workflow",-1),lt=["id"],nt={href:"",class:"btn"},ct={key:1},it=e("a",{href:""},"등록된 워크플로우가 없습니다.",-1),rt=[it],dt=e("br",null,null,-1),ht=e("strong",null,"관련 정보",-1),ut=["id"],pt=["onClick"],_t=e("strong",null,"TAGS",-1),vt=["id"],mt={class:"col-lg-4"},ft=e("div",null,[e("br")],-1),gt=e("h3",{class:"mb-3"},"dockerHub search",-1),wt={key:0,class:"col-md-6 col-lg-12",id:"resultDockerHubEmpty"},bt={class:"row row-cards",id:"resultDockerHubSearch"},yt={class:"card"},kt={class:"row row-0"},$t={class:"col-auto"},Ct=["src"],St={class:"col"},xt={class:"card-body"},Dt={href:"",target:"_blank"},Mt={class:"text-muted"},Vt=x('<div class="col-auto lh-1"><div class="dropdown"><a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a><div class="dropdown-menu dropdown-menu-end"><a class="dropdown-item" href="#"> 해당 페이지로 이동 </a><a class="dropdown-item" href="#"> softwareCatalog로 내용 입력 </a><a class="dropdown-item" href="#"> file/image를 nexus로 복제 </a></div></div></div>',1),It=e("div",{style:{"margin-bottom":"20px"}}," ",-1),Ht=e("h3",{class:"mb-3"},"artifactHub search",-1),Tt={key:1,class:"col-md-6 col-lg-12",id:"resultArtifactHubEmpty"},Rt={class:"row row-cards",id:"resultArtifactHubSearch"},At={class:"card"},Ut={class:"row row-0"},Lt=e("div",{class:"col-auto"},[e("img",{src:"https://artifacthub.io/static/media/placeholder_pkg_helm.png",class:"rounded-start",alt:"Shape of You",width:"80",height:"80"})],-1),Bt={class:"col"},Et={class:"card-body"},Ft={href:"",target:"_blank"},jt={class:"text-muted"},zt=x('<div class="col-auto lh-1"><div class="dropdown"><a href="#" class="link-secondary" data-bs-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></a><div class="dropdown-menu dropdown-menu-end"><a class="dropdown-item" href="#"> 해당 페이지로 이동 </a><a class="dropdown-item" href="#"> softwareCatalog로 내용 입력 </a><a class="dropdown-item" href="#"> file/image를 nexus로 복제 </a></div></div></div>',1),Kt=L({__name:"SoftwareCatalogList",setup(i){const f=B(),d=$([]),n=$(""),p=window.location.host.split(":"),m=window.location.protocol+"//"+p[0]+":18084",C=$([]),w=$([]);E(async()=>{n.value="",await D()});const D=async()=>{try{const t=await R.get(m+"/catalog/software/?title="+n.value);P.forEach(t.data,function(s){s.catalogIcon=m+s.catalogIcon,s.refData=I(s.catalogRefData),s.isShow=!1}),d.value=t.data,console.log("catalogList.value : ",d.value)}catch(t){console.log(t),f.error("데이터를 가져올 수 없습니다.")}},I=t=>t.reduce((s,o)=>(s[o.referenceType]||(s[o.referenceType]=[]),s[o.referenceType].push(o),s),{}),H=async t=>{console.log("e.keyCode : ",t.keyCode),t.keyCode==13&&(await D(),await T(),await _())},T=async()=>{try{const t=await R.get(m+"/search/dockerhub/"+n.value);for(let s=0;s<3;s++)C.value.push(t.data.data.results[s]);console.log("setDockerHubSearch dockerHubSearchList.value : ",C.value)}catch(t){console.log(t),f.error("데이터를 가져올 수 없습니다.")}},_=async()=>{try{const t=await R.get(m+"/search/artifacthub/"+n.value);for(let s=0;s<3;s++)w.value.push(t.data.data.packages[s]);console.log("setArtifactHubSearch artifactHubSearch.value : ",w.value)}catch(t){console.log(t),f.error("데이터를 가져올 수 없습니다.")}},h=async t=>{d.value[t].isShow=!d.value[t].isShow},c=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),M=t=>{window.open(t)};return(t,s)=>(a(),l("div",Be,[e("div",Ee,[Fe,e("div",je,[e("div",ze,[e("div",Oe,[e("div",Ne,[e("div",Pe,[e("div",Ge,[(a(!0),l(y,null,k(d.value,(o,v)=>(a(),l("div",{class:"list-group-item",key:v},[e("div",We,[e("div",Ke,u(v+1),1),e("div",Ye,[e("img",{src:o.catalogIcon,class:"rounded",alt:"Catalog Icon",width:"40",height:"40"},null,8,qe)]),e("div",{class:"col",onClick:b=>h(v)},[A(u(o.catalogTitle)+" ",1),e("div",Qe,u(o.catalogSummary),1)],8,Je),e("div",Xe,u(o.catalogCategory),1),Ze,e("div",{id:"accordion_"+o.catalogIdx,class:"accordion-collapse collapse",style:O([o.isShow?{display:"block"}:{display:"none"}])},[e("div",tt,[ot,A(" "+u(o.catalogDescription)+" ",1),e("div",null,[st,at,e("ul",{id:`${v}-workflow-ul`},[c(o.refData,"WORKFLOW")?(a(!0),l(y,{key:0},k(o.refData.WORKFLOW,b=>(a(),l("li",null,[e("a",nt,u(b.referenceValue),1)]))),256)):(a(),l("li",ct,rt))],8,lt),dt,ht,e("ul",{id:`${v}-entity-ul`},[c(o.refData,"HOMEPAGE")?(a(!0),l(y,{key:0},k(o.refData.HOMEPAGE,b=>(a(),l("li",null,[e("a",{onClick:Ot=>M(b.referenceValue),class:"btn"},u(b.referenceValue),9,pt)]))),256)):V("",!0)],8,ut),_t,e("ul",{id:`${v}-tag-ul`},[c(o.refData,"TAG")?(a(!0),l(y,{key:0},k(o.refData.TAG,b=>(a(),l("span",null,"#"+u(b.referenceValue)+"  ",1))),256)):V("",!0)],8,vt)])])],12,et)])]))),128))])])]),e("div",mt,[g(e("input",{type:"text",class:"form-control",placeholder:"Search…",onKeypress:H,"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),id:"inputCatalogSearch"},null,544),[[S,n.value]]),ft,gt,C.value.length==0?(a(),l("div",wt,"검색된 관련 ContainerImage가 없습니다.")):V("",!0),e("div",bt,[(a(!0),l(y,null,k(C.value,(o,v)=>(a(),l("div",{class:"col-md-6 col-lg-12",key:v},[e("div",yt,[e("div",kt,[e("div",$t,[e("img",{src:o.logo_url.large,class:"rounded-start",alt:"Shape of You",width:"80",height:"80"},null,8,Ct)]),e("div",St,[e("div",xt,[e("a",Dt,u(o.name),1),e("div",Mt,u(o.short_description.length>30?o.short_description.substring(0,30)+"...":""),1)])]),Vt])])]))),128))]),It,Ht,w.value.length==0?(a(),l("div",Tt,"검색된 관련 HelmChart가 없습니다.")):V("",!0),e("div",Rt,[(a(!0),l(y,null,k(w.value,(o,v)=>(a(),l("div",{class:"col-md-6 col-lg-12",key:v},[e("div",At,[e("div",Ut,[Lt,e("div",Bt,[e("div",Et,[e("a",Ft,u(o.name),1),e("div",jt,u(o.description.length>30?o.description.substring(0,30)+"...":""),1)])]),zt])])]))),128))])])])])])]),z(Le,{onGetList:D})],512))}});export{Kt as default};
